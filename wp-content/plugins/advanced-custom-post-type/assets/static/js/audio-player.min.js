window.onload=function(){if("function"==typeof WaveSurfer){let h=e=>{var t=~~(e/3600),a=~~(e%3600/60),e=~~e%60,l="";return 0<t&&(l+=t+":"+(a<10?"0":"")),l=l+(String(a).padStart(2,"0")+":"+(e<10?"0":""))+(""+e)},S=(e,t)=>{t=new CustomEvent("acpt-change-song",{detail:{song:t}});e.dispatchEvent(t)},L="1"===localStorage.getItem("acpt_playlist_shuffle"),q="1"===localStorage.getItem("acpt_playlist_autoplay");var e=document.querySelectorAll(".acpt-custom-audio-playlist-wrapper"),e=(0<e.length&&e.forEach(e=>{let t=e.querySelector(".shuffle"),a=e.querySelector(".autoplay"),l=e.querySelector(".toggle"),i=e.querySelector(".acpt-audio-playlist");var r=i.querySelectorAll("li");let c=e.querySelector(".acpt-custom-audio-player-wrapper");e=window.getComputedStyle(i).getPropertyValue("max-height").replace("px","");20*r.length>parseInt(e)&&(i.style.paddingRight="5px"),L&&t.classList.add("active"),t.addEventListener("click",function(e){e.preventDefault(),L=t.classList.contains("active")?(t.classList.remove("active"),localStorage.setItem("acpt_playlist_shuffle","0"),!1):(t.classList.add("active"),localStorage.setItem("acpt_playlist_shuffle","1"),!0)}),q&&a.classList.add("active"),a.addEventListener("click",function(e){e.preventDefault(),q=a.classList.contains("active")?(a.classList.remove("active"),localStorage.setItem("acpt_playlist_autoplay","0"),!1):(a.classList.add("active"),localStorage.setItem("acpt_playlist_autoplay","1"),!0)}),l.addEventListener("click",function(e){e.preventDefault(),l.classList.contains("reverse")?(l.classList.remove("reverse"),i.classList.remove("hidden")):(l.classList.add("reverse"),i.classList.add("hidden"))}),r.forEach(e=>{var t=e.querySelector(".meta");let a=e.id,l=e.dataset.src,i=e.dataset.title,r=e.dataset.album,s=e.dataset.artist,n=e.dataset.thumbnail;t.addEventListener("click",function(e){e.preventDefault(),S(c,{id:a,src:l,title:i,album:r,artist:s,thumbnail:n})})})}),document.querySelectorAll(".acpt-custom-audio-player-wrapper"));0<e.length&&e.forEach(r=>{var e=r.nextElementSibling?r.nextElementSibling.nextElementSibling:null,t=r.dataset.theme;let a=r.querySelector(".loading"),s=r.querySelector(".wave"),l=r.querySelector(".controls"),n=r.querySelector(".play");var i=r.querySelector(".ff"),c=r.querySelector(".rw"),o=r.querySelector(".prev"),d=r.querySelector(".next");let u=r.querySelector(".timer"),p=r.querySelector(".volume"),v=r.querySelector(".mute");var f="dark"===t?"#ffffff":"#777777",t="dark"===t?"#aaaaaa":"#ccd0d4";let m=[],y=(e&&e.classList.contains("acpt-audio-playlist")&&e.querySelectorAll("li").forEach(e=>{m.push({id:e.id,src:e.dataset.src,title:e.dataset.title,artist:e.dataset.artist,album:e.dataset.album,thumbnail:e.dataset.thumbnail})}),WaveSurfer.create({height:64,width:"100%",container:s,waveColor:f,progressColor:"#007cba",cursorColor:t,cursorWidth:2,url:s.dataset.src,barRadius:4,barWidth:4})),g=()=>{var e=y.getDuration(),t=y.getCurrentTime();u.innerHTML=h(t)+" / "+h(e)};n.addEventListener("click",function(e){e.preventDefault(),y.isPlaying()?n.classList.remove("pause"):n.classList.add("pause"),y.playPause()}),i.addEventListener("click",function(e){e.preventDefault();e=y.getCurrentTime()+15;y.setTime(e)}),c.addEventListener("click",function(e){e.preventDefault();e=y.getCurrentTime()-15;y.setTime(e)}),o&&o.addEventListener("click",function(e){e.preventDefault();e=m.findIndex(e=>e.id===r.id);let t;(t=L?m.filter(e=>e.id!==r.id)[Math.floor(Math.random()*m.length)]:m[e-1])&&S(r,t)}),d&&d.addEventListener("click",function(e){e.preventDefault();e=m.findIndex(e=>e.id===r.id);let t;(t=L?m.filter(e=>e.id!==r.id)[Math.floor(Math.random()*m.length)]:m[e+1])&&S(r,t,y.isPlaying())}),p.addEventListener("change",function(e){e=e.target.value;0<e?(y.setMuted(!1),v.classList.remove("muted")):(y.setMuted(!0),v.classList.add("muted")),y.setVolume(e)}),v.addEventListener("click",function(e){e.preventDefault(),y.getMuted()?(y.setMuted(!1),v.classList.remove("muted"),p.value=1,y.setVolume(1)):(y.setMuted(!0),v.classList.add("muted"),p.value=0)}),y.on("ready",function(){l.style.display="flex",g(),a.remove()}),y.on("audioprocess",function(){g()}),y.on("finish",function(){if(n.classList.remove("pause"),0<m.length){var t=m.findIndex(e=>e.id===r.id);let e;(e=L?m.filter(e=>e.id!==r.id)[Math.floor(Math.random()*m.length)]:m[t+1])&&S(r,e)}}),r.addEventListener("acpt-change-song",function(e){let t=e.detail.song;var e=r.querySelector(".thumbnail"),a=r.querySelector(".meta"),l=a.querySelector("h4"),i=a.querySelector(".artist"),a=a.querySelector(".album"),l=(r.id=t.id,l.innerText=t.title,i.innerText=t.artist,a.innerText=t.album,s.dataset.src=t.src,y.load(t.src),e&&(e.src=t.thumbnail,e.alt=t.title),r.nextElementSibling.nextElementSibling);l&&l.classList.contains("acpt-audio-playlist")&&l.querySelectorAll("li").forEach(e=>{e.id===t.id?e.classList.add("active"):e.classList.remove("active")}),y.on("ready",function(){!0===q?y.play():(n.classList.remove("pause"),y.setTime(0))})})})}};