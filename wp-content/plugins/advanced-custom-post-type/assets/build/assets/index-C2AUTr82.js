import{j as s,u as l}from"./fields-Uuj9pZLj.js";import{a as d,R as x,u}from"./vendor-D21mNUGX.js";import{a as M,L as w}from"./Layout-CbPpDR-w.js";import{P as o,u as T,a as F,b,m as E,c as R,ah as P,L as _}from"./index-DW87FRXD.js";import{P as A}from"./index-DfOJf81u.js";import{f,r as L}from"./forms-AWTgcgiu.js";import{M as p}from"./index-mrXLwnSf.js";import{M as O}from"./index-Bskps18W.js";import{C}from"./index-DbbBejw-.js";import"./index-kc5wfrYu.js";const g=({browser:e})=>{const c=document.globals.globals,[a,r]=d.useState(!1);return e?s.jsxs(x.Fragment,{children:[s.jsx(p,{size:"large",title:"Browser details",visible:a,buttons:[],children:s.jsx("div",{className:"responsive",children:s.jsxs("table",{className:`acpt-table spaceless ${c.is_rtl?"rtl":""}`,children:[s.jsxs("tr",{children:[s.jsx("td",{children:s.jsx("span",{className:"text-bold color-black",children:"NAME"})}),s.jsx("td",{className:"pl-8",children:e.name})]}),s.jsxs("tr",{children:[s.jsx("td",{children:s.jsx("span",{className:"text-bold color-black",children:"PLATFORM"})}),s.jsx("td",{className:"pl-8",children:e.platform})]}),s.jsxs("tr",{children:[s.jsx("td",{children:s.jsx("span",{className:"text-bold color-black",children:"UB"})}),s.jsx("td",{className:"pl-8",children:e.ub})]}),s.jsxs("tr",{children:[s.jsx("td",{children:s.jsx("span",{className:"text-bold color-black",children:"USER AGENT"})}),s.jsx("td",{className:"pl-8",children:s.jsx("span",{className:"break-spaces",children:e.userAgent})})]}),s.jsxs("tr",{children:[s.jsx("td",{children:s.jsx("span",{className:"text-bold color-black",children:"VERSION"})}),s.jsx("td",{className:"pl-8",children:e.version})]})]})})}),s.jsx("a",{href:"#",type:"button",onClick:t=>{t.preventDefault(),r(!a)},children:e.name})]}):null};g.propTypes={browser:o.object.isRequired};const N=({data:e})=>{const c=document.globals.globals,[a,r]=d.useState(!1);return(e==null?void 0:e.length)===0?null:s.jsxs(x.Fragment,{children:[s.jsx(p,{size:"large",title:"Raw data",visible:a,buttons:[],children:s.jsx("div",{className:"responsive",children:s.jsxs("table",{className:`acpt-table spaceless ${c.is_rtl?"rtl":""}`,children:[s.jsxs("tr",{children:[s.jsx("td",{children:s.jsx("span",{className:"text-bold color-black",children:l("Name")})}),s.jsx("td",{children:s.jsx("span",{className:"text-bold color-black",children:l("Type")})}),s.jsx("td",{children:s.jsx("span",{className:"text-bold color-black",children:l("Value")})})]}),e.map((t,i)=>s.jsxs("tr",{children:[s.jsx("td",{className:"pl-8",children:t.name}),s.jsx("td",{className:"pl-8",children:s.jsx(O,{fieldType:t.type,css:"with-border b-rounded p-8"})}),s.jsx("td",{className:"pl-8",children:s.jsx("span",{className:"break-spaces",children:t.value})})]},i))]})})}),s.jsx("a",{href:"#",type:"button",onClick:t=>{t.preventDefault(),r(!a)},children:l("Show data")})]})};N.propTypes={data:o.array.isRequired};const k=({errors:e})=>{const c=document.globals.globals,[a,r]=d.useState(!1);return(e==null?void 0:e.length)===0?null:s.jsxs(x.Fragment,{children:[s.jsx(p,{size:"large",title:"Errors",visible:a,buttons:[],children:s.jsx("div",{className:"responsive",children:s.jsxs("table",{className:`acpt-table spaceless ${c.is_rtl?"rtl":""}`,children:[s.jsxs("tr",{children:[s.jsx("td",{children:s.jsx("span",{className:"text-bold color-black",children:l("Key")})}),s.jsx("td",{children:s.jsx("span",{className:"text-bold color-black",children:l("Error")})})]}),e.map((t,i)=>s.jsxs("tr",{children:[s.jsx("td",{children:t.key}),s.jsx("td",{children:t.error})]},i))]})})}),s.jsx("a",{href:"#",type:"button",onClick:t=>{t.preventDefault(),r(!a)},children:l("Show errors")})]})};k.propTypes={errors:o.array.isRequired};const v=({action:e,callback:n})=>{const[c,a]=d.useState(!1);return!e||!n?null:e===f.FILL_META?n:s.jsxs(x.Fragment,{children:[s.jsx(p,{size:"large",title:"Browser details",visible:c,buttons:[],children:s.jsx(C,{height:"250px",code:n,language:e===f.PHP?"php":"javascript",editable:!1})}),s.jsx("a",{href:"#",type:"button",onClick:r=>{r.preventDefault(),a(!c)},children:l("Show")})]})};v.propTypes={action:o.string.isRequired,callback:o.string.isRequired};const y=d.memo(({record:e})=>s.jsxs("tr",{children:[s.jsx("td",{children:e.createdAt}),s.jsx("td",{children:L(e.action)}),s.jsx("td",{children:s.jsx(v,{action:e.action,callback:e.callback})}),s.jsx("td",{children:e.ip}),s.jsx("td",{children:s.jsx(g,{browser:e.browser})}),s.jsx("td",{children:e.user&&e.uid&&s.jsx("a",{target:"_blank",href:`/wp-admin/user-edit.php?user_id=${e.uid}`,children:e.user})}),s.jsx("td",{children:s.jsx(N,{data:e.data})}),s.jsx("td",{children:s.jsx(k,{errors:e.errors})})]}));y.propTypes={record:o.object.isRequired};const K=()=>{const e=document.globals,n=e.settings,c=e.globals,{id:a}=u(),{page:r}=u(),t=T(),{data:i,loading:S}=F(h=>h.fetchFormSubmissions),m=n.length>0&&b(n,"key","records_per_page")!==""?b(n,"key","records_per_page").value:20,j=Math.ceil(i.count/m);return d.useEffect(()=>{M(),E(l("Forms list")),R("#/forms"),t(P({id:a,page:r||1,perPage:m}))},[r]),S?s.jsx(_,{}):s.jsx(w,{title:l("Form submissions"),crumbs:[{label:l("Forms list"),link:"/forms"},{label:l("Form submissions")}],children:i.records&&i.records.length>0?s.jsx("div",{className:"responsive with-shadow b-rounded",children:s.jsxs("table",{className:`acpt-table ${c.is_rtl?"rtl":""}`,children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:l("Date")}),s.jsx("th",{children:l("Action")}),s.jsx("th",{children:l("Callback")}),s.jsx("th",{children:"IP"}),s.jsx("th",{children:l("Browser")}),s.jsx("th",{children:l("User")}),s.jsx("th",{children:l("Data")}),s.jsx("th",{children:l("Errors")})]})}),s.jsx("tbody",{children:i.records&&i.records.map(h=>s.jsx(y,{record:h},h.id))}),j>1&&s.jsx("tfoot",{children:s.jsx("tr",{children:s.jsx("td",{colSpan:8,children:s.jsx(A,{currentPage:r?parseInt(r):1,totalPages:j,baseLink:`/form-submissions/${a}`})})})})]})}):s.jsx("div",{className:"p-24 bg-white with-shadow",children:s.jsx("div",{className:"b-maxi b-rounded p-24 flex-column s-12 text-center",children:s.jsx("span",{children:l("No records found.")})})})})};export{K as default};
