import{j as e,u as t,c as m}from"./fields-Uuj9pZLj.js";import{a as o,R as v}from"./vendor-D21mNUGX.js";import{P as h,B as x,s as d,w as D,r as _,A as R,u as E,a as M,m as S,c as T,aI as k,L as G}from"./index-DW87FRXD.js";import{n as j,L as f,V as P}from"./Layout-CbPpDR-w.js";import{M as b}from"./index-mrXLwnSf.js";import{C as O}from"./index-Dp7DyYVn.js";import{C as u}from"./CardRow-D0wbqPA3.js";const g=({license:s})=>{const[i,r]=o.useState(!1),[a,l]=o.useState(!1),[p,c]=o.useState(!1),w=()=>{c(!0),l(!0),D("deactivateLicenseAction",{}).then(n=>{if(l(!1),n.success===!0&&n.message){const C=n.message;j.success(t(C+" The browser will refresh after 5 seconds.")),_(5e3)}else j.error(t("An unexpected error has occurred"))}).catch(n=>{l(!1),c(!1),j.error(n)})},L=[e.jsx(x,{disabled:p,style:d.SUCCESS,onClick:n=>{n.preventDefault(),w(),r(!i)},children:t("Yes")}),e.jsx(x,{style:d.DANGER,onClick:n=>{n.preventDefault(),r(!i)},children:t("No")})];return e.jsxs(v.Fragment,{children:[e.jsx(b,{textAlign:"left",title:t("Confirm deactivating license"),visible:i,buttons:L,children:e.jsxs("div",{className:"flex-column s-8",children:[e.jsxs("div",{children:[t("Confirm deactivating license")," ",s&&s.code?s.code:null,"."]}),e.jsx("div",{children:t("Are you sure?")})]})}),e.jsx(x,{disabled:a,onClick:n=>{n.preventDefault(),r(!i)},style:d.DANGER,children:t(`${a?"Please wait":"Deactivate"}`)})]})};g.propTypes={license:h.object};const y=({license:s})=>{const r=document.globals.globals,[a,l]=o.useState(!1),p=[e.jsx(x,{style:d.DANGER,onClick:c=>{c.preventDefault(),l(!a)},children:t("Close")})];return s.licenseActivation?e.jsxs(v.Fragment,{children:[e.jsx(b,{textAlign:"left",title:m(t("details")),visible:a,buttons:p,children:e.jsx("div",{className:"responsive",children:e.jsx("table",{className:`acpt-table spaceless ${r.is_rtl?"rtl":""}`,children:e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{children:"activation_id"}),e.jsx("td",{children:s.licenseActivation&&s.licenseActivation.activation_id})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"site_name"}),e.jsx("td",{children:s.licenseActivation&&s.licenseActivation.site_name})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"site_url"}),e.jsx("td",{children:s.licenseActivation&&s.licenseActivation.site_url})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"user_id"}),e.jsx("td",{children:s.licenseActivation&&s.licenseActivation.user_id})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"ip"}),e.jsx("td",{children:s.licenseActivation&&s.licenseActivation.ip})]})]})})})}),e.jsx("a",{href:"#",onClick:c=>{c.preventDefault(),l(!a)},children:t("Show")})]}):null};y.propTypes={license:h.object.isRequired};const A=({license:s,error:i})=>{const r=()=>i||(s.code?s.code:""),a=()=>i||(s.expiring_date?s.expiring_date:t("Lifetime"));let l=[e.jsx(g,{license:s})];return e.jsx(f,{title:t("Manage your license"),actions:l,crumbs:[{label:t("My license")}],children:e.jsxs(O,{title:t("Manage your registered license key"),children:[e.jsx(u,{label:t("Plugin version"),value:e.jsx("div",{className:"i-flex-center s-8",children:e.jsx(P,{})})}),e.jsx(u,{label:t("License"),value:e.jsx("code",{className:"m-0 p-0","data-cy":"license-code",children:r()})}),e.jsx(u,{label:t("Expiration date"),value:a()}),e.jsx(u,{label:m(t("details")),value:e.jsx(y,{license:s})})]})})};A.propTypes={license:h.object.isRequired,error:h.object};const N=({link:s})=>e.jsx(f,{title:t("Activate your license"),crumbs:[{label:t("My license")}],children:e.jsxs("div",{className:"p-24 with-shadow bg-white flex-column s-24",children:[e.jsxs("div",{children:["Select your preferred method from the ",e.jsx("strong",{children:"two available"})," to activate the plugin."]}),e.jsxs("div",{className:"container",children:[e.jsx("div",{className:"col-6 with-border b-rounded",children:e.jsxs("div",{className:"p-24 flex-column s-24",children:[e.jsx("h2",{children:"Option 1"}),e.jsxs(R,{style:d.WARNING,children:["To activate the plugin you need an Internet connection and ",e.jsx("a",{href:"https://www.php.net/manual/en/book.curl.php",target:"_blank",children:"cURL"})," enabled on your website."]}),e.jsxs("div",{children:["Go directly to the ",e.jsx("a",{href:s,children:"ACPT activation page"})," and activate your license."]}),e.jsx("div",{children:e.jsx("a",{href:s,className:"acpt-btn acpt-btn-primary",children:"Activate your license now"})})]})}),e.jsx("div",{className:"col-6 with-border b-rounded",children:e.jsxs("div",{className:"p-24 flex-column s-24",children:[e.jsx("h2",{children:"Option 2"}),e.jsxs("div",{children:["Inside your ",e.jsx("pre",{className:"color-danger m-0 i-flex-center",children:"wp-config.php"})," file, add this line:"]}),e.jsxs("code",{className:"b-rounded bg-pale-gray p-12",children:["define(",e.jsx("span",{className:"color-info",children:"'ACPT_LICENSE_KEY'"}),", ",e.jsx("span",{className:"color-primary",children:"'00000000-0000-0000-0000-000000000000'"}),");"]}),e.jsx("div",{children:"Replace with the correct value and refresh this page, the plugin will automatically activate."})]})})]})]})});N.propTypes={link:h.string.isRequired};const I=()=>{const s=E(),{license:i,error:r,loading:a}=M(l=>l.fetchLicense);return o.useEffect(()=>{S(t("Manage your license")),T("#/license"),s(k())},[]),a?e.jsx(G,{}):i.is_valid?e.jsx(A,{license:i,error:r}):e.jsx(N,{link:i.activationLink})};I.propTypes={};export{I as default};
