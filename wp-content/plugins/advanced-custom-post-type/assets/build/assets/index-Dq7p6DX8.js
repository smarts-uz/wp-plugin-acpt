import{j as e,u as t}from"./fields-Uuj9pZLj.js";import{a as f,R as A,L as j,u as M}from"./vendor-D21mNUGX.js";import{s as g,n as h,D as F,a as W,f as B,L as I}from"./Layout-CbPpDR-w.js";import{P as p,u as _,B as D,s as m,cj as $,r as C,I as V,p as q,w as E,a as Y,b as P,m as U,ck as O,L as G,q as R,A as z,t as H}from"./index-DW87FRXD.js";import{B as J}from"./index-DU1xUoYR.js";import{P as K}from"./index-DfOJf81u.js";import{w as Q}from"./woocommerce_icons-C08nZ2PK.js";import{B as X}from"./index-wOQd3Bs_.js";import{W as Z}from"./index-DhpCn_eg.js";import{M as ee}from"./index-mrXLwnSf.js";import{u as te,a as se,b as oe,F as re}from"./index.esm-DCQn2FO4.js";import{B as ae}from"./index-C2f65238.js";import"./index-DRV1MUeg.js";import"./metaTypes-Bb9tjSPe.js";const v=({id:s,page:u,perPage:y})=>{const x=_(),[a,r]=f.useState(!1),c=()=>{x($(s)).then(n=>{const i=n.payload;i.success?(r(!a),g("WooCommerce product data successfully deleted"),C()):h.error(i.error)}).catch(n=>{h.error(n)})},d=[e.jsx(D,{style:m.DANGER,onClick:()=>{c()},children:t("Yes, delete it")}),e.jsx(D,{style:m.SECONDARY,onClick:()=>{r(!a)},children:t("Return back to list")})];return e.jsxs(A.Fragment,{children:[e.jsx(ee,{title:t("Delete WooCommerce product data"),buttons:d,visible:a,children:e.jsx("div",{children:t("You are going to delete WooCommerce this product data. Are you sure?")})}),e.jsx("a",{className:`color-${m.DANGER}`,href:"#",onClick:n=>{n.preventDefault(),r(!a)},children:t("Delete")})]})};v.propTypes={id:p.string.isRequired,page:p.number.isRequired,perPage:p.number.isRequired};const N=f.memo(({record:s,page:u,perPage:y})=>{const{register:x}=te(),a=`elements.${s.id}`,r=()=>{E("duplicateAction",{belongsTo:"woo_product_data",find:s.id}).then(c=>{c.success===!0?(g("WooCommerce product data successfully duplicated."),W(),C()):h.error(c.error)}).catch(c=>{console.error(c),h.error(t("Unknown error, please retry later"))})};return e.jsx(A.Fragment,{children:e.jsxs("tr",{children:[e.jsx("td",{style:{width:"24px"},children:e.jsxs("label",{className:"checkbox",htmlFor:a,children:[e.jsx("input",{type:"checkbox",id:a,name:a,defaultChecked:!1,...x(a)}),e.jsx("span",{})]})}),e.jsx("td",{children:e.jsx("span",{className:`wcicon-${typeof s.icon=="object"?s.icon.icon:Q[s.icon]}`,style:{color:"#777",fontSize:"18px"}})}),e.jsx("td",{children:s.name}),e.jsx("td",{children:e.jsx(X,{status:s.showInUI})}),e.jsx("td",{children:e.jsx(Z,{visibility:s.visibility})}),e.jsx("td",{children:s.fields.length>0?e.jsx(j,{to:`/product-data/product/fields/${s.id}`,children:t("Manage")}):e.jsx(j,{to:`/product-data/product/fields/${s.id}`,children:t("Create")})}),e.jsx("td",{children:e.jsx(F,{name:"block-menu",buttonClass:m.SECONDARY,anchor:e.jsx(V,{icon:"bx:dots-vertical-rounded",color:q(),width:24}),links:[e.jsx(j,{to:`/product-data/product/view/${s.id}`,children:t("View")}),e.jsx(j,{to:`/product-data/product/edit/${s.id}`,children:t("Edit")}),e.jsx("a",{href:"#",onClick:c=>{c.preventDefault(),r()},children:t("Duplicate")}),e.jsx(v,{id:s.id,page:u,perPage:y})]})})]})})});N.propTypes={page:p.number,perPage:p.number,record:p.object.isRequired};const ye=({})=>{const s=document.globals,u=s.settings,[y,x]=f.useReducer(o=>o+1,0),a=f.useRef(),r=se({mode:"all"});oe({control:r.control,name:"elements"});const c=_(),{data:d,loading:n}=Y(o=>o.fetchWooCommerceProductData),{page:i}=M(),k=u.length>0&&P(u,"key","records_per_page")!==""?P(u,"key","records_per_page").value:20,w=Math.ceil(d.count/k);f.useEffect(()=>{U(t("WooCommerce product data")),c(O({page:i||1,perPage:k})).then(o=>{B()})},[i]);const L=[e.jsx(J,{to:"/product-data/product/add",style:m.PRIMARY,children:t("Add product data")})],S=o=>{d.records.filter(l=>!R(l.id,"woo_product_data")).map(l=>{r.setValue(`elements.${l.id}`,o)})};document.addEventListener("restoredElement",function(){x()});const T=o=>{r.reset(),o.belongsTo="woo_product_data";const l=o.action;if(l)switch(l){case"hide":H(o);break;case"delete":case"duplicate":E("bulkActionsAction",o).then(b=>{if(b.success===!0){switch(l){case"delete":g("WooCommerce product data successfully deleted");break;case"duplicate":g("WooCommerce product data successfully duplicated");break}r.resetField("elements"),W(),C()}else h.error(b.error)}).catch(b=>{console.error(b),h.error(t("Unknown error, please retry later"))})}};return n?e.jsx(G,{}):e.jsx(re,{...r,children:e.jsx("form",{onSubmit:r.handleSubmit(T),children:e.jsxs(I,{title:t("WooCommerce product data"),actions:L,crumbs:[{label:t("Registered Custom Post Types"),link:"/"},{label:t("WooCommerce product data")}],children:[e.jsx(ae,{belongsTo:"woo_product_data"}),d.records&&d.records.length>0?e.jsx("div",{className:"responsive with-shadow b-rounded",children:e.jsxs("table",{className:`acpt-table ${s.is_rtl?"rtl":""}`,children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:{width:"24px"},children:e.jsxs("label",{className:"checkbox",htmlFor:"all",children:[e.jsx("input",{ref:a,type:"checkbox",id:"all",defaultChecked:!1,onClick:o=>{d.records.map(l=>S(o.currentTarget.checked))}}),e.jsx("span",{})]})}),e.jsx("th",{}),e.jsx("th",{children:t("Name")}),e.jsx("th",{children:t("Show on UI")}),e.jsx("th",{children:t("Visibility")}),e.jsx("th",{children:t("Fields")}),e.jsx("th",{children:t("Actions")})]})}),e.jsx("tbody",{children:d.records&&d.records.map(o=>{if(!R(o.id,"woo_product_data"))return e.jsx(N,{record:o,page:i||1,perPage:k},o.id)})}),w>1&&e.jsx("tfoot",{children:e.jsx("tr",{children:e.jsx("td",{colSpan:6,children:e.jsx(K,{currentPage:i?parseInt(i):1,totalPages:w,baseLink:"/product-data/product"})})})})]})}):e.jsxs(z,{style:m.SECONDARY,children:[t("No product data found.")," ",e.jsx(j,{to:"/product-data/product/add",children:t("Register the first one")}),"!"]})]})})})};export{ye as default};
