import{j as e,u as l,t as Ps,e as Xl,p as Ql,f as E,g as Sl,h as Cl,i as Rl,k as Zl,m as Gs,n as Us,o as Ks,q as Hs,v as sl,y as _e,w as ea,x as la,z as Ys,r as zs,A as Js,d as Ws}from"./fields-Uuj9pZLj.js";import{a as w,R as q,u as $e,j as Xs,h as Qs}from"./vendor-D21mNUGX.js";import{n as Te,b as Se,u as rl,B as aa,D as Zs,L as et,_ as gl,a as lt}from"./Layout-CbPpDR-w.js";import{P as n,u as X,B as z,s as P,aL as sa,I as L,w as xe,ac as Ke,aM as Oe,a as Q,aN as He,aO as at,aE as ye,aP as je,aQ as ol,A as tl,D as me,aR as st,i as be,J as Ee,p as El,aS as ta,aT as ul,F as qe,y as Fl,aU as dl,aV as kl,aW as Ye,aX as ia,aY as se,aZ as De,a_ as na,a$ as wl,b0 as hl,b1 as tt,b2 as it,b3 as ra,b4 as oa,M as da,b5 as Il,b6 as ze,b7 as Ol,b8 as ca,b9 as ua,ba as ql,bb as nt,bc as ha,bd as Gl,be as rt,bf as Al,bg as nl,bh as ot,bi as dt,bj as ct,bk as ut,bl as ht,bm as pt,bn as mt,bo as xt,bp as bt,bq as vt,br as ft,bs as gt,bt as jt,bu as yt,bv as Nt,bw as Tt,bx as St,by as Ct,bz as Rt,bA as Et,bB as Ft,bC as kt,bD as wt,bE as It,bF as Ot,bG as qt,bH as At,bI as Mt,bJ as Vt,bK as pl,bL as Ul,bM as pa,bN as Kl,S as Hl,bO as Yl,bP as Dt,U as _t,bQ as Bt,W as Lt,bR as $t,Y as Pt,bS as Gt,m as zl,c as Ut,L as Kt,bT as Ht,bU as Yt}from"./index-DW87FRXD.js";import{u as U,c as ue,b as V,g as Je,a as zt,F as Jt}from"./index.esm-DCQn2FO4.js";import{I as ae}from"./Input-Dag95jow.js";import{T as $}from"./index-D3iHHJgH.js";import{M as ve}from"./index-mrXLwnSf.js";import{a as We}from"./validation-dtG0NF0D.js";import{I as ge}from"./InputHidden-Sd_YdD40.js";import{d as Be,w as Le}from"./bundle.esm.min-B-HQpnrw.js";import{d as Ml,C as Wt,T as Xt}from"./Textarea-Bj5YRWIZ.js";import{u as Re}from"./index-DRV1MUeg.js";import{L as le}from"./Label-DH8FgXCw.js";import{S as W}from"./Select-Cp1uHe-V.js";import{T as jl}from"./Toggle-C4UaD4f5.js";import{B as Ie}from"./ButtonSwitch-B9KeMXNd.js";import{m as oe}from"./metaTypes-Bb9tjSPe.js";import{S as Ne}from"./SelectMulti-BMDK2H7z.js";import{u as Ae,C as Me,a as Fe}from"./sortable.esm-C-GypyhB.js";import{M as ml}from"./index-Bskps18W.js";import{C as Jl}from"./index-BY9jGxdk.js";import{S as Ce}from"./index-DuvxZwho.js";import{T as Qt,a as ll}from"./index-CTmKXGMM.js";import{F as Zt}from"./index-kc5wfrYu.js";import{p as ei}from"./posts-DQvmjIOC.js";import{P as li}from"./index-DHZeBRHg.js";import"./index-Cwt3Qm9G.js";const ma=({index:a,boxId:s,setActiveTab:u})=>{const t=X(),{control:o}=U(),{remove:i}=ue({control:o,name:"boxes"}),[d,x]=w.useState(!1),v=[e.jsx(z,{style:P.SUCCESS,onClick:r=>{r.preventDefault(),t(sa(s)),i(a),x(!d),u&&u(0)},children:l("Yes")}),e.jsx(z,{style:P.DANGER,onClick:r=>{r.preventDefault(),x(!d)},children:l("No")})];return e.jsxs(q.Fragment,{children:[e.jsx(ve,{title:l("Confirm deleting meta box"),visible:d,buttons:v,children:l("Are you sure?")}),e.jsx("a",{href:"#",onClick:r=>{r.preventDefault(),x(!d)},children:e.jsx(L,{icon:"bx-trash",width:18,color:"#F94144"})})]})};ma.propTypes={setActiveTab:n.func,index:n.number.isRequired,boxId:n.string.isRequired};const xa=({box:a})=>{const u=document.globals.globals,{setValue:t}=U(),o=X(),{id:i}=$e(),[d,x]=w.useState(!1),[v,r]=w.useState(null),[c,p]=w.useState(!1);w.useEffect(()=>{r(null),p(!1)},[d]);const T=()=>{xe("copyMetaBoxAction",{boxId:a.id,targetGroupId:v,delete:c}).then(b=>{b.success?(Te.success(`${l("Meta box was successfully copied")}.`),x(!d),i===a.groupId&&o(Ke({id:i})).then(h=>{o(Oe(h.payload)),t("id",i),t("name",h.payload.name),t("label",h.payload.label),t("display",h.payload.display),h.payload.belongs&&h.payload.belongs.map((f,m)=>{t(`belongs.${m}.id`,f.id),t(`belongs.${m}.belongsTo`,f.belongsTo),t(`belongs.${m}.operator`,f.operator),t(`belongs.${m}.find`,f.find),t(`belongs.${m}.logic`,f.logic)}),h.payload.boxes&&h.payload.boxes.map((f,m)=>{t(`boxes.${m}`,f)})}).catch(h=>{console.error(h)})):Te.error(b.error)}).catch(b=>console.error(b))};return e.jsxs(q.Fragment,{children:[e.jsx(ve,{title:l("Copy this meta box"),visible:d,buttons:[],children:e.jsxs("div",{className:"flex-column s-24",children:[e.jsxs("div",{children:[e.jsx("label",{className:"form-label i-flex-center s-4",htmlFor:"group",children:l("Meta group")}),e.jsx("div",{className:"acpt-select",children:e.jsx("select",{id:"group",className:"form-control default",onChangeCapture:b=>r(b.target.value),children:u.find.meta.map(b=>e.jsx("option",{value:b.value,children:b.label}))})})]}),v&&v!=="Select"&&e.jsxs("div",{children:[e.jsxs("div",{className:"w-100 i-flex-center s-4 mb-8",children:[e.jsx("input",{type:"checkbox",defaultValue:c,onClick:()=>p(!c),id:"deleteBox"}),e.jsx("label",{htmlFor:"deleteBox",children:l("Delete the meta box after copying")})]}),e.jsx(z,{onClick:()=>T(),style:P.PRIMARY,children:l("Copy")})]})]})}),e.jsx("a",{href:"",onClick:b=>{b.preventDefault(),x(!d)},children:e.jsx(L,{icon:"bx:copy",width:18})})]})};xa.propTypes={box:n.object.isRequired};const Xe=({element:a,elementType:s})=>{const u=X(),{selectedElements:t}=Q(d=>d.metaState),o=()=>t.filter(x=>x.id===a.id).length>0,i=d=>{u(He({element:a,selected:d,type:s})),a.children&&a.children.map(x=>{u(He({element:x,selected:d,type:s})),x.children&&x.children.map(v=>{u(He({element:v,selected:d,type:s}))})})};return e.jsx($,{label:e.jsxs("label",{className:"checkbox",htmlFor:`select-${a.id}`,style:{top:"3px"},children:[e.jsx("input",{id:`select-${a.id}`,type:"checkbox",checked:o(),onChange:d=>i(d.target.checked)}),e.jsx("span",{})]}),icon:!1,tip:l(o()?"Deselect this element":"Select this element")})};Xe.propTypes={element:n.object.isRequired,elementType:n.oneOf(["box","block","field"]).isRequired};const ba=({boxId:a,boxIndex:s,elementId:u,elementIndex:t})=>{const o=X(),i=()=>`boxes.${s}.visibilityConditions`,{control:d}=U(),{remove:x}=ue({control:d,name:i()}),[v,r]=w.useState(!1),c=[e.jsx(z,{style:P.SUCCESS,onClick:p=>{p.preventDefault(),o(at({boxId:a,elementId:u})),x(t),r(!v)},children:l("Yes")}),e.jsx(z,{style:P.DANGER,onClick:p=>{p.preventDefault(),r(!v)},children:l("No")})];return e.jsxs("div",{children:[e.jsx(ve,{title:l("Confirm deleting conditional rendering element"),visible:v,buttons:c,children:l("Are you sure?")}),e.jsx("a",{href:"#",onClick:p=>{p.preventDefault(),r(!v)},children:e.jsx($,{icon:!1,tip:l("Delete"),label:e.jsx(L,{icon:"bx-trash",width:18,color:"#F94144"})})})]})};ba.propTypes={boxId:n.string.isRequired,boxIndex:n.number.isRequired,elementId:n.string.isRequired,elementIndex:n.number.isRequired};const va=({elementIndex:a,boxIndex:s,boxId:u,element:t,isLast:o})=>{const{POST_TAX:i,POST_ID:d,USER_ID:x,optionPage:v}=document.globals.globals.find;Q(M=>M.metaState);const r=M=>`boxes.${s}.visibilityConditions.${a}.${M}`,{register:c,formState:{errors:p},control:T,setValue:b,clearErrors:h}=U(),f=V({control:T,name:"belongs"}),m=V({control:T,name:r("type")}),k=V({control:T,name:r("operator")}),F=V({control:T,name:r("value")}),A=V({control:T,name:r("logic")}),j=V({control:T,name:r("frontEnd")}),O=V({control:T,name:r("backEnd")}),[g,C]=w.useState([]);w.useEffect(()=>{f&&f.map(M=>{M.belongsTo===oe.TAXONOMY&&xe("fetchTermsAction",{taxonomy:M.find,format:"short"}).then(D=>{ye(D)&&ye(g)&&C([...g,...D])})})},[f]);const S=()=>{let M=!1,D=[],de=[{value:null,label:l("Select")}];if(f&&f.map(_=>{_.belongsTo===oe.CUSTOM_POST_TYPE&&(D.push({value:je({type:"POST_ID",value:"POST_ID"}),label:l("Post")}),M=!0),_.belongsTo===oe.TAXONOMY&&D.push({value:je({type:"TERM_ID",value:"TERM_ID"}),label:l("Term")}),_.belongsTo===oe.USER&&D.push({value:je({type:"USER_ID",value:"USER_ID"}),label:l("User")}),_.belongsTo===oe.OPTION_PAGE&&D.push({value:je({type:"OPTION_PAGE",value:"OPTION_PAGE"}),label:l("Option page")})}),D&&D.length>0&&de.push({label:l("This box"),options:D}),M&&i&&i.length>0){let _={label:l("Related taxonomies"),options:[]};i.map(K=>{K.value!==null&&_.options.push({value:je({type:"TAXONOMY",value:K.label}),label:K.label})}),de.push(_)}if(x&&x.length>0){let _={label:l("Users"),options:[{value:je({type:"USER",value:l("Logged user")}),label:l("Logged user")}]};de.push(_)}return de},R=()=>typeof m>"u",y=()=>{if(!m||typeof m>"u")return[{value:null,label:l("Select")}];const D=(typeof m=="object"?m:ol(m)).type;return D==="POST_ID"||D==="TERM_ID"||D==="USER_ID"||D==="OPTION_PAGE"||D==="TAXONOMY"||D==="USER"?[{value:null,label:l("Select")},{value:"=",label:l("is equal to")},{value:"!=",label:l("is not equal to")},{value:"IN",label:l("is included in")},{value:"NOT_IN",label:l("is not included in")}]:[{value:null,label:l("Select")},{value:"=",label:l("is equal to")},{value:"!=",label:l("is not equal to")},{value:"IN",label:l("is included in")},{value:"NOT_IN",label:l("is not included in")},{value:"BLANK",label:l("is empty")},{value:"NOT_BLANK",label:l("is not empty")}]},N=()=>m&&k&&k!=="BLANK"&&k!=="NOT_BLANK"&&k!=="CHECKED"&&k!=="NOT_CHECKED",I=()=>{let M=typeof m=="object"?m:ol(m);typeof M=="string"&&(M=JSON.parse(M));const D=M.type,de=M.value,_=k==="IN"||k==="NOT_IN",K=k==="CHECKED"||k==="NOT_CHECKED",he={value:null,label:l("Select")};if(D==="POST_ID"){const te=()=>{if(t.operator==="IN"||t.operator==="NOT_IN"){const G=F||t.value,B=typeof G=="string"?G.split(","):G;let H=[];return B.map(ce=>H.push(parseInt(ce))),H}return F||t.value};return _?e.jsx(q.Fragment,{children:e.jsx(Ne,{id:r("value"),defaultValue:te(),placeholder:l("Select posts"),values:d,errors:p,register:c,setValue:b,clearErrors:h,validate:{required:l("This field is mandatory")}})}):e.jsx(q.Fragment,{children:e.jsx(W,{id:r("value"),defaultValue:te(),placeholder:l("Select posts"),values:ye(d)?d:[],errors:p,register:c,validate:{required:l("This field is mandatory")}})})}if(D==="USER")return ye(x)&&x&&x.length>0?_?e.jsx(q.Fragment,{children:e.jsx(Ne,{id:r("value"),defaultValue:F||t.value,placeholder:l("Select users"),errors:p,register:c,values:x,setValue:b,clearErrors:h,validate:{required:l("This field is mandatory")}})}):e.jsx(q.Fragment,{children:e.jsx(W,{id:r("value"),defaultValue:F||t.value,placeholder:l("Select user"),errors:p,register:c,values:x,validate:{required:l("This field is mandatory")}})}):e.jsx(q.Fragment,{children:e.jsx(ae,{id:r("value"),errors:p,register:c,defaultValue:F||t.value,placeholder:l("value"),validate:{required:l("This field is mandatory")}})});if(D==="TAXONOMY"){if(i&&i.length>0){const te=i.filter(G=>G.label===de);if(te&&te.length===1&&te[0].options)return _?e.jsx(q.Fragment,{children:e.jsx(Ne,{id:r("value"),defaultValue:F||t.value,placeholder:l("Select taxonomies"),errors:p,register:c,values:te[0].options,setValue:b,clearErrors:h,validate:{required:l("This field is mandatory")}})}):e.jsx(q.Fragment,{children:e.jsx(W,{id:r("value"),defaultValue:F||t.value,placeholder:l("Select taxonomy"),errors:p,register:c,values:te.length>0&&te[0].options&&ye(te[0].options)?[he,...te[0].options]:[],validate:{required:l("This field is mandatory")}})})}return e.jsx(q.Fragment,{children:e.jsx(ae,{id:r("value"),errors:p,register:c,defaultValue:F||t.value,placeholder:l("value"),validate:{required:l("This field is mandatory")}})})}if(D==="TERM_ID"){const te=()=>{if(t.operator==="IN"||t.operator==="NOT_IN"){const G=F||t.value,B=typeof G=="string"?G.split(","):G;let H=[];return B.map(ce=>H.push(parseInt(ce))),H}return F||t.value};return _?e.jsx(q.Fragment,{children:e.jsx(Ne,{id:r("value"),defaultValue:te(),placeholder:l("Select taxonomies"),errors:p,register:c,values:g,setValue:b,clearErrors:h,validate:{required:l("This field is mandatory")}})}):e.jsx(q.Fragment,{children:e.jsx(W,{id:r("value"),defaultValue:te(),placeholder:l("Select taxonomy"),errors:p,register:c,values:ye(g)?[he,...g]:[],validate:{required:l("This field is mandatory")}})})}if(D==="OPTION_PAGE"){const te=()=>{if(t.operator==="IN"||t.operator==="NOT_IN"){const G=F||t.value;return typeof G=="string"?G.split(","):G}return F||t.value};return _?e.jsx(q.Fragment,{children:e.jsx(Ne,{id:r("value"),defaultValue:te(),placeholder:l("Select pages"),errors:p,register:c,values:v,setValue:b,clearErrors:h,validate:{required:l("This field is mandatory")}})}):e.jsx(q.Fragment,{children:e.jsx(W,{id:r("value"),defaultValue:te(),placeholder:l("Select page"),errors:p,register:c,values:ye(v)?v:[],validate:{required:l("This field is mandatory")}})})}if(D==="USER_ID"){const te=()=>{if(t.operator==="IN"||t.operator==="NOT_IN"){const G=F||t.value;return typeof G=="string"?G.split(","):G}return F||t.value};return _?e.jsx(q.Fragment,{children:e.jsx(Ne,{id:r("value"),defaultValue:te(),placeholder:l("Select users"),errors:p,register:c,values:x,setValue:b,clearErrors:h,validate:{required:l("This field is mandatory")}})}):e.jsx(q.Fragment,{children:e.jsx(W,{id:r("value"),defaultValue:te(),placeholder:l("Select user"),errors:p,register:c,values:ye(x)?[he,...x]:[],validate:{required:l("This field is mandatory")}})})}return K?e.jsx(q.Fragment,{children:e.jsx(ae,{id:r("value"),disabled:!0,register:c,errors:p,placeholder:`${_?l("Insert values separated by comma. Ex: 12, 54, foo"):l("value")}`,defaultValue:F||t.value})}):e.jsx(q.Fragment,{children:e.jsx(ae,{id:r("value"),register:c,errors:p,placeholder:`${_?l("Insert values separated by comma. Ex: 12, 54, foo"):l("value")}`,defaultValue:F||t.value,validate:{required:l("This field is mandatory")}})})};return e.jsxs("div",{className:"i-flex-center s-8 w-100",children:[e.jsx(ge,{id:r("id"),value:t.id,register:c}),e.jsx("div",{className:"w-60",children:e.jsx(W,{id:r("type"),placeholder:l("Select option"),register:c,values:S(),errors:p,defaultValue:m||je(t.type),validate:{required:l("This field is mandatory")}})}),e.jsx("div",{className:"w-40",children:e.jsx(W,{id:r("operator"),placeholder:l("Select option"),register:c,disabled:R(),values:y(),errors:p,defaultValue:m||t.operator,validate:{required:l("This field is mandatory")}})}),e.jsx("div",{className:"w-100",children:N()?I():e.jsx(ae,{id:r("value"),placeholder:l("Value"),register:c,errors:p,value:"",defaultValue:F||t.value,disabled:!0})}),e.jsx("div",{className:"w-20",children:!o&&e.jsx(q.Fragment,{children:e.jsx(W,{id:r("logic"),placeholder:l("Select option"),register:c,values:[{label:l("AND"),value:"AND"},{label:l("OR"),value:"OR"}],errors:p,defaultValue:A||t.logic,validate:{required:l("This field is mandatory")}})})}),e.jsxs("div",{className:"i-flex-center s-8",children:[e.jsx($,{label:e.jsx(Ie,{id:r("frontEnd"),control:T,defaultValue:typeof j=="boolean"?j:t.frontEnd,errors:p,icon:"bx:devices",disabled:!N()}),tip:l("Show in Front-End"),icon:!1}),e.jsx($,{label:e.jsx(Ie,{id:r("backEnd"),control:T,defaultValue:typeof O=="boolean"?O:t.backEnd,errors:p,icon:"bx:cog",disabled:!N()}),tip:l("Show in Back-End"),icon:!1})]}),e.jsx(ba,{boxId:u,boxIndex:s,elementId:t.id,elementIndex:a})]})};va.propTypes={elementIndex:n.number.isRequired,boxIndex:n.number.isRequired,boxId:n.string.isRequired,element:n.object.isRequired,isLast:n.bool.isRequired};const fa=({box:a,boxIndex:s})=>{const u=X(),[t]=Re(),o=()=>{const i={id:me(),type:null,operator:"=",value:"",logic:null,frontEnd:!0,backEnd:!0};u(st({boxId:a.id,element:i}))};return e.jsxs("div",{children:[e.jsx("h3",{className:"mb-12",children:Ps(l("CONDITIONAL LOGIC"))}),e.jsxs("div",{ref:t,className:a.visibilityConditions&&a.visibilityConditions.length>0?"flex-column s-24":"",children:[a.visibilityConditions&&a.visibilityConditions.length>0?e.jsx(q.Fragment,{children:a.visibilityConditions.map((i,d)=>e.jsx(va,{elementIndex:d,boxIndex:s,boxId:a.id,element:i,isLast:d===a.visibilityConditions.length-1},i.id))}):e.jsx(tl,{style:P.WARNING,children:l('No conditions are present, click on "Add condition" button to add the first one.')}),e.jsx("span",{children:e.jsx("a",{href:"#",className:a.visibilityConditions&&a.visibilityConditions.length>0?"":"mt-12",onClick:i=>{i.preventDefault(),o()},children:l("Add condition")})})]})]})};fa.propTypes={box:n.object.isRequired,boxIndex:n.number.isRequired};const ga=({index:a,box:s})=>{var u,t,o,i;const d=T=>`boxes.${a}.settings[0].${T}`,{register:x,formState:{errors:v},control:r}=U(),c=V({control:r,name:"context"}),p=V({control:r,name:"priority"});return e.jsxs("div",{className:"flex-column s-24 p-24 pt-0",children:[e.jsxs("div",{className:"container",children:[e.jsxs("div",{className:"col-3",children:[e.jsx(le,{id:d("context"),label:l("Context")}),e.jsx(W,{id:d("context"),register:x,errors:v,values:Xl,defaultValue:!be(s)&&(u=s.settings)!==null&&u!==void 0&&u.context?s.settings.context:c||"advanced"})]}),e.jsxs("div",{className:"col-3",children:[e.jsx(le,{id:d("priority"),label:l("Priority")}),e.jsx(W,{id:d("priority"),register:x,errors:v,values:Ql,defaultValue:!be(s)&&(t=s.settings)!==null&&t!==void 0&&t.priority?s.settings.priority:p||"default"})]}),e.jsxs("div",{className:"col-3",children:[e.jsx(le,{id:d("hide_title"),label:l("Hide title")}),e.jsx(jl,{id:d("hide_title"),register:x,errors:v,defaultValue:!be(s)&&(o=s.settings)!==null&&o!==void 0&&o.hide_title?s.settings.hide_title:!1})]}),e.jsxs("div",{className:"col-3",children:[e.jsx(le,{id:d("hide_toggle"),label:l("Hide toggle visibility")}),e.jsx(jl,{id:d("hide_toggle"),register:x,errors:v,defaultValue:!be(s)&&(i=s.settings)!==null&&i!==void 0&&i.hide_toggle?s.settings.hide_toggle:!1})]})]}),e.jsx(fa,{box:s,boxIndex:a})]})};ga.propTypes={index:n.number.isRequired,box:n.object.isRequired};const ja=({index:a,box:s,listeners:u,attributes:t,setActiveTab:o,bulkEdit:i=!1})=>{const d=B=>`boxes.${a}.${B}`,[x]=Re(),{register:v,formState:{errors:r},control:c,setValue:p,resetField:T,clearErrors:b,setError:h}=U(),f=V({control:c,name:d("name")}),m=V({control:c,name:d("label")}),k=V({control:c,name:`boxes.${a}`}),F=V({control:c,name:"boxes"}),{append:A}=ue({control:c,name:"boxes"}),j=X(),{closedElements:O,selectedElementsType:g}=Q(B=>B.metaState),C=()=>O.filter(H=>H===s.id).length===1,[S,R]=w.useState(!1),[y,N]=w.useState(!1),[I,M]=w.useState(!0),D=()=>{const B=d("name"),H=Je(r,B);return H?e.jsx("span",{className:"invalid-feedback",children:l(H.message)}):f||s.name},de=()=>typeof m=="string"?m:s.label,_=async B=>{if(I){const H=Be(Le(B));p(d("name"),H),await K(H)?h(d("name"),{message:l("Name is already taken")}):b(d("name"))}},K=async B=>{let H=[];if(F&&F.map((ce,Y)=>{Y!==a&&H.push(ce.name)}),H.includes(B))return l("Name is already taken");if(s.name!==B&&(await xe("checkMetaBoxNameAction",{boxName:B})).exists===!0)return l("Name is already taken")},he=()=>{Fl(s.id),C()?j(dl({id:s.id})):j(kl({id:s.id}))},te=()=>!(typeof s.isSaved<"u"&&s.isSaved===!1),G=()=>{const B=me(),H={id:B,boxId:s.id,name:"meta_box_field",label:"meta box field",type:E.TEXT,defaultValue:"",description:"",isRequired:!1,showInArchive:!1,quickEdit:!1,filterableInAdmin:!1,sort:1,advancedOptions:[],options:[],blocks:[],blockId:null,validationRules:[],visibilityConditions:[],hasManyRelation:[],children:[],parentId:null,isATextualField:!0,isFilterable:!0,isSaved:!1};j(Ye({boxId:s.id,parentFieldId:null,parentBlockId:null,field:H})),qe(1).then(()=>{Se(`${B}`)})};return e.jsxs(q.Fragment,{children:[e.jsxs("div",{className:"flex-between p-24 s-8 for-xs",children:[e.jsx(ge,{id:d("id"),value:s.id,register:v}),e.jsxs("span",{className:"i-flex-center s-8",children:[e.jsx("span",{className:"cursor-move top-2 handle",...t,...u,children:e.jsx(L,{icon:"bx:dots-vertical-rounded",color:Ee(),width:18})}),g!=="field"&&g!=="block"&&te()&&e.jsx(Xe,{elementType:"box",element:{id:s.id}}),e.jsx("h3",{className:`${!y&&!i?"":"hidden"}`,children:D()}),e.jsx("span",{className:`color-gray ${!y&&!i?"":"hidden"}`,children:de()}),e.jsxs("div",{className:`i-flex-center s-8 ${y||i?"":"hidden"}`,children:[e.jsx("div",{children:e.jsx(ae,{size:"sm",id:d("label"),placeholder:l("Box label, non latin chars allowed."),defaultValue:s.name,register:v,errors:r,required:!0,onChangeCapture:Ml(B=>{_(B.target.value)},300),onClick:B=>{(B.target.value==="meta_box_title"||B.target.value==="meta box title")&&T(d("label"))},validate:{maxLength:{value:255,message:"max length is 255"}}})}),e.jsx("div",{children:e.jsx(ae,{size:"sm",id:d("name"),placeholder:l("Box name. Allowed chars: [a-z0-9_-]"),defaultValue:s.name,register:v,errors:r,required:!0,onClick:B=>{B.target.value==="meta_box_title"&&T(d("name"))},validate:{validate:{alphanumericallyValid:We,checkIfNameIsValid:K},required:l("This field is mandatory"),maxLength:{value:255,message:"max length is 255"}}})}),e.jsx($,{label:e.jsx("span",{className:`acpt-btn-switch ${I===!0?"active":""}`,onClick:B=>{B.preventDefault(),M(!I)},children:e.jsx(L,{icon:"bx-link",width:18})}),tip:l(`${I?"Auto slug ON":"Auto slug OFF"}`),icon:!1})]}),e.jsx(z,{style:P.SECONDARY,size:"sm",onClick:B=>{B.preventDefault(),N(!y)},children:l(`${y||i?"Close":"Edit"}`)}),e.jsx($,{label:e.jsx("a",{href:"#",title:"Box settings",className:"top-2",onClick:B=>{B.preventDefault(),R(!S)},children:e.jsx(L,{icon:"bx:cog",width:24,color:El()})}),tip:l("Box settings"),icon:!1})]}),e.jsxs("span",{className:"i-flex-center s-8 mt-8-for-xs",children:[e.jsx($,{label:e.jsx("a",{href:"#",onClick:B=>{B.preventDefault();const H=ta(k);j(ul(H)),A(H),qe(1).then(()=>{Se(H.id)})},children:e.jsx(L,{icon:"bx:duplicate",width:18})}),tip:l("Duplicate this meta box"),icon:!1}),te()&&e.jsx(q.Fragment,{children:e.jsx($,{label:e.jsx(xa,{box:s}),tip:l("Copy this meta box"),icon:!1})}),e.jsx($,{label:e.jsx(ma,{index:a,setActiveTab:o,boxId:s.id}),tip:l("Delete this meta box"),icon:!1}),e.jsx($,{label:e.jsx("a",{href:"#",onClick:B=>{B.preventDefault(),G()},children:e.jsx(L,{icon:"bx:plus-circle",width:18})}),tip:l("Add field"),icon:!1}),e.jsx($,{label:e.jsx("a",{href:"#",onClick:B=>{B.preventDefault(),he()},children:e.jsx(L,{icon:"bx:expand-alt",width:18})}),tip:l("Hide/show this meta box"),icon:!1})]})]}),e.jsx("div",{ref:x,children:S&&e.jsx(ga,{box:s,index:a})})]})};ja.propTypes={index:n.number.isRequired,box:n.object.isRequired,setActiveTab:n.func,attributes:n.object,listeners:n.object,bulkEdit:n.bool};const ya=({field:a})=>{const u=document.globals.globals,{setValue:t}=U(),o=X(),{id:i}=$e(),[d,x]=w.useState(!1),[v,r]=w.useState(null),[c,p]=w.useState([]),[T,b]=w.useState([]),[h,f]=w.useState([]),[m,k]=w.useState(null),[F,A]=w.useState(null),[j,O]=w.useState(!1);w.useEffect(()=>{r(null),p([]),b([]),f([]),k(null),A(null),O(!1)},[d]);const g=N=>{r(N),p([]),b([]),f([]),k(null),A(null),O(!1),xe("fetchMetaAction",{id:N}).then(I=>{p(I.boxes)}).catch(I=>console.error(I))},C=N=>{b([]),f([]),k("box"),A(N);const I=c.filter(M=>M.id===N)[0].fields;if(I&&I.length>0){const M=I.filter(D=>D.type===E.REPEATER||D.type===E.FLEXIBLE);M&&M.length>0&&b(M)}},S=N=>{k("field"),A(N);const I=T.filter(M=>M.id===N)[0].blocks;I&&I.length>0&&f(I)},R=N=>{k("block"),A(N)},y=()=>{xe("copyMetaFieldAction",{fieldId:a.id,targetEntityType:m,targetEntityId:F,delete:j}).then(N=>{N.success?(Te.success(`${l("Meta field was successfully copied")}.`),x(!d),i===a.groupId&&o(Ke({id:i})).then(I=>{o(Oe(I.payload)),t("id",i),t("name",I.payload.name),t("label",I.payload.label),t("display",I.payload.display),I.payload.belongs&&I.payload.belongs.map((M,D)=>{t(`belongs.${D}.id`,M.id),t(`belongs.${D}.belongsTo`,M.belongsTo),t(`belongs.${D}.operator`,M.operator),t(`belongs.${D}.find`,M.find),t(`belongs.${D}.logic`,M.logic)}),I.payload.boxes&&I.payload.boxes.map((M,D)=>{t(`boxes.${D}`,M)})}).catch(I=>{Te.error(`${l("Something went wrong, please retry.")}`)})):Te.error(N.error)}).catch(N=>{Te.error(`${l("Something went wrong, please retry.")}`)})};return e.jsxs(q.Fragment,{children:[e.jsx(ve,{title:l("Copy this meta field"),visible:d,buttons:[],children:e.jsxs("div",{className:"flex-column s-24",children:[e.jsxs("div",{children:[e.jsx("label",{className:"form-label i-flex-center s-4",htmlFor:"group",children:l("Meta group")}),e.jsx("div",{className:"acpt-select",children:e.jsx("select",{id:"group",className:"form-control default",onChangeCapture:N=>g(N.target.value),children:u.find.meta.map(N=>e.jsx("option",{value:N.value,children:N.label}))})})]}),c&&c.length>0&&e.jsxs("div",{children:[e.jsx("label",{className:"form-label i-flex-center s-4",htmlFor:"box",children:l("Meta box")}),e.jsx("div",{className:"acpt-select",children:e.jsxs("select",{id:"box",className:"form-control default",onChangeCapture:N=>C(N.target.value),children:[e.jsx("option",{value:null,children:l("Select")}),c.map(N=>e.jsx("option",{value:N.id,children:N.name}))]})})]}),T&&T.length>0&&e.jsxs("div",{children:[e.jsx("label",{className:"form-label i-flex-center s-4",htmlFor:"field",children:l("Meta field")}),e.jsx("div",{className:"acpt-select",children:e.jsxs("select",{id:"field",className:"form-control default",onChangeCapture:N=>S(N.target.value),children:[e.jsx("option",{value:null,children:l("Select")}),T.map(N=>e.jsx("option",{value:N.id,children:N.name}))]})})]}),h&&h.length>0&&e.jsxs("div",{children:[e.jsx("label",{className:"form-label i-flex-center s-4",htmlFor:"field",children:l("Meta block")}),e.jsx("div",{className:"acpt-select",children:e.jsxs("select",{id:"block",className:"form-control default",onChangeCapture:N=>R(N.target.value),children:[e.jsx("option",{value:null,children:l("Select")}),h.map(N=>e.jsx("option",{value:N.id,children:N.name}))]})})]}),m&&F&&e.jsxs("div",{children:[e.jsxs("div",{className:"w-100 i-flex-center s-4 mb-8",children:[e.jsx("input",{type:"checkbox",defaultValue:j,onClick:()=>O(!j),id:"deleteField"}),e.jsx("label",{htmlFor:"deleteField",children:l("Delete the meta field after copying")})]}),e.jsx(z,{onClick:()=>y(),style:P.PRIMARY,children:l("Copy")})]})]})}),e.jsx("a",{href:"#",onClick:N=>{N.preventDefault(),x(!d)},children:e.jsx(L,{icon:"bx:copy",width:18})})]})};ya.propTypes={field:n.object.isRequired};const Na=({boxId:a,fieldId:s,fieldIndex:u,parentFieldId:t,parentBlockId:o,setActiveTab:i})=>{const d=X(),{group:x}=Q(h=>h.metaState),v=()=>se(x.boxes,a,s,!1),[r,c]=w.useState(!1),{control:p}=U(),{remove:T}=ue({control:p,name:v()}),b=[e.jsx(z,{style:P.SUCCESS,onClick:h=>{h.preventDefault(),d(ia({boxId:a,parentFieldId:t,parentBlockId:o,fieldId:s})),T(u),c(!r),i&&i(0)},children:l("Yes")}),e.jsx(z,{style:P.DANGER,onClick:h=>{h.preventDefault(),c(!r)},children:l("No")})];return e.jsxs(q.Fragment,{children:[e.jsx(ve,{title:l("Confirm deleting meta field"),visible:r,buttons:b,children:l("Are you sure?")}),e.jsx("a",{href:"#",onClick:h=>{h.preventDefault(),c(!r)},children:e.jsx(L,{icon:"bx-trash",width:18,color:"#F94144"})})]})};Na.propTypes={setActiveTab:n.func,boxId:n.string.isRequired,fieldId:n.string.isRequired,fieldIndex:n.number.isRequired,parentFieldId:n.string,parentBlockId:n.string};const Ta=({boxId:a,field:s,parentFieldId:u,parentBlockId:t})=>{const{group:o}=Q(y=>y.metaState),i=o.boxes.findIndex(y=>y.id===a),d=se(o.boxes,a,s.id),x=d.split("."),[v,r]=w.useState(!1),[c,p]=w.useState([]),[T,b]=w.useState(null),[h,f]=w.useState(!1),{control:m}=U(),k=V({control:m,name:"belongs"}),F=V({control:m,name:`boxes.${i}.name`}),A=V({control:m,name:d}),j=V({control:m,name:`boxes.${i}.fields.${x[3]}.name`});let O=null,g=null,C=x[x.length-1],S=t?x[x.length-3]:null;t&&(O=V({control:m,name:se(o.boxes,a,t)})),u&&(g=V({control:m,name:se(o.boxes,a,u)})),w.useEffect(()=>{h&&(r(!0),xe("calculateShortCodeAction",{belongsTo:k,boxName:F,fieldId:s.id,fieldName:A?A.name:s.name,fieldRootName:j,parentBlockName:O?O.name:null,parentFieldName:g?g.name:null,index:C,blockIndexInfo:S}).then(y=>{b(y.metaKey),p(y.shortcodes),r(!1)}).catch(y=>{console.error(y.message),r(!1)}))},[h]);const R=[e.jsx(z,{style:P.DANGER,onClick:y=>{y.preventDefault(),f(!h)},children:l("Close")})];return e.jsxs(q.Fragment,{children:[e.jsx(ve,{title:l("Shortcode preview"),visible:h,padding:0,buttons:R,children:v?e.jsx("div",{className:"b-bottom-1 p-24",children:l("Loading...")}):e.jsxs(q.Fragment,{children:[T&&e.jsxs("div",{className:"b-bottom-1 p-24",children:[e.jsx("div",{className:"mb-8 color-black",children:e.jsx($,{label:l("Meta-key"),tip:e.jsxs("div",{className:"flex-column s-4",children:[e.jsx("div",{children:l("This is the meta-key of this field.")}),e.jsx("div",{children:l("Use it in functions like get_post_meta() to retrieve saved meta field data.")}),e.jsxs("div",{children:[l("Prepend the option page slug to retrieve option page meta fields."),e.jsx("br",{}),"Example: page-slug_",T]})]})})}),e.jsx(Jl,{text:T})]}),c&&c.length>0&&e.jsxs("div",{className:"p-24",children:[e.jsx("div",{className:"mb-8 color-black",children:e.jsx($,{label:c&&c.length>1?l("Shortcodes"):l("Shortcode"),tip:l("Use this shortcode to display the meta field on your frontend.")})}),c&&e.jsx("div",{className:"flex-column s-8",children:c.map(y=>e.jsx(Jl,{text:y}))})]})]})}),e.jsx("a",{href:"#",onClick:y=>{y.preventDefault(),f(!h)},children:e.jsx(L,{icon:"bx:code-alt",width:18})})]})};Ta.propTypes={boxId:n.string.isRequired,field:n.object.isRequired,parentFieldId:n.string,parentBlockId:n.string};const Vl=({boxIndex:a,fieldIndex:s,boxId:u,field:t,parentFieldIndex:o,parentFieldId:i,parentBlockId:d,bulkEdit:x=!1})=>{const v=X(),{group:r,closedElements:c}=Q(g=>g.metaState),{formState:{errors:p},control:T}=U(),b=V({control:T,name:se(r.boxes,u,t.id)}),h=V({control:T,name:De(r.boxes,u,t.id,"type")}),{append:f}=ue({control:T,name:se(r.boxes,u,t.id,!1)}),m=()=>h||t.type,k=()=>m()!==E.REPEATER&&m()!==E.FLEXIBLE,F=()=>c.filter(C=>C===t.id).length===1,A=()=>{Fl(t.id),F()?v(dl({id:t.id})):v(kl({id:t.id}))},j=()=>{const g=me(),C={id:g,boxId:u,name:"meta_box_field",label:"meta box field",type:E.TEXT,defaultValue:"",description:"",isRequired:!1,showInArchive:!1,quickEdit:!1,filterableInAdmin:!1,sort:1,advancedOptions:[],options:[],blocks:[],blockId:null,validationRules:[],visibilityConditions:[],hasManyRelation:[],children:[],parentId:t.id,isATextualField:!0,isFilterable:!0,isSaved:!1};v(Ye({boxId:u,parentFieldId:t.id,parentBlockId:null,field:C})),qe(1).then(()=>{Se(`${g}`)})},O=()=>{const g=me(),C={id:g,boxId:u,fieldId:t.id,label:"new-block",name:"new_block",fields:[],isSaved:!1};v(hl({boxId:u,parentFieldId:t.id,block:C})),qe(1).then(()=>{Se(`${g}`)})};return e.jsxs("span",{className:"i-flex-center s-8",children:[k()&&e.jsx($,{label:e.jsx(Ta,{boxId:u,field:t,parentFieldId:i,parentBlockId:d}),tip:l("Show the shortcode"),icon:!1}),e.jsx($,{label:e.jsx("a",{href:"#",onClick:g=>{g.preventDefault();const C=na(u,b,i,d);v(Ye({boxId:u,field:C,parentFieldId:i,parentBlockId:d})),f(C),qe(1).then(()=>{Se(C.id)})},children:e.jsx(L,{icon:"bx:duplicate",width:18})}),tip:l("Duplicate this meta field"),icon:!1}),wl(t.isSaved)&&e.jsx($,{label:e.jsx(ya,{field:t}),tip:l("Copy this meta field"),icon:!1}),e.jsx($,{label:e.jsx(Na,{boxId:u,fieldId:t.id,fieldIndex:s,parentFieldId:i,parentBlockId:d}),tip:l("Delete this meta field"),icon:!1}),Sl(m())&&e.jsx($,{label:e.jsx("a",{href:"#",onClick:g=>{g.preventDefault(),j()},children:e.jsx(L,{icon:"bx:plus-circle",width:18})}),tip:l("Add field"),icon:!1}),Cl(m())&&e.jsx($,{label:e.jsx("a",{href:"#",onClick:g=>{g.preventDefault(),O()},children:e.jsx(L,{icon:"bx:plus-circle",width:18})}),tip:l("Add block"),icon:!1}),!x&&e.jsx($,{label:e.jsx("a",{href:"#",onClick:g=>{g.preventDefault(),A()},children:e.jsx(L,{icon:"bx:expand-alt",width:18})}),tip:l("Hide/show this meta field"),icon:!1})]})};Vl.propTypes={bulkEdit:n.bool,boxIndex:n.number.isRequired,fieldIndex:n.number.isRequired,boxId:n.string.isRequired,field:n.object.isRequired,parentFieldIndex:n.string,parentFieldId:n.string,parentBlockId:n.string};const Dl=({boxId:a,field:s})=>{const{group:u}=Q(f=>f.metaState),{formState:{errors:t},register:o,control:i}=U(),d=f=>`${se(u.boxes,a,s.id)}.${f}`,x=V({control:i,name:d("type")}),v=V({control:i,name:d("showInArchive")}),r=V({control:i,name:d("filterableInAdmin")}),c=V({control:i,name:d("quickEdit")}),p=V({control:i,name:d("isRequired")}),T=()=>x||s.type,b=()=>T()!==E.CLONE&&T()!==E.REPEATER&&T()!==E.FLEXIBLE&&T()!==E.LIST,h=()=>s.parentId||s.blockId;return e.jsxs("div",{className:"i-flex-center s-4",children:[e.jsx($,{label:e.jsx(Ie,{id:d("showInArchive"),control:i,defaultValue:typeof v=="boolean"?v:s.showInArchive,errors:t,icon:"bxl:wordpress"}),tip:l("Show in Wordpress admin post lists page"),icon:!1}),b()&&e.jsxs(q.Fragment,{children:[!h()&&e.jsxs(q.Fragment,{children:[tt(s.type)&&e.jsx($,{label:e.jsx(Ie,{control:i,defaultValue:typeof r=="boolean"?r:s.filterableInAdmin,errors:t,icon:"bx:filter",id:d("filterableInAdmin")}),tip:l("Filterable in Wordpress admin post lists page"),icon:!1}),it(s.type)&&e.jsx($,{label:e.jsx(Ie,{control:i,defaultValue:typeof c=="boolean"?c:s.quickEdit,errors:t,icon:"bx:pencil",id:d("quickEdit")}),tip:l("Quick edit in Wordpress admin post lists page"),icon:!1})]}),e.jsx($,{label:e.jsx(q.Fragment,{children:e.jsx(Ie,{control:i,defaultValue:typeof p=="boolean"?p:s.isRequired,errors:t,icon:"foundation:asterisk",id:d("isRequired")})}),tip:l("Field required"),icon:!1})]})]})};Dl.propTypes={boxId:n.string.isRequired,field:n.object.isRequired};const _l=({boxId:a,field:s,parentFieldId:u,parentBlockId:t})=>{const{group:o}=Q(v=>v.metaState),{formState:{errors:i},register:d}=U(),x=v=>De(o.boxes,a,s.id,v);return e.jsxs(q.Fragment,{children:[e.jsx(ge,{id:x("id"),value:s.id,register:d}),e.jsx(ge,{id:x("parentId"),value:u||"",register:d}),e.jsx(ge,{id:x("blockId"),value:t||"",register:d})]})};_l.propTypes={boxId:n.string.isRequired,field:n.object.isRequired,parentFieldId:n.string,parentBlockId:n.string};const Sa=({boxId:a,parentFieldId:s,blockId:u,blockIndex:t})=>{const o=X(),{group:i}=Q(T=>T.metaState),d=()=>se(i.boxes,a,u,!1),[x,v]=w.useState(!1),{control:r}=U(),{remove:c}=ue({control:r,name:d()}),p=[e.jsx(z,{style:P.SUCCESS,onClick:T=>{T.preventDefault(),o(ra({boxId:a,parentFieldId:s,blockId:u})),c(t),v(!x)},children:l("Yes")}),e.jsx(z,{style:P.DANGER,onClick:T=>{T.preventDefault(),v(!x)},children:l("No")})];return e.jsxs(q.Fragment,{children:[e.jsx(ve,{title:l("Confirm deleting block"),visible:x,buttons:p,children:l("Are you sure?")}),e.jsx("a",{href:"#",onClick:T=>{T.preventDefault(),v(!x)},children:e.jsx(L,{icon:"bx-trash",width:18,color:"#F94144"})})]})};Sa.propTypes={boxId:n.string.isRequired,parentFieldId:n.string.isRequired,blockId:n.string.isRequired};const Ca=({block:a})=>{const u=document.globals.globals,{setValue:t}=U(),o=X(),{id:i}=$e(),[d,x]=w.useState(!1),[v,r]=w.useState(null),[c,p]=w.useState([]),[T,b]=w.useState([]),[h,f]=w.useState(null),[m,k]=w.useState(!1);w.useEffect(()=>{r(null),p([]),b([]),f(null),k(!1)},[d]);const F=g=>{r(g),p([]),b([]),f(null),k(!1),xe("fetchMetaAction",{id:g}).then(C=>{p(C.boxes)}).catch(C=>console.error(C))},A=g=>{b([]);const C=c.filter(S=>S.id===g)[0].fields;b(C)},j=g=>{f(g)},O=()=>{xe("copyMetaBlockAction",{blockId:a.id,targetFieldId:h,delete:m}).then(g=>{g.success?(Te.success(`${l("Meta block was successfully copied")}.`),x(!d),i===a.groupId&&o(Ke({id:i})).then(C=>{o(Oe(C.payload)),t("id",i),t("name",C.payload.name),t("label",C.payload.label),t("display",C.payload.display),C.payload.belongs&&C.payload.belongs.map((S,R)=>{t(`belongs.${R}.id`,S.id),t(`belongs.${R}.belongsTo`,S.belongsTo),t(`belongs.${R}.operator`,S.operator),t(`belongs.${R}.find`,S.find),t(`belongs.${R}.logic`,S.logic)}),C.payload.boxes&&C.payload.boxes.map((S,R)=>{t(`boxes.${R}`,S)})}).catch(C=>{console.error(C)})):Te.error(g.error)}).catch(g=>console.error(g))};return e.jsxs(q.Fragment,{children:[e.jsx(ve,{title:l("Copy this meta block"),visible:d,buttons:[],children:e.jsxs("div",{className:"flex-column s-24",children:[e.jsxs("div",{children:[e.jsx("label",{className:"form-label i-flex-center s-4",htmlFor:"group",children:l("Meta group")}),e.jsx("div",{className:"acpt-select",children:e.jsx("select",{id:"group",className:"form-control default",onChangeCapture:g=>F(g.target.value),children:u.find.meta.map(g=>e.jsx("option",{value:g.value,children:g.label}))})})]}),c&&c.length>0&&e.jsxs("div",{children:[e.jsx("label",{className:"form-label i-flex-center s-4",htmlFor:"box",children:l("Meta box")}),e.jsx("div",{className:"acpt-select",children:e.jsxs("select",{id:"box",className:"form-control default",onChangeCapture:g=>A(g.target.value),children:[e.jsx("option",{value:null,children:l("Select")}),c.map(g=>e.jsx("option",{value:g.id,children:g.name}))]})})]}),T&&T.length>0&&e.jsxs("div",{children:[e.jsx("label",{className:"form-label i-flex-center s-4",htmlFor:"field",children:l("Meta field")}),e.jsx("div",{className:"acpt-select",children:e.jsxs("select",{id:"field",className:"form-control default",onChangeCapture:g=>j(g.target.value),children:[e.jsx("option",{value:null,children:l("Select")}),T.map(g=>e.jsx("option",{value:g.id,children:g.name}))]})})]}),h&&e.jsxs("div",{children:[e.jsxs("div",{className:"w-100 i-flex-center s-4 mb-8",children:[e.jsx("input",{type:"checkbox",defaultValue:m,onClick:()=>k(!m),id:"deleteBlock"}),e.jsx("label",{htmlFor:"deleteBlock",children:l("Delete the meta block after copying")})]}),e.jsx(z,{onClick:()=>O(),style:P.PRIMARY,children:l("Copy")})]})]})}),e.jsx("a",{href:"#",onClick:g=>{g.preventDefault(),x(!d)},children:e.jsx(L,{icon:"bx:copy",width:18})})]})};Ca.propTypes={block:n.object.isRequired};const Bl=({boxId:a,block:s,blockIndex:u,parentFieldId:t,bulkEdit:o=!1})=>{const{group:i,closedElements:d}=Q(f=>f.metaState),{formState:{errors:x},control:v}=U(),r=V({control:v,name:se(i.boxes,a,s.id)}),c=()=>d.filter(m=>m===s.id).length===1,p=X(),T=()=>{Fl(s.id),c()?p(dl({id:s.id})):p(kl({id:s.id}))},b=()=>{const f=me(),m={id:f,boxId:a,name:"meta_box_field",label:"meta box field",type:E.TEXT,defaultValue:"",description:"",isRequired:!1,showInArchive:!1,quickEdit:!1,filterableInAdmin:!1,sort:1,advancedOptions:[],options:[],blocks:[],blockId:s.id,validationRules:[],visibilityConditions:[],hasManyRelation:[],children:[],parentId:null,isATextualField:!0,isFilterable:!0,isSaved:!1};p(Ye({boxId:a,parentFieldId:null,parentBlockId:s.id,field:m})),p(dl({id:s.id})),qe(1).then(()=>{Se(`${f}`)})},h=()=>!(typeof s.isSaved<"u"&&s.isSaved===!1);return e.jsxs("span",{className:"i-flex-center s-8",children:[e.jsx($,{label:e.jsx("a",{href:"#",onClick:f=>{f.preventDefault();const m=oa(a,t,r);p(hl({boxId:a,parentFieldId:t,block:m})),qe(1).then(()=>{Se(m.id)})},children:e.jsx(L,{icon:"bx:duplicate",width:18})}),tip:l("Duplicate this block"),icon:!1}),h()&&e.jsx($,{label:e.jsx(Ca,{block:s}),tip:l("Copy this meta block"),icon:!1}),e.jsx($,{label:e.jsx(Sa,{boxId:a,blockId:s.id,blockIndex:u,parentFieldId:t}),tip:l("Delete this block"),icon:!1}),e.jsx($,{label:e.jsx("a",{href:"#",onClick:f=>{f.preventDefault(),b()},children:e.jsx(L,{icon:"bx:plus-circle",width:18})}),tip:l("Add field"),icon:!1}),!o&&e.jsx($,{label:e.jsx("a",{href:"#",onClick:f=>{f.preventDefault(),T()},children:e.jsx(L,{icon:"bx:expand-alt",width:18})}),tip:l("Hide/show this block"),icon:!1})]})};Bl.propTypes={bulkEdit:n.bool,blockIndex:n.number.isRequired,boxId:n.string.isRequired,parentFieldId:n.string,block:n.object.isRequired};const cl=({boxId:a,block:s,listeners:u,attributes:t,formId:o,boxIndex:i,blockIndex:d,parentFieldIndex:x,parentFieldId:v})=>{const{group:r,closedElements:c,selectedElementsType:p}=Q(y=>y.metaState),{formState:{errors:T},register:b,control:h,resetField:f,setValue:m}=U();V({control:h,name:se(r.boxes,a,s.id)});const k=V({control:h,name:o("name")}),F=V({control:h,name:o("label")}),[A,j]=w.useState(!0),O=()=>{const y=o("name"),N=Je(T,y);return N?e.jsx("span",{className:"invalid-feedback",children:l(N.message)}):k||s.name},g=()=>F||s.label;X();const[C,S]=w.useState(!1),R=()=>!(typeof s.isSaved<"u"&&s.isSaved===!1);return e.jsxs("div",{className:"flex-between s-8 for-xs",children:[e.jsx(ge,{id:o("id"),value:s.id,register:b}),e.jsxs("span",{className:"i-flex-center s-8",children:[e.jsx($,{label:e.jsx(L,{icon:"hugeicons:blockchain-01",color:"#A972CA",width:18}),tip:l("Child block"),icon:!1}),e.jsx("span",{className:"cursor-move top-2 handle",...t,...u,children:e.jsx(L,{icon:"bx:dots-vertical-rounded",color:Ee(),width:18})}),p!=="box"&&p!=="field"&&R()&&e.jsx(Xe,{elementType:"block",element:{id:s.id,boxId:a,parentFieldId:v}}),e.jsx("h3",{className:`${C?"hidden":""}`,children:O()}),e.jsx("span",{className:`color-gray ${C?"hidden":""}`,children:g()}),e.jsxs("div",{className:`i-flex-center s-8 ${C?"":"hidden"}`,children:[e.jsx("div",{children:e.jsx(ae,{size:"sm",id:o("label"),placeholder:l("Block label, non latin chars allowed."),defaultValue:s.label,register:b,errors:T,onChangeCapture:y=>{A&&m(o("name"),Be(Le(y.target.value)))},onClick:y=>{y.target.value==="new-block"&&f(o("label"))},validate:{maxLength:{value:255,message:"max length is 255"}}})}),e.jsx("div",{children:e.jsx(ae,{size:"sm",id:o("name"),placeholder:l("Block name. Allowed chars: [a-z0-9_-]"),defaultValue:s.name,register:b,errors:T,required:!0,onClick:y=>{y.target.value==="new_block"&&f(o("name"))},validate:{validate:We,required:l("This field is mandatory"),maxLength:{value:255,message:"max length is 255"}}})}),e.jsx($,{label:e.jsx("span",{className:`acpt-btn-switch ${A===!0?"active":""}`,onClick:y=>{y.preventDefault(),j(!A)},children:e.jsx(L,{icon:"bx-link",width:18})}),tip:l(`${A?"Auto slug ON":"Auto slug OFF"}`),icon:!1})]}),e.jsx(z,{style:P.SECONDARY,size:"sm",onClick:y=>{y.preventDefault(),S(!C)},children:l(`${C?"Close":"Edit"}`)})]}),e.jsx(Bl,{blockIndex:d,boxId:a,parentFieldId:v,block:s})]})};cl.propTypes={boxIndex:n.number.isRequired,blockIndex:n.number.isRequired,formId:n.func.isRequired,boxId:n.string.isRequired,parentFieldIndex:n.string,parentFieldId:n.string,block:n.object.isRequired,attributes:n.object,listeners:n.object};const Ra=({blockIndex:a,block:s,boxIndex:u,boxId:t,parentFieldIndex:o,parentFieldId:i,isMainView:d})=>{const{attributes:x,listeners:v,setNodeRef:r,isDragging:c,transform:p}=Ae({id:s.id}),T={transform:Me.Translate.toString(p)},{group:b,closedElements:h}=Q(O=>O.metaState),f=()=>h.filter(g=>g===s.id).length===1,m=O=>`${se(b.boxes,t,s.id)}.${O}`,F=0<Rl.MAX_NESTING,A=()=>f()?"hidden":"mt-24",j={background:da()};return d?e.jsx("tr",{id:s.id,className:`bg-white ${c?"b-rounded z-100 with-drop-shadow":""}`,ref:r,style:T,children:e.jsxs("td",{style:j,className:"with-active-border",colSpan:7,children:[e.jsx(cl,{formId:m,boxIndex:u,attributes:x,listeners:v,boxId:t,block:s,blockIndex:a,parentFieldId:i}),e.jsx("div",{className:A(),children:e.jsx(al,{addFieldEnabled:F,boxIndex:u,boxId:t,parentFieldIndex:o,parentFieldId:i,parentBlockId:s.id,fields:s.fields})})]})}):e.jsxs("div",{id:s.id,className:`bg-white b-rounded with-active-border p-24 ${c?"z-100 with-drop-shadow":"with-shadow"}`,ref:r,style:{...T,...j},children:[e.jsx(cl,{formId:m,boxIndex:u,attributes:x,listeners:v,boxId:t,block:s,blockIndex:a,parentFieldId:i}),e.jsx("div",{className:A(),children:e.jsx(al,{addFieldEnabled:F,boxIndex:u,boxId:t,parentFieldIndex:o,parentFieldId:i,parentBlockId:s.id,fields:s.fields})})]})};Ra.propTypes={isMainView:n.bool,blockIndex:n.number.isRequired,block:n.object.isRequired,boxId:n.string.isRequired,boxIndex:n.string.isRequired,parentFieldIndex:n.number.isRequired,parentFieldId:n.string.isRequired};const yl=({blockIndex:a,block:s,boxIndex:u,boxId:t,parentFieldIndex:o,parentFieldId:i,isMainView:d,bulkEdit:x=!1})=>{const{attributes:v,listeners:r,setNodeRef:c,isDragging:p,transform:T}=Ae({id:s.id}),b={transform:Me.Translate.toString(T)},{group:h,closedElements:f,selectedElementsType:m}=Q(re=>re.metaState),k=X(),F=Il(h.boxes,t,s.id),{formState:{errors:A},register:j,control:O,resetField:g,setValue:C}=U(),S=re=>`${se(h.boxes,t,s.id)}.${re}`;V({control:O,name:se(h.boxes,t,s.id)});const R=V({control:O,name:S("name")}),y=V({control:O,name:S("label")}),{move:N}=ue({control:O,name:S("fields")}),I=()=>{const re=S("name"),pe=Je(A,re);return pe?e.jsx("span",{className:"invalid-feedback",children:l(pe.message)}):R||s.name},M=()=>y||s.label,[D,de]=w.useState(!0),[_,K]=w.useState(!1),[he,te]=w.useState(!1),[G,B]=w.useState(!1),H=w.useRef(),ce=w.useRef();rl([H,ce],()=>{K(!1),te(!1),B(!1)});const Y=re=>{const{active:pe,over:il}=re;if(pe.id===il.id)return;const Qe=s.fields,Pe=Qe.findIndex(Ze=>Ze.id===pe.id),ke=Qe.findIndex(Ze=>Ze.id===il.id),vl=Fe(Qe,Pe,ke);N(Pe,ke),k(ze({boxId:t,parentFieldId:null,parentBlockId:s.id,sortedFields:vl}))},J=()=>{if(!d||!F||F===0)return null;let re="#a972ca";switch(F){case 1:return"#a972ca";case 2:return"#875ba2";case 3:return"#654479";default:case 4:return"#553965"}return re},ie=()=>!(typeof s.isSaved<"u"&&s.isSaved===!1);if(d){var ne,fe;return e.jsxs(q.Fragment,{children:[e.jsx(ge,{id:S("id"),value:s.id,register:j}),e.jsxs("tr",{id:s.id,ref:c,style:b,className:`bg-white b-rounded ${p?"z-100 with-drop-shadow":""}`,children:[e.jsx("td",{style:{borderLeft:`5px solid ${J()}`},children:e.jsxs("div",{className:"i-flex-center s-8",children:[e.jsx($,{label:e.jsx(L,{icon:"hugeicons:blockchain-01",color:J(),width:18}),tip:l("Child block"),icon:!1}),e.jsx("span",{className:"cursor-move handle top-2",...v,...r,children:e.jsx(L,{icon:"bx:dots-vertical-rounded",color:Ee(),width:18})}),m!=="box"&&m!=="field"&&ie()&&e.jsx(Xe,{elementType:"block",element:{id:s.id,boxId:t,parentFieldId:i}})]})}),e.jsx("td",{children:_||x?e.jsxs("div",{ref:H,className:"w-100 i-flex-center s-8",children:[e.jsx(ae,{size:"sm",id:S("label"),placeholder:l("Block label, non latin chars allowed."),defaultValue:s.label,register:j,errors:A,onChangeCapture:re=>{D&&C(S("name"),Be(Le(re.target.value)))},onClick:re=>{re.target.value==="new-block"&&g(S("label"))},validate:{maxLength:{value:255,message:"max length is 255"}}}),e.jsx($,{label:e.jsx("span",{className:`acpt-btn-switch ${D===!0?"active":""}`,onClick:re=>{re.preventDefault(),de(!D)},children:e.jsx(L,{icon:"bx-link",width:18})}),tip:l(`${D?"Auto slug ON":"Auto slug OFF"}`),icon:!1})]}):e.jsx("div",{className:"cursor-pointer",onClick:()=>{window.innerWidth>=960&&(K(!_),te(!he),B(!1))},children:M()})}),e.jsx("td",{className:"hidden-xs",children:_||x?e.jsx("div",{ref:ce,children:e.jsx(ae,{size:"sm",id:S("name"),placeholder:l("Block name. Allowed chars: [a-z0-9_-]"),defaultValue:s.name,register:j,errors:A,required:!0,onClick:re=>{re.target.value==="new_block"&&g(S("name"))},validate:{validate:We,required:l("This field is mandatory"),maxLength:{value:255,message:"max length is 255"}}})}):e.jsx("div",{className:"text-bold color-black cursor-pointer",onClick:()=>{window.innerWidth>=960&&(K(!_),B(!G),te(!1))},children:I()})}),e.jsx("td",{}),e.jsx("td",{}),e.jsx("td",{children:e.jsx(Bl,{bulkEdit:x,blockIndex:a,boxId:t,parentFieldId:i,block:s})})]}),s.fields&&((ne=s.fields)===null||ne===void 0?void 0:ne.length)>0&&e.jsx(Ce,{onDragEnd:Y,items:s.fields,children:e.jsx(q.Fragment,{children:s.fields&&((fe=s.fields)===null||fe===void 0?void 0:fe.length)>0&&s.fields.map((re,pe)=>e.jsx(xl,{bulkEdit:x,isMainView:!0,boxIndex:u,fieldIndex:pe,boxId:t,field:re,parentBlockId:s.id}))})})]})}return e.jsx("div",{id:s.id,className:`bg-white b-rounded with-shadow p-24 ${p?"z-100 with-drop-shadow":""}`,ref:c,style:b,children:e.jsx(cl,{formId:S,boxIndex:u,attributes:v,listeners:r,boxId:t,block:s,blockIndex:a,parentFieldId:i})})};yl.propTypes={bulkEdit:n.bool,isMainView:n.bool,blockIndex:n.number.isRequired,block:n.object.isRequired,boxId:n.string.isRequired,boxIndex:n.string.isRequired,parentFieldIndex:n.number.isRequired,parentFieldId:n.string.isRequired};const Ll=({blockIndex:a,block:s,boxIndex:u,boxId:t,parentFieldIndex:o,parentFieldId:i,isMainView:d,bulkEdit:x=!1})=>{const{closedElements:v}=Q(c=>c.metaState),r=()=>{const c=v.filter(p=>p===s.id);return typeof c>"u"?!1:c.length>0};return x?e.jsx(yl,{bulkEdit:x,isMainView:d,blockIndex:a,block:s,boxIndex:u,boxId:t,parentFieldIndex:o,parentFieldId:i}):r()?e.jsx(yl,{bulkEdit:x,isMainView:d,blockIndex:a,block:s,boxIndex:u,boxId:t,parentFieldIndex:o,parentFieldId:i}):e.jsx(Ra,{isMainView:d,blockIndex:a,block:s,boxIndex:u,boxId:t,parentFieldIndex:o,parentFieldId:i})};Ll.propTypes={bulkEdit:n.bool,isMainView:n.bool,blockIndex:n.number.isRequired,block:n.object.isRequired,boxId:n.string.isRequired,boxIndex:n.string.isRequired,parentFieldIndex:n.number.isRequired,parentFieldId:n.string.isRequired};const Nl=({boxIndex:a,fieldIndex:s,boxId:u,field:t,parentFieldIndex:o,parentFieldId:i,parentBlockId:d,isMainView:x,bulkEdit:v=!1})=>{const{attributes:r,listeners:c,setNodeRef:p,isDragging:T,transform:b}=Ae({id:t.id}),h={transform:Me.Translate.toString(b)},f=X(),{group:m,selectedElementsType:k}=Q(ee=>ee.metaState),{formState:{errors:F},register:A,unregister:j,resetField:O,setError:g,clearErrors:C,setValue:S,control:R}=U(),{move:y}=ue({control:R,name:`${se(m.boxes,u,t.id)}.children`}),{move:N}=ue({control:R,name:`${se(m.boxes,u,t.id)}.blocks`}),[I,M]=w.useState(!0),[D,de]=w.useState(!1),[_,K]=w.useState(!1),[he,te]=w.useState(!1),[G,B]=w.useState(!1),H=w.useRef(),ce=w.useRef(),Y=w.useRef();rl([H],()=>{K(!1)}),rl([ce,Y],()=>{de(!1),te(!1),B(!1)});const J=ee=>De(m.boxes,u,t.id,ee),ie=V({control:R,name:`boxes.${a}.fields`}),ne=V({control:R,name:`boxes.${a}.name`}),fe=V({control:R,name:J("name")}),re=V({control:R,name:J("label")}),pe=V({control:R,name:J("type")}),il=()=>{const ee=J("name"),Z=Je(F,ee);return Z?e.jsx("span",{className:"invalid-feedback",children:l(Z.message)}):fe||t.name},Qe=()=>typeof re=="string"?re:t.label,Pe=()=>pe||t.type,ke=Il(m.boxes,u,t.id),vl=ee=>{if(Pe()!==ee){const Z={...t};Z.type=ee,ee!==E.REPEATER&&(Z.children=[]),ee!==E.FLEXIBLE&&(Z.blocks=[]),ee!==E.POST&&(Z.relations=[]),ca(ee)||(j(J("relations")),j(J("visibilityConditions")),j(J("validationRules")),Z.visibilityConditions=[],Z.validationRules=[],Z.relations=[]),j(J("relations")),j(J("blocks")),j(J("children")),Z.children||(Z.children=[]),Z.blocks||(Z.blocks=[]),Z.relations||(Z.relations=[]),Z.visibilityConditions||(Z.visibilityConditions=[]),Z.validationRules||(Z.validationRules=[]),f(ua({field:Z,boxId:u}))}},Ze=async ee=>{if(I){const Z=Be(Le(ee));S(J("name"),Z),await $l(Z)?g(J("name"),{message:l("Name is already taken")}):C(J("name"))}},$l=async ee=>{const Z=Be(Le(ee));let Ve=[];if(ie.map((we,Ge)=>{Ge!==s&&Ve.push(we.name)}),Ve.includes(Z))return l("Name is already taken");if(t.name!==Z&&(await xe("checkMetaBoxFieldNameAction",{boxName:ne||t.boxName,fieldName:Z})).exists===!0)return l("Name is already taken")},Bs=ee=>{const{active:Z,over:Ve}=ee;if(Z.id===Ve.id)return;const we=t.blocks,Ge=we.findIndex(Ue=>Ue.id===Z.id),el=we.findIndex(Ue=>Ue.id===Ve.id),fl=Fe(we,Ge,el);N(Ge,el),f(ql({boxId:u,parentFieldId:t.id,sortedBlocks:fl}))},Ls=ee=>{const{active:Z,over:Ve}=ee;if(Z.id===Ve.id)return;const we=t.children,Ge=we.findIndex(Ue=>Ue.id===Z.id),el=we.findIndex(Ue=>Ue.id===Ve.id),fl=Fe(we,Ge,el);y(Ge,el),f(ze({boxId:u,parentFieldId:t.id,parentBlockId:null,sortedFields:fl}))},Pl=()=>{if(!x||!ke||ke===0)return null;let ee="#02C39A";switch(ke){case 1:return"#02C39A";case 2:return"#029c7b";case 3:return"#01755c";default:case 4:return"#01624d"}return ee},$s=()=>x?!ke||ke<2?24:24*ke:null;return e.jsxs(q.Fragment,{children:[e.jsx(_l,{boxId:u,field:t,parentFieldId:i,parentBlockId:d}),e.jsxs("tr",{id:t.id,ref:p,style:h,className:`bg-white b-rounded ${T?"z-100 with-drop-shadow":""}`,children:[e.jsx("td",{style:{borderLeft:`5px solid ${Pl()}`,paddingLeft:`${$s()}px`},children:e.jsxs("div",{className:"i-flex-center s-8",children:[(i||d)&&e.jsx($,{label:e.jsx(L,{icon:"tabler:arrow-guide",color:Pl(),width:18}),tip:l("Child field"),icon:!1}),e.jsx("span",{className:"cursor-move handle top-2",...r,...c,children:e.jsx(L,{icon:"bx:dots-vertical-rounded",color:Ee(),width:18})}),k!=="box"&&k!=="block"&&wl(t.isSaved)&&e.jsx(Xe,{elementType:"field",element:Ol(t,u,i,d)})]})}),e.jsx("td",{className:"hidden-xs",children:D||v?e.jsxs("div",{ref:ce,className:"w-100 i-flex-center s-8",children:[e.jsx(ae,{id:J("label"),register:A,errors:F,autoFocus:he,defaultValue:t.label,placeholder:l("The field label, non latin characters are allowed"),onChangeCapture:Ml(ee=>{Ze(ee.target.value)},300),onClick:ee=>{ee.target.value==="meta box field"&&O(J("label"))},validate:{maxLength:{value:255,message:"max length is 255"}}}),e.jsx($,{label:e.jsx("span",{className:`acpt-btn-switch ${I===!0?"active":""}`,onClick:ee=>{ee.preventDefault(),M(!I)},children:e.jsx(L,{icon:"bx-link",width:18})}),tip:l(`${I?"Auto slug ON":"Auto slug OFF"}`),icon:!1})]}):e.jsx("div",{className:"cursor-pointer",onClick:()=>{window.innerWidth>=960&&(de(!D),te(!he),B(!1))},children:Qe()})}),e.jsx("td",{children:D||v?e.jsx("div",{ref:Y,children:e.jsx(ae,{id:J("name"),register:A,errors:F,autoFocus:G,placeholder:l("Field slug (Ex. gallery or text_1)"),defaultValue:t.name,onClick:ee=>{ee.target.value==="meta_box_field"&&O(J("name"))},validate:{validate:{alphanumericallyValid:We,checkIfNameIsValid:$l},required:l("This field is mandatory"),maxLength:{value:255,message:"max length is 255"}}})}):e.jsx("div",{className:"text-bold color-black cursor-pointer",onClick:()=>{window.innerWidth>=960&&(de(!D),B(!G),te(!1))},children:il()})}),e.jsx("td",{className:"hidden-xs",children:e.jsx(Dl,{field:t,boxId:u})}),e.jsx("td",{children:_||v?e.jsx("div",{ref:H,style:{maxWidth:"200px"},children:e.jsx(W,{register:A,id:J("type"),errors:F,defaultValue:t.type,values:Zl(ke),onChangeCapture:ee=>{vl(ee.target.value)}})}):e.jsxs("div",{className:"i-flex-center s-8 cursor-pointer",onClick:()=>{window.innerWidth>=960&&K(!_)},children:[e.jsx(ml,{fieldType:Pe(),css:"with-border b-rounded p-8"}),pe===E.REPEATER&&t.children&&t.children.length>0&&e.jsx("span",{className:"px-8 py-4 font-sm bg-light-gray text-normal b-rounded",children:t.children.length}),pe===E.FLEXIBLE&&t.blocks&&t.blocks.length>0&&e.jsx("span",{className:"px-8 py-4 font-sm bg-light-gray text-normal b-rounded",children:t.blocks.length})]})}),e.jsx("td",{children:e.jsx(Vl,{bulkEdit:v,boxIndex:a,field:t,boxId:u,fieldIndex:s,parentFieldIndex:o,parentFieldId:i,parentBlockId:d})})]}),Sl(Pe())&&t.children&&e.jsx(Ce,{onDragEnd:Ls,items:t.children,children:e.jsx(q.Fragment,{children:t.children&&t.children.length>0&&t.children.map((ee,Z)=>e.jsx(xl,{bulkEdit:v,isMainView:!0,boxIndex:a,fieldIndex:Z,boxId:u,field:ee,parentFieldIndex:s,parentFieldId:t.id}))})}),Cl(Pe())&&t.blocks&&e.jsx(Ce,{onDragEnd:Bs,items:t.blocks,children:e.jsx(q.Fragment,{children:t.blocks&&t.blocks.length>0&&t.blocks.map((ee,Z)=>e.jsx(Ll,{bulkEdit:v,isMainView:!0,blockIndex:Z,block:ee,boxIndex:a,boxId:u,parentFieldIndex:o,parentFieldId:t.id}))})})]})};Nl.propTypes={boxIndex:n.number.isRequired,fieldIndex:n.number.isRequired,boxId:n.string.isRequired,field:n.object.isRequired,parentFieldIndex:n.string,parentFieldId:n.string,parentBlockId:n.string,bulkEdit:n.bool};const Ea=({boxId:a,fieldId:s,optionId:u,parentFieldId:t,optionIndex:o})=>{const i=X(),{group:d}=Q(b=>b.metaState),x=()=>`${se(d.boxes,a,s)}.options`,[v,r]=w.useState(!1),{control:c}=U(),{remove:p}=ue({control:c,name:x()}),T=[e.jsx(z,{style:P.SUCCESS,onClick:b=>{b.preventDefault(),i(nt({boxId:a,fieldId:s,parentFieldId:t,optionId:u})),p(o),r(!v)},children:l("Yes")}),e.jsx(z,{style:P.DANGER,onClick:b=>{b.preventDefault(),r(!v)},children:l("No")})];return e.jsxs("span",{children:[e.jsx(ve,{title:l("Confirm deleting option"),visible:v,buttons:T,children:l("Are you sure?")}),e.jsx("a",{href:"#",onClick:b=>{b.preventDefault(),r(!v)},children:e.jsx($,{icon:!1,tip:l("Delete"),label:e.jsx(L,{icon:"bx-trash",width:18,color:"#F94144"})})})]})};Ea.propTypes={boxId:n.string.isRequired,fieldId:n.string.isRequired,parentFieldId:n.string,optionId:n.string.isRequired,optionIndex:n.number.isRequired};const Fa=({index:a,boxIndex:s,fieldIndex:u,boxId:t,fieldId:o,parentFieldId:i,option:d,handleIsDefault:x})=>{const{group:v}=Q(M=>M.metaState),r=M=>i?`${se(v.boxes,t,o)}.options.${a}.${M}`:`boxes.${s}.fields.${u}.options.${a}.${M}`,{register:c,formState:{errors:p},control:T,setValue:b,resetField:h}=U(),f=V({control:T,name:r("value")}),m=V({control:T,name:r("label")}),k=V({control:T,name:r("isDefault")}),{attributes:F,listeners:A,setNodeRef:j,isDragging:O,transform:g}=Ae({id:d.id}),C={transform:Me.Translate.toString(g)},S=()=>d.label==="label"&&d.value==="value"?!0:d.label===d.value,[R,y]=w.useState(S()),N=()=>f||(d.value?d.value:null),I=()=>m||(d.label?d.label:null);return e.jsxs(q.Fragment,{children:[e.jsx(ge,{id:r("id"),value:d.id,register:c}),e.jsxs("tr",{style:C,ref:j,className:`bg-white ${O?"b-rounded z-100 with-drop-shadow":""}`,children:[e.jsx("td",{children:e.jsx("span",{className:"cursor-move top-2 handle",...F,...A,children:e.jsx(L,{icon:"bx:dots-vertical-rounded",color:Ee(),width:18})})}),e.jsx("td",{children:e.jsx(ae,{id:r("label"),register:c,errors:p,defaultValue:I(),onChangeCapture:M=>{R&&b(r("value"),M.target.value)},onClick:M=>{d.label&&M.target.value==="label"&&h(r("label"))},validate:{required:l("This field is mandatory"),maxLength:{value:255,message:"max length is 255"}}})}),e.jsx("td",{children:e.jsx(ae,{id:r("value"),register:c,errors:p,defaultValue:N(),onChangeCapture:M=>{R&&b(r("label"),M.target.value)},onClick:M=>{d.value&&M.target.value==="value"&&h(r("value"))},validate:{required:l("This field is mandatory"),maxLength:{value:255,message:"max length is 255"}}})}),e.jsx("td",{children:e.jsxs("span",{className:"i-flex-center s-8",children:[e.jsx($,{label:e.jsx("button",{type:"button",className:`acpt-btn-switch ${R?"active":""}`,onClick:M=>{M.preventDefault(),y(!R)},children:e.jsx(L,{icon:"bx:bx-link",width:"18px"})}),tip:l(R?"Label and value are linked":"Label and value are unlinked"),icon:!1}),e.jsx($,{label:e.jsx(Ie,{control:T,defaultValue:typeof k=="boolean"?k:d.isDefault,errors:p,icon:"bx:check",id:r("isDefault"),externalOnChange:x}),tip:l("Default value"),icon:!1})]})}),e.jsx("td",{children:e.jsx(Ea,{boxId:t,fieldId:o,optionId:d.id,parentFieldId:i,optionIndex:a})})]})]})};Fa.propTypes={index:n.number.isRequired,boxIndex:n.number.isRequired,fieldIndex:n.number.isRequired,boxId:n.string.isRequired,fieldId:n.string.isRequired,parentFieldId:n.string,option:n.object.isRequired,handleIsDefault:n.func};const Tl=({boxId:a,fieldId:s,parentFieldId:u})=>{const t=X(),[o,i]=w.useState(!1),[d,x]=w.useState(null),[v,r]=w.useState(null),[c,p]=w.useState(!1);w.useEffect(()=>{c&&(i(!0),xe("fetchDatasetsAction",{}).then(h=>{let f=[{value:null,label:l("Select"),items:[]}];h.records&&h.records.map(m=>{f.push({value:m.id,label:m.label?m.label:m.name,items:m.items?m.items:[]})}),x(f),i(!1)}).catch(h=>{console.error(h.message),i(!1)}))},[c]);const T=()=>{const h=d.filter(m=>m.value===v);if(h&&h.length!==1)return;h[0].items.map(m=>{const k={id:me(),boxId:a,fieldId:s,label:m.label,value:m.value,isDefault:m.isDefault};t(ha({boxId:a,fieldId:s,parentFieldId:u,option:k}))}),Te.success(l("Dataset loaded correctly")),p(!c)},b=[e.jsx(z,{style:P.PRIMARY,disabled:v===null,onClick:h=>{h.preventDefault(),T()},children:l("Load dataset")}),e.jsx(z,{style:P.DANGER,onClick:h=>{h.preventDefault(),p(!c)},children:l("Close")})];return e.jsxs(q.Fragment,{children:[e.jsx(ve,{title:l("Load dataset"),visible:c,padding:0,buttons:b,children:o?e.jsx("div",{className:"p-24",children:l("Loading...")}):e.jsx("div",{className:"p-24",children:e.jsx("select",{id:"dataset",className:"form-control default",onChangeCapture:h=>r(h.target.value),children:d&&d.map(h=>e.jsx("option",{value:h.value,children:h.label}))})})}),e.jsx("a",{href:"#",onClick:h=>{h.preventDefault(),p(!c)},children:l("Load dataset")})]})};Tl.propTypes={boxId:n.string.isRequired,fieldId:n.string.isRequired,parentFieldId:n.string.isRequired};const ka=({boxId:a,boxIndex:s,fieldIndex:u,fieldId:t,parentFieldId:o,options:i,isMulti:d})=>{const x=document.globals;x.settings;const v=x.globals,r=X(),{group:c}=Q(j=>j.metaState),[p]=Re(),T=()=>`${se(c.boxes,a,t)}.options`,{control:b,setValue:h,resetField:f}=U(),{move:m}=ue({control:b,name:T()}),k=j=>{const{active:O,over:g}=j;if(O.id===g.id)return;const C=i.findIndex(R=>R.id===O.id),S=i.findIndex(R=>R.id===g.id);m(C,S)},F=()=>{const j={id:me(),boxId:a,fieldId:t,label:"label",value:"value",isDefault:!1};r(ha({boxId:a,fieldId:t,parentFieldId:o,option:j}))},A=({id:j,checked:O})=>{if(!d)for(let g=0;g<i.length;g++){const C=T()+"."+g+".isDefault";C!==j?h(C,!1):h(C,O)}};return e.jsxs("div",{className:"mt-24",children:[e.jsx("label",{className:"form-label",children:l("Options")}),i&&i.length>0?e.jsxs("div",{className:"responsive with-shadow b-rounded",children:[e.jsxs("table",{className:`acpt-table ${v.is_rtl?"rtl":""}`,children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:{width:"10px"}}),e.jsx("th",{children:l("Label")}),e.jsx("th",{children:l("Value")}),e.jsx("th",{style:{width:"10px"}}),e.jsx("th",{style:{width:"10px"}})]})}),e.jsx("tbody",{ref:p,children:e.jsx(Ce,{onDragEnd:k,items:i,children:i&&i.map((j,O)=>e.jsx(Fa,{index:O,boxIndex:s,fieldIndex:u,boxId:a,fieldId:t,parentFieldId:o,option:j,handleIsDefault:A}))})})]}),e.jsxs("div",{className:"p-24 i-flex-center s-8",children:[e.jsx("a",{href:"#",onClick:j=>{j.preventDefault(),F()},children:l("Add option")}),e.jsx(Tl,{boxId:a,fieldId:t,parentFieldId:o})]})]}):e.jsxs("div",{className:"mt-8 b-maxi b-rounded p-24 flex-column s-12 text-center",children:[e.jsx("span",{children:l('No options already created. Create the first one now by clicking the button "Add option"!')}),e.jsxs("div",{className:"i-flex-center justify-center s-8",children:[e.jsx("a",{href:"#",onClick:j=>{j.preventDefault(),F()},children:l("Add option")}),e.jsx(Tl,{boxId:a,fieldId:t,parentFieldId:o})]})]})]})};ka.propTypes={boxId:n.string.isRequired,fieldId:n.string.isRequired,parentFieldId:n.string,boxIndex:n.number.isRequired,fieldIndex:n.number.isRequired,options:n.array.isRequired,isMulti:n.bool.isRequired};const wa=({boxId:a,boxIndex:s,parentFieldIndex:u,parentFieldId:t,childrenFields:o,nestingLevel:i})=>{const d=i<Rl.MAX_NESTING;return e.jsxs("div",{className:"mt-24",children:[e.jsx("label",{className:"form-label",children:l("Children")}),e.jsx(al,{addFieldEnabled:d,boxIndex:s,boxId:a,parentFieldIndex:u,parentFieldId:t,fields:o})]})};wa.propTypes={boxId:n.string.isRequired,parentFieldId:n.string.isRequired,boxIndex:n.number.isRequired,parentFieldIndex:n.number.isRequired,childrenFields:n.array.isRequired,nestingLevel:n.number.isRequired};const Ia=({boxIndex:a,boxId:s,blocks:u,parentFieldIndex:t,parentFieldId:o,addBlockEnabled:i=!0})=>{const d=X(),{group:x}=Q(T=>T.metaState),{control:v}=U(),{move:r}=ue({control:v,name:`${se(x.boxes,s,o)}.blocks`}),c=T=>{const{active:b,over:h}=T;if(b.id===h.id)return;const f=u.findIndex(F=>F.id===b.id),m=u.findIndex(F=>F.id===h.id),k=Fe(u,f,m);r(f,m),d(ql({boxId:s,parentFieldId:o,sortedBlocks:k}))},p=()=>{const T={id:me(),boxId:s,fieldId:o,label:"new-block",name:"new_block",fields:[],isSaved:!1};d(hl({boxId:s,parentFieldId:o,block:T}))};return e.jsx(q.Fragment,{children:u&&u.length>0?e.jsxs(q.Fragment,{children:[e.jsx("div",{className:"s-24 flex-column",children:e.jsx(Ce,{onDragEnd:c,items:u,children:u&&u.map((T,b)=>e.jsx(Ll,{parentFieldId:o,boxIndex:a,parentFieldIndex:t,blockIndex:b,boxId:s,block:T}))})}),i&&e.jsx("div",{className:"mt-24",children:e.jsx(z,{type:"button",style:P.SECONDARY,onClick:T=>{T.preventDefault(),p()},children:l("Add block")})})]}):e.jsxs("div",{className:"mt-24 b-maxi b-rounded p-24 flex-column s-12 text-center",children:[e.jsx("span",{children:l('No blocks already created. Create the first one now by clicking the button "Add block"!')}),i&&e.jsx("div",{children:e.jsx(z,{type:"button",style:P.SECONDARY,onClick:T=>{T.preventDefault(),p()},children:l("Add block")})})]})})};Ia.propTypes={boxIndex:n.number.isRequired,boxId:n.string.isRequired,blocks:n.array.isRequired,parentFieldIndex:n.string,parentFieldId:n.string,addBlockEnabled:n.bool};const Oa=({boxId:a,boxIndex:s,parentFieldIndex:u,parentFieldId:t,blocks:o,nestingLevel:i})=>{const d=i<Rl.MAX_NESTING,[x]=Re();return e.jsxs("div",{ref:x,className:"mt-24",children:[e.jsx("label",{className:"form-label",children:l("Blocks")}),e.jsx(Ia,{addBlockEnabled:d,boxIndex:s,boxId:a,parentFieldIndex:u,parentFieldId:t,blocks:o})]})};Oa.propTypes={boxId:n.string.isRequired,parentFieldId:n.string.isRequired,boxIndex:n.number.isRequired,parentFieldIndex:n.number.isRequired,blocks:n.array.isRequired,nestingLevel:n.number.isRequired};const qa="OneToOneUni",Aa="OneToOneBi",Ma="OneToManyUni",Va="OneToManyBi",Da="ManyToOneUni",_a="ManyToOneBi",Ba="ManyToManyUni",La="ManyToManyBi",ai=[{value:null,label:l("Select")},{value:qa,label:l("One to One - Unidirectional")},{value:Aa,label:l("One to One - Bidirectional")},{value:Ma,label:l("One to Many - Unidirectional")},{value:Va,label:l("One to Many - Bidirectional")},{value:Da,label:l("Many to One - Unidirectional")},{value:_a,label:l("Many to One - Bidirectional")},{value:Ba,label:l("Many to Many - Unidirectional")},{value:La,label:l("Many to Many - Bidirectional")}],si=[{value:null,label:l("Select")},{value:qa,label:l("One to One - Unidirectional")},{value:Ma,label:l("One to Many - Unidirectional")},{value:Da,label:l("Many to One - Unidirectional")},{value:Ba,label:l("Many to Many - Unidirectional")}],Wl=a=>a===Aa||a===Va||a===_a||a===La,$a=({field:a,formId:s})=>{const o=document.globals.globals.find,i=a.relations&&a.relations.length>0?a.relations[0]:null,{control:d,register:x,resetField:v,setValue:r,formState:{errors:c}}=U(),p=V({control:d,name:s("relations.0.relationship")}),T=V({control:d,name:"id"}),[b,h]=w.useState([]),[f,m]=w.useState([]),[k,F]=w.useState([]);w.useEffect(()=>{xe("fetchMetaAction",{}).then(C=>{let S=[],R=[{label:l("Select"),value:null}];C.records&&C.records.length>0&&C.records.filter(y=>y.id!==T).map(y=>{let N=[];y.boxes.map(I=>{S.push(I),N.push({label:I.UIName+" ("+y.name+")",value:I.id})}),N&&N.length>0&&R.push({label:y.name,options:N})}),h(S),m(R),i&&i.inversedBoxId&&O(i.inversedBoxId,S)}).catch(C=>console.error(C))},[]);const A=C=>{Wl(C)||(v(s("relations.0.inversedBoxId")),v(s("relations.0.inversedFieldId")))},j=(C,S)=>{r(s(`relations.0.${C}.type`),S),v(s("relations.0.relationship")),v(s("relations.0.inversedBoxId")),v(s("relations.0.inversedFieldId"))},O=(C,S)=>{let R=[{label:l("Select"),value:null}];const y=S.filter(N=>N.id===C);y&&y.length===1&&y[0].fields.map(N=>{R.push({label:N.name,value:N.id}),N.blocks&&N.blocks.length>0&&N.blocks.map(I=>{I.fields&&I.fields.length>0&&I.fields.map(M=>{R.push({label:M.name,value:M.id}),M.blocks&&M.blocks.length>0&&M.blocks.map(D=>{D.fields&&D.fields.length>0&&D.fields.map(de=>{R.push({label:de.name,value:de.id})})})})}),N.children&&N.children.length>0&&N.children.map(I=>{R.push({label:I.name,value:I.id}),I.children&&I.children.length>0&&I.children.map(M=>{R.push({label:M.name,value:M.id})})})}),F(R)};if(be(o))return null;const g=()=>{let C=[{label:l("Select"),value:null}];const S=o[oe.CUSTOM_POST_TYPE].filter(y=>y.value!==null),R=o[oe.TAXONOMY].filter(y=>y.value!==null);return S&&S.length>0&&C.push({label:l("Custom post types"),originalLabel:oe.CUSTOM_POST_TYPE,options:S}),R&&R.length>0&&C.push({label:l("Taxonomies"),originalLabel:oe.TAXONOMY,options:R}),C.push({label:l("Option pages"),originalLabel:oe.OPTION_PAGE,options:[{label:l("All pages"),value:oe.OPTION_PAGE}]}),C.push({label:l("Users"),originalLabel:oe.USER,options:[{label:l("All users"),value:oe.USER}]}),C};return e.jsxs("div",{className:"mt-24",children:[e.jsx(ge,{id:s("relations.0.relatedEntity.type"),value:a.type,register:x}),e.jsxs("fieldset",{className:"acpt-fieldset",children:[e.jsx("legend",{children:l("Related entities and relationship")}),e.jsxs("div",{className:"flex-column s-24",children:[e.jsxs("div",{className:"container align-end",children:[e.jsxs("div",{className:"col-4",children:[e.jsx("div",{className:"mb-8",children:e.jsx($,{label:e.jsx("label",{className:"form-label",htmlFor:s("relations.0.from.value"),children:l("From")}),tip:l("The first entity involved in the relationship")})}),e.jsx(W,{register:x,id:s("relations.0.from.value"),errors:c,values:g(),onChangeCapture:C=>{j("from",C.target.selectedOptions[0].parentElement.dataset.original)},validate:{required:l("This field is mandatory")}})]}),e.jsxs("div",{className:"col-4",children:[e.jsx("div",{className:"mb-8",children:e.jsx($,{label:e.jsx("label",{className:"form-label",htmlFor:s("relations.0.to.value"),children:l("To")}),tip:l("The second entity involved in the relationship")})}),e.jsx(W,{register:x,id:s("relations.0.to.value"),errors:c,values:g(),onChangeCapture:C=>{j("to",C.target.selectedOptions[0].parentElement.dataset.original)},validate:{required:l("This field is mandatory")}})]}),e.jsxs("div",{className:"col-4",children:[e.jsx("div",{className:"mb-8",children:e.jsx($,{label:e.jsx("label",{className:"form-label",htmlFor:s("relations.0.relationship"),children:l("Relationship")}),tip:l("The relationship between the selected entities")})}),e.jsx(W,{register:x,id:s("relations.0.relationship"),errors:c,values:a.parentId?si:ai,onChangeCapture:C=>{A(C.target.value)},validate:{required:l("This field is mandatory")}})]})]}),Wl(p)&&e.jsxs("div",{className:"container align-end",children:[e.jsxs("div",{className:"col-6",children:[e.jsx("div",{className:"mb-8",children:e.jsx($,{label:e.jsxs("label",{className:"form-label",htmlFor:s("relations.0.inversedBoxId"),children:[l("Target field"),". ",l("Select field box from list")]}),tip:l("The inversed field is the target post type field which is related with this one in a bidirectional relation")})}),e.jsx(W,{register:x,id:s("relations.0.inversedBoxId"),errors:c,values:f,defaultValue:i&&i.inversedBoxId?i.inversedBoxId:null,onChangeCapture:C=>{O(C.target.value,b)},validate:{required:l("This field is mandatory")}})]}),e.jsxs("div",{className:"col-6",children:[e.jsx("div",{className:"mb-8",children:e.jsx($,{label:e.jsxs("label",{className:"form-label",htmlFor:s("relations.0.inversedFieldId"),children:[l("Target field"),". ",l("Select the inversed field on target")]}),tip:l("The inversed field is the target post type field which is related with this one in a bidirectional relation")})}),e.jsx(W,{register:x,id:s("relations.0.inversedFieldId"),errors:c,values:k,defaultValue:i&&i.inversedFieldId?i.inversedFieldId:null,validate:{required:l("This field is mandatory")}})]})]})]})]})]})};$a.propTypes={formId:n.func.isRequired,field:n.object.isRequired};const Pa=({handleDeleteField:a,clonedFieldId:s,meta:u})=>{const o=(()=>{let i=null,d=null;return u.map(x=>{x.boxes&&x.boxes.map(v=>{v.fields&&v.fields.map(r=>{r.id===s&&(i=`[${v.label?v.label:v.name}] - ${r.label?r.label:r.name}`,d=r.type)})})}),{label:i,type:d}})();return e.jsxs("div",{className:"i-flex-center s-12 bg-pale-gray b-rounded p-12",children:[e.jsxs("div",{className:"i-flex-center s-4",children:[e.jsx("span",{children:o.label?o.label:"Loading..."}),o.type&&e.jsx(ml,{fieldType:o.type,css:"with-border b-rounded p-8"})]}),e.jsx($,{label:e.jsx("a",{href:"#",onClick:i=>{i.preventDefault(),a&&a(s)},children:e.jsx(L,{icon:"bx-trash",width:18,color:"#F94144"})}),tip:l("Delete this meta field"),icon:!1})]})};Pa.propTypes={meta:n.array.isRequired,handleDeleteField:n.object,clonedFieldId:n.string.isRequired};const Ga=({fields:a,meta:s,id:u})=>{const{setValue:t}=U(),o=i=>{const d=a.filter(x=>x!==i);t(u,d)};return!a||a.length===0?null:e.jsx("div",{className:"flex flex-wrap justify-center s-8",children:a&&a.length>0&&a.map(i=>e.jsx(Pa,{meta:s,clonedFieldId:i,handleDeleteField:o}))})};Ga.propTypes={id:n.string.isRequired,meta:n.array.isRequired,fields:n.array.isRequired};const Ua=({id:a,group:s,field:u,gindex:t,watchedDefaultValueObject:o})=>{const x=document.globals.globals.is_rtl,{setValue:v}=U(),r=b=>{let h=[];return b.boxes&&b.boxes.map(f=>{f.fields&&f.fields.map(m=>{m.id!==u.id&&h.push(m.id)})}),h},c=(b,h)=>{b.id&&h&&(h==="deselect"?v(a,Gl(o.filter(f=>!r(b).includes(f)))):h==="select"&&v(a,Gl([...o,...r(b)])))},p=(b,h)=>{const f=o;b?(f.push(h),v(a,f)):v(a,f.filter(m=>m!==h))},T=b=>{const h=o;return be(h)?!1:h.includes(b)};return r(s).length===0?null:e.jsxs("table",{id:s.id,className:`acpt-table with-border ${x?"rtl":""}`,children:[s.id!==null&&e.jsx("thead",{children:e.jsx("tr",{children:e.jsx("th",{style:{padding:"12px 24px"},colSpan:2,children:e.jsxs("div",{className:"flex-center flex-between s-8",children:[e.jsx("span",{children:s.name}),e.jsx("div",{children:e.jsxs("select",{className:"form-control sm",onChangeCapture:b=>{b.preventDefault();const h=b.target.value;h&&c(s,h)},children:[e.jsx("option",{value:null,children:l("Action")}),e.jsx("option",{value:"select",children:l("Select all")}),e.jsx("option",{value:"deselect",children:l("Deselect all")})]})})]})})})}),s.boxes&&s.boxes.length>0&&s.boxes.map((b,h)=>e.jsx("tbody",{children:b.fields&&b.fields.length>0&&b.fields.map((f,m)=>f.id!==u.id?e.jsx(q.Fragment,{children:e.jsxs("tr",{children:[e.jsx("td",{id:f.id,width:10,children:e.jsxs("label",{className:"checkbox",htmlFor:`${a}_${t}_${h}_${m}`,children:[e.jsx("input",{name:a,type:"checkbox",id:`${a}_${t}_${h}_${m}`,checked:T(f.id),value:f.id,onChangeCapture:k=>p(k.target.checked,f.id)}),e.jsx("span",{})]})}),e.jsx("td",{children:e.jsxs("div",{className:"i-flex-center s-4",children:[e.jsxs("label",{htmlFor:`${a}_${t}_${h}_${m}`,className:"cursor-pointer text-ellipsis",children:["[",b.label?b.label:b.name,"] - ",f.label?f.label:f.name]}),e.jsx(ml,{fieldType:f.type,css:"with-border b-rounded p-8"})]})})]})}):e.jsx("tr",{children:e.jsx("td",{colSpan:2,children:l("No boxes registered")})}))}))]})};Ua.propTypes={id:n.string.isRequired,gindex:n.number.isRequired,watchedDefaultValueObject:n.object.isRequired,field:n.object.isRequired,group:n.object.isRequired};const Ka=({id:a,field:s})=>{document.globals.globals.is_rtl;const{control:o,getValues:i}=U(),[d,x]=w.useState(!1),[v,r]=w.useState([]),[c,p]=w.useState(!1),T=V({control:o,name:a}),b=()=>{if(T){if(typeof T=="object")return T;try{return JSON.parse(T)}catch{try{return JSON.parse(`["${T}"]`)}catch{return[]}}}return[]};w.useEffect(()=>{h()},[]),w.useEffect(()=>{d===!0&&h()},[d]);const h=()=>{p(!0),xe("fetchMetaAction",{page:1,perPage:999}).then(m=>{let k=[];m.records&&m.records.length>0&&(k=m.records);const F=i();k&&k.length>0&&k.map((A,j)=>{F.id===A.id&&(k[j]=F)}),r(k),p(!1)}).catch(m=>{console.error(m),p(!1)})},f=[e.jsx(z,{style:P.DANGER,onClick:m=>{m.preventDefault(),x(!d)},children:l("Close")})];return e.jsxs(q.Fragment,{children:[e.jsx(ve,{title:l("Select fields to clone"),visible:d,buttons:f,children:e.jsx(q.Fragment,{children:c?e.jsx("div",{className:"p-24 text-center",children:"Loading..."}):e.jsx(q.Fragment,{children:v&&v.length>0?e.jsx("div",{className:"flex-column s-24",children:e.jsx("div",{className:"flex-column s-24",style:{maxHeight:"450px",overflowY:"auto",overflowX:"hidden",padding:"0 12px"},children:v.map((m,k)=>e.jsx(Ua,{group:m,field:s,id:a,gindex:k,watchedDefaultValueObject:b()}))})}):e.jsx(tl,{style:P.SECONDARY,children:l("No fields registered.")})})})}),e.jsxs("fieldset",{className:"acpt-fieldset",children:[e.jsx("legend",{children:l("Fields to clone")}),e.jsxs("div",{style:{alignItems:"center"},className:"flex-column s-24",children:[c?e.jsx("div",{children:"Loading..."}):e.jsx(q.Fragment,{children:b()&&typeof b()=="object"&&b().length>0&&e.jsx(Ga,{fields:b(),meta:v,id:a})}),e.jsx("a",{style:{margin:"auto"},className:"acpt-btn acpt-btn acpt-btn-secondary",href:"#",onClick:m=>{m.preventDefault(),x(!d)},children:e.jsxs("div",{className:"i-flex-center s-4",children:[e.jsx(L,{icon:"bx:bx-copy-alt",width:18}),e.jsx("span",{children:l("Select fields to clone")})]})})]})]})]})};Ka.propTypes={field:n.object.isRequired};const Ha=({formId:a,field:s})=>{const{register:u,control:t,formState:{errors:o},setValue:i,clearErrors:d}=U(),x=V({control:t,name:a("advancedOptions")});V({control:t,name:a("defaultValue")});const r=Gs(s.defaultValue)?JSON.parse(s.defaultValue):s.defaultValue,[c,p]=w.useState(r&&r.from?r.from:null),[T,b]=w.useState(r&&r.to?r.to:null),[h,f]=w.useState(r&&r.url?r.url:null),[m,k]=w.useState(r&&r.urlLabel?r.urlLabel:null),[F,A]=w.useState(r&&r.currencyValue?r.currencyValue:null),[j,O]=w.useState(r&&r.currency?r.currency:null),[g,C]=w.useState(r&&r.length?r.length:null),[S,R]=w.useState(r&&r.lengthValue?r.lengthValue:null),[y,N]=w.useState(r&&r.weight?r.weight:null),[I,M]=w.useState(r&&r.weightValue?r.weightValue:null),D=[E.ICON,E.TABLE,E.REPEATER,E.FLEXIBLE,E.PASSWORD,E.POST,E.SELECT_MULTI,E.SELECT,E.RADIO,E.CHECKBOX,E.FILE,E.IMAGE,E.AUDIO,E.AUDIO_MULTI,E.GALLERY,E.VIDEO],de=(_,K)=>_?e.jsx("div",{className:"container align-end",children:e.jsxs("div",{className:"col-12",children:[e.jsx(le,{id:a("defaultValue"),label:l("The default value for this field")}),e.jsx(Ne,{id:a("defaultValue"),register:u,errors:o,placeholder:l("Default value"),defaultValue:typeof r=="object"?r:null,values:K,clearErrors:d,setValue:i})]})}):e.jsx("div",{className:"container align-end",children:e.jsxs("div",{className:"col-12",children:[e.jsx(le,{id:a("defaultValue"),label:l("The default value for this field")}),e.jsx(W,{id:a("defaultValue"),register:u,errors:o,placeholder:l("Default value"),defaultValue:typeof r=="string"?r:null,values:K})]})});if(!s.type||D.includes(s.type))return null;if(s.type===E.EMAIL)return e.jsx("div",{className:"container align-end",children:e.jsxs("div",{className:"col-12",children:[e.jsx(le,{id:a("defaultValue"),label:l("The default value for this field")}),e.jsx(ae,{type:"email",id:a("defaultValue"),register:u,errors:o,placeholder:l("Default value"),defaultValue:typeof r=="string"?r:null,validate:{maxLength:{value:255,message:"max length is 255"}}})]})});if(s.type===E.DATE)return e.jsx("div",{className:"container align-end",children:e.jsxs("div",{className:"col-12",children:[e.jsx(le,{id:a("defaultValue"),label:l("The default value for this field")}),e.jsx(ae,{type:"date",id:a("defaultValue"),register:u,errors:o,placeholder:l("Default value"),defaultValue:typeof r=="string"?r:null,validate:{maxLength:{value:255,message:"max length is 255"}}})]})});if(s.type===E.DATE_TIME)return e.jsx("div",{className:"container align-end",children:e.jsxs("div",{className:"col-12",children:[e.jsx(le,{id:a("defaultValue"),label:l("The default value for this field")}),e.jsx(ae,{type:"datetime-local",id:a("defaultValue"),register:u,errors:o,placeholder:l("Default value"),defaultValue:typeof r=="string"?r:null,validate:{maxLength:{value:255,message:"max length is 255"}}})]})});if(s.type===E.TIME)return e.jsx("div",{className:"container align-end",children:e.jsxs("div",{className:"col-12",children:[e.jsx(le,{id:a("defaultValue"),label:l("The default value for this field")}),e.jsx(ae,{type:"time",id:a("defaultValue"),register:u,errors:o,placeholder:l("Default value"),defaultValue:typeof r=="string"?r:null,validate:{maxLength:{value:255,message:"max length is 255"}}})]})});if(s.type===E.COLOR)return e.jsx("div",{className:"container align-end",children:e.jsxs("div",{className:"col-12",children:[e.jsx(le,{id:a("defaultValue"),label:l("The default value for this field")}),e.jsx(Wt,{id:a("defaultValue"),register:u,errors:o,placeholder:l("Default value"),defaultValue:typeof r=="string"?r:null,validate:{maxLength:{value:255,message:"max length is 255"}}})]})});if(s.type===E.HTML)return e.jsx("div",{className:"container align-end",children:e.jsxs("div",{className:"col-12",children:[e.jsx(le,{id:a("defaultValue"),label:l("The default value for this field")}),e.jsx(Zt,{theme:"vs-dark",height:"250px",language:"html",options:{selectOnLineNumbers:!0},defaultValue:r,onChange:_=>{i(a("defaultValue"),_)}})]})});if(s.type===E.RANGE||s.type===E.NUMBER){const _=x&&x[8]&&x[8].value!==""?x[8].value:null,K=x&&x[9]&&x[9].value!==""?x[9].value:null,he=x&&x[10]&&x[10].value!==""?x[10].value:null;return e.jsx("div",{className:"container align-end",children:e.jsxs("div",{className:"col-12",children:[e.jsx(le,{id:a("defaultValue"),label:l("The default value for this field")}),e.jsx(ae,{type:"number",min:_,max:K,step:he,id:a("defaultValue"),register:u,errors:o,placeholder:l("Default value"),defaultValue:typeof r=="string"?r:null,validate:{maxLength:{value:255,message:"max length is 255"}}})]})})}if(s.type===E.RATING)return e.jsx("div",{className:"container align-end",children:e.jsxs("div",{className:"col-12",children:[e.jsx(le,{id:a("defaultValue"),label:l("The default value for this field")}),e.jsx(W,{type:"number",id:a("defaultValue"),register:u,errors:o,placeholder:l("Default value"),defaultValue:typeof r=="string"?r:null,values:[{label:"5.00/5.00",value:10},{label:"4.50/5.00",value:9},{label:"4.00/5.00",value:8},{label:"3.50/5.00",value:7},{label:"3.00/5.00",value:6},{label:"2.50/5.00",value:5},{label:"2.00/5.00",value:4},{label:"1.50/5.00",value:3},{label:"1.00/5.00",value:2},{label:"0.50/5.00",value:1}]})]})});if(s.type===E.TOGGLE)return e.jsx("div",{className:"container align-end",children:e.jsxs("div",{className:"col-12",children:[e.jsx(le,{id:a("defaultValue"),label:l("The default value for this field")}),e.jsx("div",{className:"toggle-group",children:e.jsxs("label",{className:"toggle",htmlFor:a("defaultValue"),children:[e.jsx("input",{id:a("defaultValue"),name:a("defaultValue"),type:"checkbox",defaultChecked:r==1,onChangeCapture:_=>{i(a("defaultValue"),_.target.checked?"1":"0")}}),e.jsx("span",{className:"slider round"})]})})]})});if(s.type===E.CURRENCY){const _=document.globals.globals.uom.currency;return e.jsxs("div",{className:"container align-end",children:[e.jsxs("div",{className:"col-3",children:[e.jsx(le,{id:a("defaultValue_currency_value"),label:l("The default value for this field")}),e.jsx("input",{id:a("defaultValue_currency_value"),name:a("defaultValue_currency_value"),type:"number",min:.01,step:.01,className:"form-control",defaultValue:F,onChangeCapture:K=>{A(K.target.value),i(a("defaultValue"),JSON.stringify({currency:j,currencyValue:K.target.value}))}})]}),e.jsxs("div",{className:"col-3",children:[e.jsx(le,{id:a("defaultValue_currency"),label:""}),e.jsx("div",{className:"acpt-select",children:e.jsx("select",{id:a("defaultValue_currency"),name:a("defaultValue_currency"),placeholder:l("Currency"),defaultValue:j||"USD",className:"form-control",onChangeCapture:K=>{O(K.target.value),i(a("defaultValue"),JSON.stringify({currencyValue:F,currency:K.target.value}))},children:_&&_.map((K,he)=>e.jsx("option",{value:K.value,children:K.label},he))})})]})]})}if(s.type===E.LENGTH){const _=document.globals.globals.uom.length;return e.jsxs("div",{className:"container align-end",children:[e.jsxs("div",{className:"col-3",children:[e.jsx(le,{id:a("defaultValue_length_value"),label:l("The default value for this field")}),e.jsx("input",{id:a("defaultValue_length_value"),name:a("defaultValue_length_value"),type:"number",min:.01,step:.01,className:"form-control",defaultValue:S,onChangeCapture:K=>{R(K.target.value),i(a("defaultValue"),JSON.stringify({length:g,lengthValue:K.target.value}))}})]}),e.jsxs("div",{className:"col-3",children:[e.jsx(le,{id:a("defaultValue_length"),label:""}),e.jsx("div",{className:"acpt-select",children:e.jsx("select",{id:a("defaultValue_length"),name:a("defaultValue_length"),placeholder:l("Length"),defaultValue:g||" KILOMETER",className:"form-control",onChangeCapture:K=>{C(K.target.value),i(a("defaultValue"),JSON.stringify({lengthValue:S,length:K.target.value}))},children:_&&_.map((K,he)=>e.jsx("option",{value:K.value,children:K.label},he))})})]})]})}if(s.type===E.WEIGHT){const _=document.globals.globals.uom.weight;return e.jsxs("div",{className:"container align-end",children:[e.jsxs("div",{className:"col-3",children:[e.jsx(le,{id:a("defaultValue_weight_value"),label:`${l("The default value for this field")}. ${l("From")}`}),e.jsx("input",{id:a("defaultValue_weight_value"),name:a("defaultValue_weight_value"),type:"number",min:.01,step:.01,className:"form-control",defaultValue:I,onChangeCapture:K=>{M(K.target.value),i(a("defaultValue"),JSON.stringify({weight:y,weightValue:K.target.value}))}})]}),e.jsxs("div",{className:"col-3",children:[e.jsx(le,{id:a("defaultValue_currency"),label:""}),e.jsx("div",{className:"acpt-select",children:e.jsx("select",{id:a("defaultValue_weight"),name:a("defaultValue_weight"),placeholder:l("Weight"),defaultValue:y||"KILOGRAM",className:"form-control",onChangeCapture:K=>{N(K.target.value),i(a("defaultValue"),JSON.stringify({weightValue:I,weight:K.target.value}))},children:_&&_.map((K,he)=>e.jsx("option",{value:K.value,children:K.label},he))})})]})]})}if(s.type===E.DATE_RANGE)return e.jsxs("div",{className:"container align-end",children:[e.jsxs("div",{className:"col-6",children:[e.jsx(le,{id:a("defaultValue_from"),label:`${l("The default value for this field")}. ${l("From")}`}),e.jsx("input",{id:a("defaultValue_from"),name:a("defaultValue_from"),type:"date",className:"form-control",defaultValue:c,onChangeCapture:_=>{p(_.target.value),i(a("defaultValue"),JSON.stringify({to:T,from:_.target.value}))}})]}),e.jsxs("div",{className:"col-6",children:[e.jsx(le,{id:a("defaultValue_to"),label:l("To")}),e.jsx("input",{id:a("defaultValue_to"),name:a("defaultValue_to"),type:"date",className:"form-control",defaultValue:T,disabled:!c,min:c,onChangeCapture:_=>{b(_.target.value),i(a("defaultValue"),JSON.stringify({from:c,to:_.target.value}))}})]})]});if(s.type===E.URL)return e.jsxs("div",{className:"container align-end",children:[e.jsxs("div",{className:"col-6",children:[e.jsx(le,{id:a("defaultValue_url"),label:l("URL")}),e.jsx("input",{id:a("defaultValue_url"),name:a("defaultValue_url"),type:"url",className:"form-control",defaultValue:h,onChangeCapture:_=>{f(_.target.value),i(a("defaultValue"),JSON.stringify({urlLabel:m,url:_.target.value}))}})]}),e.jsxs("div",{className:"col-6",children:[e.jsx(le,{id:a("defaultValue_url_label"),label:l("Label")}),e.jsx("input",{id:a("defaultValue_url_label"),name:a("defaultValue_url_label"),type:"text",className:"form-control",defaultValue:m,onChangeCapture:_=>{k(_.target.value),i(a("defaultValue"),JSON.stringify({url:h,urlLabel:_.target.value}))}})]})]});if(s.type===E.PHONE)return e.jsx("div",{className:"container align-end",children:e.jsxs("div",{className:"col-12",children:[e.jsx(le,{id:a("defaultValue"),label:l("The default value for this field")}),e.jsx(ae,{type:"phone",id:a("defaultValue"),register:u,errors:o,placeholder:l("Default value"),defaultValue:typeof r=="string"?r:null,validate:{maxLength:{value:255,message:"max length is 255"}}})]})});if(s.type===E.POST_OBJECT||s.type===E.POST_OBJECT_MULTI){const _=document.globals.globals.find.POST_ID;return de(s.type===E.POST_OBJECT_MULTI,_)}if(s.type===E.TERM_OBJECT||s.type===E.TERM_OBJECT_MULTI){const _=document.globals.globals.find.TERM_ID;return de(s.type===E.TERM_OBJECT_MULTI,_)}if(s.type===E.USER||s.type===E.USER_MULTI){const _=document.globals.globals.find.USER_ID;return de(s.type===E.USER_MULTI,_)}if(s.type===E.COUNTRY){const _=[{label:"Afghanistan ()",value:"Afghanistan ()"},{label:"land Islands (land)",value:"land Islands (land)"},{label:"Albania (Shqipri)",value:"Albania (Shqipri)"},{label:"Algeria ()",value:"Algeria ()"},{label:"American Samoa",value:"American Samoa"},{label:"Andorra",value:"Andorra"},{label:"Angola",value:"Angola"},{label:"Anguilla",value:"Anguilla"},{label:"Antarctica",value:"Antarctica"},{label:"Antigua and Barbuda",value:"Antigua and Barbuda"},{label:"Argentina",value:"Argentina"},{label:"Armenia ()",value:"Armenia ()"},{label:"Aruba",value:"Aruba"},{label:"Australia",value:"Australia"},{label:"Austria (sterreich)",value:"Austria (sterreich)"},{label:"Azerbaijan (Azrbaycan)",value:"Azerbaijan (Azrbaycan)"},{label:"Bahamas",value:"Bahamas"},{label:"Bahrain ()",value:"Bahrain ()"},{label:"Bangladesh ()",value:"Bangladesh ()"},{label:"Barbados",value:"Barbados"},{label:"Belarus ()",value:"Belarus ()"},{label:"Belgium (Belgi)",value:"Belgium (Belgi)"},{label:"Belize",value:"Belize"},{label:"Benin (Bnin)",value:"Benin (Bnin)"},{label:"Bermuda",value:"Bermuda"},{label:"Bhutan ()",value:"Bhutan ()"},{label:"Bolivia",value:"Bolivia"},{label:"Bosnia and Herzegovina (  )",value:"Bosnia and Herzegovina (  )"},{label:"Botswana",value:"Botswana"},{label:"Bouvet Island (Bouvetya)",value:"Bouvet Island (Bouvetya)"},{label:"Brazil (Brasil)",value:"Brazil (Brasil)"},{label:"British Indian Ocean Territory",value:"British Indian Ocean Territory"},{label:"British Virgin Islands",value:"British Virgin Islands"},{label:"Brunei",value:"Brunei"},{label:"Bulgaria ()",value:"Bulgaria ()"},{label:"Burkina Faso",value:"Burkina Faso"},{label:"Burundi (Uburundi)",value:"Burundi (Uburundi)"},{label:"Cambodia ()",value:"Cambodia ()"},{label:"Cameroon (Cameroun)",value:"Cameroon (Cameroun)"},{label:"Canada",value:"Canada"},{label:"Cape Verde (Kabu Verdi)",value:"Cape Verde (Kabu Verdi)"},{label:"Caribbean Netherlands",value:"Caribbean Netherlands"},{label:"Cayman Islands",value:"Cayman Islands"},{label:"Central African Republic (Rpublique Centrafricaine)",value:"Central African Republic (Rpublique Centrafricaine)"},{label:"Chad (Tchad)",value:"Chad (Tchad)"},{label:"Chile",value:"Chile"},{label:"China ()",value:"China ()"},{label:"Christmas Island",value:"Christmas Island"},{label:"Cocos (Keeling) Islands (Kepulauan Cocos (Keeling))",value:"Cocos (Keeling) Islands (Kepulauan Cocos (Keeling))"},{label:"Colombia",value:"Colombia"},{label:"Comoros ( )",value:"Comoros ( )"},{label:"Congo (DRC) (Jamhuri ya Kidemokrasia ya Kongo)",value:"Congo (DRC) (Jamhuri ya Kidemokrasia ya Kongo)"},{label:"Congo (Republic) (Congo-Brazzaville)",value:"Congo (Republic) (Congo-Brazzaville)"},{label:"Cook Islands",value:"Cook Islands"},{label:"Costa Rica",value:"Costa Rica"},{label:"Cte dIvoire",value:"Cte dIvoire"},{label:"Croatia (Hrvatska)",value:"Croatia (Hrvatska)"},{label:"Cuba",value:"Cuba"},{label:"Curaao",value:"Curaao"},{label:"Cyprus ()",value:"Cyprus ()"},{label:"Czech Republic (esk republika)",value:"Czech Republic (esk republika)"},{label:"Denmark (Danmark)",value:"Denmark (Danmark)"},{label:"Djibouti",value:"Djibouti"},{label:"Dominica",value:"Dominica"},{label:"Dominican Republic (Repblica Dominicana)",value:"Dominican Republic (Repblica Dominicana)"},{label:"Ecuador",value:"Ecuador"},{label:"Egypt ()",value:"Egypt ()"},{label:"El Salvador",value:"El Salvador"},{label:"Equatorial Guinea (Guinea Ecuatorial)",value:"Equatorial Guinea (Guinea Ecuatorial)"},{label:"Eritrea",value:"Eritrea"},{label:"Estonia (Eesti)",value:"Estonia (Eesti)"},{label:"Ethiopia",value:"Ethiopia"},{label:"Falkland Islands (Islas Malvinas)",value:"Falkland Islands (Islas Malvinas)"},{label:"Faroe Islands (Froyar)",value:"Faroe Islands (Froyar)"},{label:"Fiji",value:"Fiji"},{label:"Finland (Suomi)",value:"Finland (Suomi)"},{label:"France",value:"France"},{label:"French Guiana (Guyane franaise)",value:"French Guiana (Guyane franaise)"},{label:"French Polynesia (Polynsie franaise)",value:"French Polynesia (Polynsie franaise)"},{label:"French Southern Territories (Terres australes franaises)",value:"French Southern Territories (Terres australes franaises)"},{label:"Gabon",value:"Gabon"},{label:"Gambia",value:"Gambia"},{label:"Georgia ()",value:"Georgia ()"},{label:"Germany (Deutschland)",value:"Germany (Deutschland)"},{label:"Ghana (Gaana)",value:"Ghana (Gaana)"},{label:"Gibraltar",value:"Gibraltar"},{label:"Greece ()",value:"Greece ()"},{label:"Greenland (Kalaallit Nunaat)",value:"Greenland (Kalaallit Nunaat)"},{label:"Grenada",value:"Grenada"},{label:"Guadeloupe",value:"Guadeloupe"},{label:"Guam",value:"Guam"},{label:"Guatemala",value:"Guatemala"},{label:"Guernsey",value:"Guernsey"},{label:"Guinea (Guine)",value:"Guinea (Guine)"},{label:"Guinea-Bissau (Guin Bissau)",value:"Guinea-Bissau (Guin Bissau)"},{label:"Guyana",value:"Guyana"},{label:"Haiti",value:"Haiti"},{label:"Heard Island and Mcdonald Islands",value:"Heard Island and Mcdonald Islands"},{label:"Honduras",value:"Honduras"},{label:"Hong Kong ()",value:"Hong Kong ()"},{label:"Hungary (Magyarorszg)",value:"Hungary (Magyarorszg)"},{label:"Iceland (sland)",value:"Iceland (sland)"},{label:"India ()",value:"India ()"},{label:"Indonesia",value:"Indonesia"},{label:"Iran ()",value:"Iran ()"},{label:"Iraq ()",value:"Iraq ()"},{label:"Ireland",value:"Ireland"},{label:"Isle of Man",value:"Isle of Man"},{label:"Israel ()",value:"Israel ()"},{label:"Italy (Italia)",value:"Italy (Italia)"},{label:"Jamaica",value:"Jamaica"},{label:"Japan ()",value:"Japan ()"},{label:"Jersey",value:"Jersey"},{label:"Jordan ()",value:"Jordan ()"},{label:"Kazakhstan ()",value:"Kazakhstan ()"},{label:"Kenya",value:"Kenya"},{label:"Kiribati",value:"Kiribati"},{label:"Kosovo (Kosov)",value:"Kosovo (Kosov)"},{label:"Kuwait ()",value:"Kuwait ()"},{label:"Kyrgyzstan ()",value:"Kyrgyzstan ()"},{label:"Laos ()",value:"Laos ()"},{label:"Latvia (Latvija)",value:"Latvia (Latvija)"},{label:"Lebanon ()",value:"Lebanon ()"},{label:"Lesotho",value:"Lesotho"},{label:"Liberia",value:"Liberia"},{label:"Libya ()",value:"Libya ()"},{label:"Liechtenstein",value:"Liechtenstein"},{label:"Lithuania (Lietuva)",value:"Lithuania (Lietuva)"},{label:"Luxembourg",value:"Luxembourg"},{label:"Macau ()",value:"Macau ()"},{label:"Macedonia (FYROM) ()",value:"Macedonia (FYROM) ()"},{label:"Madagascar (Madagasikara)",value:"Madagascar (Madagasikara)"},{label:"Malawi",value:"Malawi"},{label:"Malaysia",value:"Malaysia"},{label:"Maldives",value:"Maldives"},{label:"Mali",value:"Mali"},{label:"Malta",value:"Malta"},{label:"Marshall Islands",value:"Marshall Islands"},{label:"Martinique",value:"Martinique"},{label:"Mauritania ()",value:"Mauritania ()"},{label:"Mauritius (Moris)",value:"Mauritius (Moris)"},{label:"Mayotte",value:"Mayotte"},{label:"Mexico (Mxico)",value:"Mexico (Mxico)"},{label:"Micronesia",value:"Micronesia"},{label:"Moldova (Republica Moldova)",value:"Moldova (Republica Moldova)"},{label:"Monaco",value:"Monaco"},{label:"Mongolia ()",value:"Mongolia ()"},{label:"Montenegro (Crna Gora)",value:"Montenegro (Crna Gora)"},{label:"Montserrat",value:"Montserrat"},{label:"Morocco ()",value:"Morocco ()"},{label:"Mozambique (Moambique)",value:"Mozambique (Moambique)"},{label:"Myanmar (Burma) ()",value:"Myanmar (Burma) ()"},{label:"Namibia (Namibi)",value:"Namibia (Namibi)"},{label:"Nauru",value:"Nauru"},{label:"Nepal ()",value:"Nepal ()"},{label:"Netherlands (Nederland)",value:"Netherlands (Nederland)"},{label:"New Caledonia (Nouvelle-Caldonie)",value:"New Caledonia (Nouvelle-Caldonie)"},{label:"New Zealand",value:"New Zealand"},{label:"Nicaragua",value:"Nicaragua"},{label:"Niger (Nijar)",value:"Niger (Nijar)"},{label:"Nigeria",value:"Nigeria"},{label:"Niue",value:"Niue"},{label:"Norfolk Island",value:"Norfolk Island"},{label:"North Korea (   )",value:"North Korea (   )"},{label:"Northern Mariana Islands",value:"Northern Mariana Islands"},{label:"Norway (Norge)",value:"Norway (Norge)"},{label:"Oman ()",value:"Oman ()"},{label:"Pakistan ()",value:"Pakistan ()"},{label:"Palau",value:"Palau"},{label:"Palestine ()",value:"Palestine ()"},{label:"Panama (Panam)",value:"Panama (Panam)"},{label:"Papua New Guinea",value:"Papua New Guinea"},{label:"Paraguay",value:"Paraguay"},{label:"Peru (Per)",value:"Peru (Per)"},{label:"Philippines",value:"Philippines"},{label:"Pitcairn Islands",value:"Pitcairn Islands"},{label:"Poland (Polska)",value:"Poland (Polska)"},{label:"Portugal",value:"Portugal"},{label:"Puerto Rico",value:"Puerto Rico"},{label:"Qatar ()",value:"Qatar ()"},{label:"Runion (La Runion)",value:"Runion (La Runion)"},{label:"Romania (Romnia)",value:"Romania (Romnia)"},{label:"Russia ()",value:"Russia ()"},{label:"Rwanda",value:"Rwanda"},{label:"Saint Barthlemy (Saint-Barthlemy)",value:"Saint Barthlemy (Saint-Barthlemy)"},{label:"Saint Helena",value:"Saint Helena"},{label:"Saint Kitts and Nevis",value:"Saint Kitts and Nevis"},{label:"Saint Lucia",value:"Saint Lucia"},{label:"Saint Martin (Saint-Martin (partie franaise))",value:"Saint Martin (Saint-Martin (partie franaise))"},{label:"Saint Pierre and Miquelon (Saint-Pierre-et-Miquelon)",value:"Saint Pierre and Miquelon (Saint-Pierre-et-Miquelon)"},{label:"Saint Vincent and the Grenadines",value:"Saint Vincent and the Grenadines"},{label:"Samoa",value:"Samoa"},{label:"San Marino",value:"San Marino"},{label:"So Tom and Prncipe (So Tom e Prncipe)",value:"So Tom and Prncipe (So Tom e Prncipe)"},{label:"Saudi Arabia (  )",value:"Saudi Arabia (  )"},{label:"Senegal (Sngal)",value:"Senegal (Sngal)"},{label:"Serbia ()",value:"Serbia ()"},{label:"Seychelles",value:"Seychelles"},{label:"Sierra Leone",value:"Sierra Leone"},{label:"Singapore",value:"Singapore"},{label:"Sint Maarten",value:"Sint Maarten"},{label:"Slovakia (Slovensko)",value:"Slovakia (Slovensko)"},{label:"Slovenia (Slovenija)",value:"Slovenia (Slovenija)"},{label:"Solomon Islands",value:"Solomon Islands"},{label:"Somalia (Soomaaliya)",value:"Somalia (Soomaaliya)"},{label:"South Africa",value:"South Africa"},{label:"South Georgia & South Sandwich Islands",value:"South Georgia & South Sandwich Islands"},{label:"South Korea ()",value:"South Korea ()"},{label:"South Sudan ( )",value:"South Sudan ( )"},{label:"Spain (Espaa)",value:"Spain (Espaa)"},{label:"Sri Lanka ( )",value:"Sri Lanka ( )"},{label:"Sudan ()",value:"Sudan ()"},{label:"Suriname",value:"Suriname"},{label:"Svalbard and Jan Mayen (Svalbard og Jan Mayen)",value:"Svalbard and Jan Mayen (Svalbard og Jan Mayen)"},{label:"Swaziland",value:"Swaziland"},{label:"Sweden (Sverige)",value:"Sweden (Sverige)"},{label:"Switzerland (Schweiz)",value:"Switzerland (Schweiz)"},{label:"Syria ()",value:"Syria ()"},{label:"Taiwan ()",value:"Taiwan ()"},{label:"Tajikistan",value:"Tajikistan"},{label:"Tanzania",value:"Tanzania"},{label:"Thailand ()",value:"Thailand ()"},{label:"Timor-Leste",value:"Timor-Leste"},{label:"Togo",value:"Togo"},{label:"Tokelau",value:"Tokelau"},{label:"Tonga",value:"Tonga"},{label:"Trinidad and Tobago",value:"Trinidad and Tobago"},{label:"Tunisia ()",value:"Tunisia ()"},{label:"Turkey (Trkiye)",value:"Turkey (Trkiye)"},{label:"Turkmenistan",value:"Turkmenistan"},{label:"Turks and Caicos Islands",value:"Turks and Caicos Islands"},{label:"Tuvalu",value:"Tuvalu"},{label:"Uganda",value:"Uganda"},{label:"Ukraine ()",value:"Ukraine ()"},{label:"United Arab Emirates (  )",value:"United Arab Emirates (  )"},{label:"United Kingdom",value:"United Kingdom"},{label:"United States",value:"United States"},{label:"U.S. Minor Outlying Islands",value:"U.S. Minor Outlying Islands"},{label:"U.S. Virgin Islands",value:"U.S. Virgin Islands"},{label:"Uruguay",value:"Uruguay"},{label:"Uzbekistan (Ozbekiston)",value:"Uzbekistan (Ozbekiston)"},{label:"Vanuatu",value:"Vanuatu"},{label:"Vatican City (Citt del Vaticano)",value:"Vatican City (Citt del Vaticano)"},{label:"Venezuela",value:"Venezuela"},{label:"Vietnam (Vit Nam)",value:"Vietnam (Vit Nam)"},{label:"Wallis and Futuna",value:"Wallis and Futuna"},{label:"Western Sahara ( )",value:"Western Sahara ( )"},{label:"Yemen ()",value:"Yemen ()"},{label:"Zambia",value:"Zambia"},{label:"Zimbabwe",value:"Zimbabwe"}];return e.jsx("div",{className:"container align-end",children:e.jsxs("div",{className:"col-12",children:[e.jsx(le,{id:a("defaultValue"),label:l("The default value for this field")}),e.jsx(W,{type:"number",id:a("defaultValue"),register:u,errors:o,placeholder:l("Default value"),defaultValue:typeof r=="string"?r:null,values:_})]})})}return s.type===E.CLONE?e.jsx(Ka,{id:a("defaultValue[]"),field:s}):e.jsx("div",{className:"container align-end",children:e.jsxs("div",{className:"col-12",children:[e.jsx(le,{id:a("defaultValue"),label:l("The default value for this field")}),e.jsx(ae,{id:a("defaultValue"),register:u,errors:o,placeholder:l("Default value"),defaultValue:typeof r=="string"?r:null,validate:{maxLength:{value:255,message:"max length is 255"}}})]})})};Ha.propTypes={formId:n.func.isRequired,field:n.object.isRequired};const Ya=({formId:a,boxIndex:s,fieldIndex:u,boxId:t,field:o})=>{const{group:i}=Q(y=>y.metaState),d=X(),[x,v]=w.useState(!0),{register:r,unregister:c,control:p,formState:{errors:T},resetField:b,reset:h,setValue:f,setError:m,clearErrors:k}=U(),F=V({control:p,name:a("type")}),A=V({control:p,name:`boxes.${s}.fields`}),j=V({control:p,name:`boxes.${s}.name`}),O=Il(i.boxes,t,o.id),g=()=>F||o.type,C=y=>{if(g()!==y){const N={...o};N.type=y,y!==E.REPEATER&&(N.children=[]),y!==E.FLEXIBLE&&(N.blocks=[]),y!==E.POST&&(N.relations=[]),ca(y)||(c(a("validationRules")),N.validationRules=[]),c(a("relations")),c(a("blocks")),c(a("children")),N.children||(N.children=[]),N.blocks||(N.blocks=[]),N.relations||(N.relations=[]),N.visibilityConditions||(N.visibilityConditions=[]),N.validationRules||(N.validationRules=[]),d(ua({field:N,boxId:t}))}},S=async y=>{if(x){const N=Be(Le(y));f(a("name"),N),await R(N)?m(a("name"),{message:l("Name is already taken")}):k(a("name"))}},R=async y=>{const N=Be(Le(y));let I=[];if(A&&A.map((M,D)=>{D!==u&&I.push(M.name)}),I.includes(N))return l("Name is already taken");if(o.name!==N&&(await xe("checkMetaBoxFieldNameAction",{boxName:j||o.boxName,fieldName:N})).exists===!0)return l("Name is already taken")};return e.jsxs(q.Fragment,{children:[e.jsxs("div",{className:"flex-column s-24",children:[e.jsxs("div",{className:"container align-end",children:[e.jsxs("div",{className:"col-4",children:[e.jsx(le,{isRequired:!1,id:a("label"),label:e.jsxs("div",{className:"flex-between",children:[e.jsx("span",{children:l("Field label")}),e.jsx("a",{href:"#",style:{fontWeight:"normal"},onClick:y=>{y.preventDefault(),v(!x)},children:l(`${x?"Auto slug ON":"Auto slug OFF"}`)})]})}),e.jsx(ae,{id:a("label"),register:r,errors:T,defaultValue:o.label,placeholder:l("The field label, non latin characters are allowed"),onChangeCapture:Ml(y=>{S(y.target.value)},300),onClick:y=>{y.target.value==="meta box field"&&b(a("label"))},validate:{maxLength:{value:255,message:"max length is 255"}}})]}),e.jsxs("div",{className:"col-4",children:[e.jsx(le,{isRequired:!0,id:a("name"),label:l("Field slug")}),e.jsx(ae,{id:a("name"),register:r,errors:T,placeholder:l("Field slug (Ex. gallery or text_1)"),defaultValue:o.name,onClick:y=>{y.target.value==="meta_box_field"&&b(a("name"))},validate:{validate:{alphanumericallyValid:We,checkIfNameIsValid:R},required:l("This field is mandatory"),maxLength:{value:255,message:"max length is 255"}}})]}),e.jsxs("div",{className:"col-4",children:[e.jsx(le,{isRequired:!0,id:a("type"),label:l("Choose the field type")}),e.jsx(W,{register:r,id:a("type"),errors:T,defaultValue:o.type,values:Zl(O),onChangeCapture:y=>{C(y.target.value)}})]})]}),e.jsx("div",{className:"container align-end",children:e.jsxs("div",{className:"col-12",children:[e.jsx(le,{id:a("description"),label:l("The description of this field (showed only on admin panel)")}),e.jsx(Xt,{id:a("description"),register:r,defaultValue:o.description,errors:T,placeholder:l("A brief description"),characterLimit:255,rows:4,validate:{maxLength:{value:255,message:"max length is 255"}}})]})}),e.jsx(Ha,{field:o,formId:a})]}),Us(g())&&e.jsx(ka,{boxId:t,fieldId:o.id,boxIndex:s,fieldIndex:u,parentFieldId:o.parentId?o.parentId:null,options:o.options?o.options:[],isMulti:o.type===E.SELECT_MULTI||o.type===E.CHECKBOX}),Sl(g())&&e.jsx(wa,{nestingLevel:O,boxId:t,parentFieldId:o.id,boxIndex:s,parentFieldIndex:u,childrenFields:o.children}),Cl(g())&&e.jsx(Oa,{nestingLevel:O,boxId:t,parentFieldId:o.id,boxIndex:s,parentFieldIndex:u,blocks:o.blocks}),Ks(g())&&e.jsx($a,{formId:a,field:o})]})};Ya.propTypes={formId:n.func.isRequired,boxIndex:n.number.isRequired,fieldIndex:n.number.isRequired,boxId:n.string.isRequired,field:n.object.isRequired};const za=({id:a,values:s,description:u,validate:t,register:o,style:i,errors:d})=>{const x=Je(d,a);return e.jsxs(q.Fragment,{children:[e.jsxs("div",{className:`${i==="inline"?"i-flex-center":"flex-column"} s-8`,style:{minHeight:"46px"},children:[Object.keys(s).map((v,r)=>e.jsxs("label",{className:"radio",htmlFor:`${a}_${r}`,children:[e.jsx("input",{name:a,value:s[v].value,defaultChecked:s[v].checked,"aria-invalid":x?"true":"false",type:"radio",id:`${a}_${r}`,...o(a,{...t})}),e.jsx("span",{children:s[v].label})]})),x&&e.jsx("div",{className:"invalid-feedback",children:x.message})]}),u&&e.jsx("div",{className:"form-description",children:u}),x&&e.jsx("div",{className:"invalid-feedback",children:x.message})]})};za.propTypes={id:n.string.isRequired,description:n.string,values:n.arrayOf(n.object).isRequired,validate:n.func,register:n.func.isRequired,errors:n.array.isRequired,style:n.string};const Ja=({renderAdvancedField:a})=>e.jsxs("fieldset",{className:"acpt-fieldset",children:[e.jsx("legend",{children:l("Display settings")}),e.jsx("div",{className:"flex-column s-24",children:e.jsx("div",{className:"container align-end",children:e.jsx("div",{className:"col-12",children:a({type:"radio",index:37,innerKey:"display",placeholder:l("Display"),label:l("Display"),options:{options:Hs}})})})})]});Ja.propTypes={renderAdvancedField:n.func.isRequired};const Wa=({fieldType:a,renderAdvancedField:s})=>{const u=[E.LENGTH,E.NUMBER,E.RANGE,E.CURRENCY,E.DATE,E.DATE_TIME,E.LENGTH,E.NUMBER,E.TIME,E.WEIGHT],t=[E.EDITOR,E.TEXTAREA],o=[E.PHONE,E.EMAIL,E.TEXT,E.URL];return u.includes(a)===!1&&t.includes(a)===!1&&o.includes(a)===!1?null:e.jsxs("fieldset",{className:"acpt-fieldset",children:[e.jsx("legend",{children:l("Textual fields settings")}),e.jsx("div",{className:"flex-column s-24",children:e.jsxs("div",{className:"container align-end",children:[u.includes(a)&&e.jsxs(q.Fragment,{children:[e.jsx("div",{className:"col-4",children:s({type:"integer",index:8,innerKey:"min",placeholder:l("The minimum value (used only by numeric and textual fields)"),label:l("Min value (used only by numeric and textual fields)"),options:{}})}),e.jsx("div",{className:"col-4",children:s({type:"integer",index:9,innerKey:"max",placeholder:l("The maximum value (used only by numeric and textual fields)"),label:l("Max value (used only by numeric and textual fields)"),options:{}})}),e.jsx("div",{className:"col-4",children:s({type:"integer",index:10,innerKey:"step",placeholder:l("Step value (used only by numeric fields)"),label:l("Step value (used only by numeric fields)"),options:{}})})]}),t.includes(a)&&e.jsxs(q.Fragment,{children:[e.jsx("div",{className:"col-6",children:s({type:"integer",index:8,innerKey:"min",placeholder:l("The minimum value (used only by numeric and textual fields)"),label:l("Min value (used only by numeric and textual fields)"),options:{}})}),e.jsx("div",{className:"col-6",children:s({type:"integer",index:9,innerKey:"max",placeholder:l("The maximum value (used only by numeric and textual fields)"),label:l("Max value (used only by numeric and textual fields)"),options:{}})})]}),o.includes(a)&&e.jsxs(q.Fragment,{children:[e.jsx("div",{className:"col-4",children:s({type:"integer",index:8,innerKey:"min",placeholder:l("The minimum value (used only by numeric and textual fields)"),label:l("Min value (used only by numeric and textual fields)"),options:{}})}),e.jsx("div",{className:"col-4",children:s({type:"integer",index:9,innerKey:"max",placeholder:l("The maximum value (used only by numeric and textual fields)"),label:l("Max value (used only by numeric and textual fields)"),options:{}})}),e.jsx("div",{className:"col-4",children:s({type:"text",index:11,innerKey:"pattern",placeholder:l("Pattern value (used only by numeric and textual fields)"),label:l("Pattern value (used only by textual fields)"),options:{}})})]})]})})]})};Wa.propTypes={fieldType:n.string.isRequired,renderAdvancedField:n.func.isRequired};const Xa=({renderAdvancedField:a})=>e.jsxs("fieldset",{className:"acpt-fieldset",children:[e.jsx("legend",{children:l("File field settings")}),e.jsxs("div",{className:"flex-column s-24",children:[e.jsxs("div",{className:"container align-end",children:[e.jsx("div",{className:"col-4",children:a({type:"select",index:14,innerKey:"accepts",placeholder:l("Input file accepts"),label:l("Input file accepts"),options:{multiple:!0,options:[{label:"image",value:"image"},{label:"video",value:"video"},{label:"document",value:"document"},{label:"audio",value:"audio"}]}})}),e.jsx("div",{className:"col-4",children:a({type:"radio",index:34,innerKey:"render",placeholder:l("Render as"),label:l("Render as"),options:{options:sl}})}),e.jsx("div",{className:"col-4",children:a({type:"radio",index:5,innerKey:"hide_url_label",placeholder:l("Hide the label"),label:l("Hide the label"),options:{options:_e}})})]}),e.jsxs("div",{className:"container align-end",children:[e.jsx("div",{className:"col-6",children:a({type:"integer",index:16,innerKey:"max_size",placeholder:l("Maximum size"),label:`${l("Maximum size")} (Mb)`,options:{min:"0"}})}),e.jsx("div",{className:"col-6",children:a({type:"integer",index:17,innerKey:"min_size",placeholder:l("Minimum size"),label:`${l("Minimum size")} (Mb)`,options:{min:"0"}})})]})]})]});Xa.propTypes={renderAdvancedField:n.func.isRequired};const Qa=({renderAdvancedField:a,fieldType:s})=>{const u=[{label:l("On the top"),value:"top"},{label:l("On the left"),value:"left"},{label:l("On the right"),value:"right"},{label:l("No display"),value:"none"}],t=[{label:l("Center"),value:"center"},{label:l("Top"),value:"flex-start"},{label:l("Bottom"),value:"flex-end"}];return e.jsxs("fieldset",{className:"acpt-fieldset",children:[e.jsx("legend",{children:l("General settings")}),e.jsxs("div",{className:"flex-column s-24",children:[e.jsxs("div",{className:"container align-end",children:[e.jsx("div",{className:"col-4",children:a({type:"select",index:1,innerKey:"headline",placeholder:l("Select the headline location (default: on the left)"),label:l("Headline location"),options:{options:u}})}),e.jsx("div",{className:"col-4",children:a({type:"select",index:29,innerKey:"vertical_alignment",placeholder:l("Select the field vertical alignment (default: center)"),label:l("Vertical alignment"),options:{options:t}})}),e.jsx("div",{className:"col-4",children:a({type:"integer",index:2,innerKey:"width",placeholder:l("Field width in % ([1-100] default value: 100)"),label:l("Field width"),options:{min:1,max:100,step:1}})})]}),rt(s)&&e.jsxs("div",{className:"container align-end",children:[e.jsx("div",{className:"col-6",children:a({type:"text",index:6,innerKey:"before",placeholder:l("This text will appear before input"),label:l("Text before. HTML is allowed (ex. &lt;small&gt;)"),options:{}})}),e.jsx("div",{className:"col-6",children:a({type:"text",index:7,innerKey:"after",placeholder:l("This text will appear after input"),label:l("Text after. HTML is allowed (ex. &lt;small&gt;)"),options:{}})})]}),e.jsx("div",{className:"container align-end",children:e.jsx("div",{className:"col-12",children:a({type:"text",index:18,innerKey:"css",placeholder:l("These CSS classes will be applied to back-end editor fields"),label:l("Add CSS classes to back-end editor fields (ex. class-active pulse)"),options:{}})})})]})]})};Qa.propTypes={fieldType:n.string.isRequired,renderAdvancedField:n.func.isRequired};const Za=({renderAdvancedField:a,fieldType:s})=>e.jsxs("fieldset",{className:"acpt-fieldset",children:[e.jsx("legend",{children:l("Textarea settings")}),e.jsx("div",{className:"flex-column s-24",children:e.jsxs("div",{className:"container align-end",children:[e.jsx("div",{className:`col-${s===E.EDITOR?4:6}`,children:a({type:"integer",index:25,innerKey:"cols",placeholder:l("The cols value (used only by textarea fields)"),label:l("Cols"),options:{min:"0",max:"999999",step:"1"}})}),e.jsx("div",{className:`col-${s===E.EDITOR?4:6}`,children:a({type:"integer",index:26,innerKey:"rows",placeholder:l("The rows value (used only by textarea fields)"),label:l("Rows"),options:{min:"0",max:"999999",step:"1"}})}),s===E.EDITOR&&e.jsx("div",{className:"col-4",children:a({type:"radio",index:35,innerKey:"media",label:l("Disable media upload"),options:{options:_e}})})]})})]});Za.propTypes={fieldType:n.string.isRequired,renderAdvancedField:n.func.isRequired};const es=({renderAdvancedField:a})=>e.jsxs("fieldset",{className:"acpt-fieldset",children:[e.jsx("legend",{children:l("Radio field settings")}),e.jsx("div",{children:a({type:"radio",index:4,innerKey:"hide_blank_radio",placeholder:l("Hide the blank value"),label:l("Hide the blank value"),options:{options:_e}})})]});es.propTypes={renderAdvancedField:n.func.isRequired};const ls=({renderAdvancedField:a,fieldType:s})=>e.jsxs("fieldset",{className:"acpt-fieldset",children:[e.jsx("legend",{children:l("Date field settings")}),e.jsx("div",{className:"flex-column s-24",children:e.jsxs("div",{className:"container align-end",children:[e.jsx("div",{className:"col-4",children:a({type:"date",index:8,innerKey:"min",placeholder:l("The minimum value (used only by numeric and textual fields)"),label:l("Min value (used only by numeric and textual fields)"),options:{}})}),e.jsx("div",{className:"col-4",children:a({type:"date",index:9,innerKey:"max",placeholder:l("The maximum value (used only by numeric and textual fields)"),label:l("Max value (used only by numeric and textual fields)"),options:{}})}),e.jsx("div",{className:"col-4",children:a({type:"select",index:27,innerKey:"date_format",placeholder:l("Date format"),label:l("Date format"),options:{options:ea}})})]})})]});ls.propTypes={fieldType:n.string.isRequired,renderAdvancedField:n.func.isRequired};const as=({renderAdvancedField:a})=>e.jsxs("fieldset",{className:"acpt-fieldset",children:[e.jsx("legend",{children:l("Datetime field settings")}),e.jsx("div",{className:"flex-column s-24",children:e.jsxs("div",{className:"container align-end",children:[e.jsx("div",{className:"col-3",children:a({type:"date",index:8,innerKey:"min",placeholder:l("The minimum value (used only by numeric and textual fields)"),label:l("Min value (used only by numeric and textual fields)"),options:{}})}),e.jsx("div",{className:"col-3",children:a({type:"date",index:9,innerKey:"max",placeholder:l("The maximum value (used only by numeric and textual fields)"),label:l("Max value (used only by numeric and textual fields)"),options:{}})}),e.jsx("div",{className:"col-3",children:a({type:"select",index:27,innerKey:"date_format",placeholder:l("Date format"),label:l("Date format"),options:{options:ea}})}),e.jsx("div",{className:"col-3",children:a({type:"select",index:28,innerKey:"time_format",placeholder:l("Time format"),label:l("Time format"),options:{options:la}})})]})})]});as.propTypes={renderAdvancedField:n.func.isRequired};const ss=({renderAdvancedField:a})=>{const s=[{value:"PASSWORD_DEFAULT",label:"DEFAULT"},{value:"PASSWORD_BCRYPT",label:"BCRYPT"},{value:"PASSWORD_ARGON2I",label:"ARGON2I"},{value:"PASSWORD_ARGON2ID",label:"ARGON2ID)"}];return e.jsxs("fieldset",{className:"acpt-fieldset",children:[e.jsx("legend",{children:l("Password field settings")}),e.jsx("div",{children:a({type:"select",index:32,innerKey:"algorithm",placeholder:l("Algorithm"),label:l("Algorithm"),options:{options:s}})})]})};ss.propTypes={renderAdvancedField:n.func.isRequired};const ts=({renderAdvancedField:a})=>e.jsxs("fieldset",{className:"acpt-fieldset",children:[e.jsx("legend",{children:l("Time field settings")}),e.jsx("div",{children:a({type:"select",index:28,innerKey:"time_format",placeholder:l("Time format"),label:l("Time format"),options:{options:la}})})]});ts.propTypes={renderAdvancedField:n.func.isRequired};const is=({renderAdvancedField:a})=>{const s=[{label:l("Row"),value:"row"},{label:l("Block"),value:"block"},{label:l("Table"),value:"table"}];return e.jsxs("fieldset",{className:"acpt-fieldset",children:[e.jsx("legend",{children:l("Clone field settings")}),e.jsx("div",{children:a({type:"select",index:20,innerKey:"layout",placeholder:l("The look of the field for admins and editors."),label:l("Field layout"),options:{options:s}})})]})};is.propTypes={renderAdvancedField:n.func.isRequired};const ns=({renderAdvancedField:a})=>e.jsxs("fieldset",{className:"acpt-fieldset",children:[e.jsx("legend",{children:l("Audio field settings")}),e.jsx("div",{className:"flex-column s-24",children:e.jsxs("div",{className:"container align-end",children:[e.jsx("div",{className:"col-4",children:a({type:"radio",index:33,innerKey:"custom_audio_player",placeholder:l("Use the custom audio player"),label:l("Use the custom audio player"),options:{options:_e}})}),e.jsx("div",{className:"col-4",children:a({type:"radio",index:36,innerKey:"disable_cover",placeholder:l("Disable cover in custom the audio player"),label:l("Disable cover in the custom audio player"),options:{options:_e}})}),e.jsx("div",{className:"col-4",children:a({type:"radio",index:34,innerKey:"render",placeholder:l("Render as"),label:l("Render as"),options:{options:sl}})})]})})]});ns.propTypes={renderAdvancedField:n.func.isRequired};const rs=({renderAdvancedField:a,baseFormId:s})=>{const{control:u}=U(),t=V({control:u,name:s("advancedOptions.5.value")});return e.jsxs("fieldset",{className:"acpt-fieldset",children:[e.jsx("legend",{children:l("URL field settings")}),e.jsx("div",{className:"flex-column s-24",children:e.jsxs("div",{className:"container align-end",children:[e.jsx("div",{className:"col-6",children:a({type:"radio",index:5,innerKey:"hide_url_label",placeholder:l("Hide the label"),label:l("Hide the label"),options:{options:_e}})}),e.jsx("div",{className:"col-6",children:a({type:"radio",index:34,innerKey:"render",placeholder:l("Render as"),label:l("Render as"),options:{options:Ys.filter(o=>t==1?o.value!=="label":!0)}})})]})})]})};rs.propTypes={baseFormId:n.string.isRequired,index:n.number.isRequired,renderAdvancedField:n.func.isRequired};const os=({renderAdvancedField:a})=>e.jsxs("fieldset",{className:"acpt-fieldset",children:[e.jsx("legend",{children:l("Relational field settings")}),e.jsx("div",{children:a({type:"select",index:20,innerKey:"layout",placeholder:l("The look of the field for admins and editors."),label:l("Field layout"),options:{options:Al()}})})]});os.propTypes={renderAdvancedField:n.func.isRequired};const ds=({renderAdvancedField:a})=>e.jsxs("fieldset",{className:"acpt-fieldset",children:[e.jsx("legend",{children:l("Post object settings")}),e.jsx("div",{className:"flex-column s-24",children:e.jsxs("div",{className:"container align-end",children:[e.jsx("div",{className:"col-3",children:a({type:"select",index:20,innerKey:"layout",placeholder:l("The look of the field for admins and editors."),label:l("Field layout"),options:{options:Al()}})}),e.jsx("div",{className:"col-3",children:a({type:"select",index:21,innerKey:"filter_post_type",placeholder:l("Filter by post type"),label:l("Filter by post type"),options:{options:document.globals.globals.find.customPostType}})}),e.jsx("div",{className:"col-3",children:a({type:"select",index:22,innerKey:"filter_post_status",placeholder:l("Filter by post status"),label:l("Filter by post status"),options:{options:ei}})}),e.jsx("div",{className:"col-3",children:a({type:"select",index:23,innerKey:"filter_taxonomy",placeholder:l("Filter by taxonomy"),label:l("Filter by taxonomy"),options:{options:document.globals.globals.find.TERM_ID}})})]})})]});ds.propTypes={renderAdvancedField:n.func.isRequired};const cs=({renderAdvancedField:a})=>e.jsxs("fieldset",{className:"acpt-fieldset",children:[e.jsx("legend",{children:l("Image settings")}),e.jsx("div",{className:"flex-column s-24",children:e.jsxs("div",{className:"container align-end",children:[e.jsx("div",{className:"col-6",children:a({type:"radio",index:31,innerKey:"set_thumbnail",placeholder:l("Set as post thumbnail"),label:l("Set as post thumbnail"),options:{options:_e}})}),e.jsx("div",{className:"col-6",children:a({type:"radio",index:34,innerKey:"render",placeholder:l("Render as"),label:l("Render as"),options:{options:sl}})})]})})]});cs.propTypes={renderAdvancedField:n.func.isRequired};const us=({renderAdvancedField:a})=>e.jsxs("fieldset",{className:"acpt-fieldset",children:[e.jsx("legend",{children:l("Term object settings")}),e.jsx("div",{className:"flex-column s-24",children:e.jsxs("div",{className:"container align-end",children:[e.jsx("div",{className:"col-6",children:a({type:"select",index:23,innerKey:"filter_taxonomy",placeholder:l("Filter by taxonomy"),label:l("Filter by taxonomy"),options:{options:document.globals.globals.find.taxonomy}})}),e.jsx("div",{className:"col-6",children:a({type:"radio",index:30,innerKey:"sync_taxonomy",placeholder:l("Sync with post terms"),label:l("Sync with post terms"),options:{options:_e}})})]})})]});us.propTypes={renderAdvancedField:n.func.isRequired};const ti=[{label:"Administrator",value:"administrator"},{label:"Editor",value:"editor"},{label:"Author",value:"author"},{label:"Contributor",value:"contributor"},{label:"Viewer",value:"viewer"},{label:"Subscriber",value:"subscriber"}],hs=({renderAdvancedField:a})=>e.jsxs("fieldset",{className:"acpt-fieldset",children:[e.jsx("legend",{children:l("User settings")}),e.jsx("div",{className:"flex-column s-24",children:e.jsxs("div",{className:"container align-end",children:[e.jsx("div",{className:"col-6",children:a({type:"select",index:20,innerKey:"layout",placeholder:l("The look of the field for admins and editors."),label:l("Field layout"),options:{options:Al()}})}),e.jsx("div",{className:"col-6",children:a({type:"select",index:24,innerKey:"filter_role",placeholder:l("Filter by role"),label:l("Filter by role"),options:{multiple:!0,options:ti}})})]})})]});hs.propTypes={renderAdvancedField:n.func.isRequired};const ps=({renderAdvancedField:a,leadingFieldOptions:s})=>{const u=[{label:l("Row"),value:"row"},{label:l("Block"),value:"block"},{label:l("Table"),value:"table"}];return e.jsxs("fieldset",{className:"acpt-fieldset",children:[e.jsx("legend",{children:l("Nestable fields layout settings")}),e.jsxs("div",{className:"flex-column s-24",children:[e.jsxs("div",{className:"container align-end",children:[e.jsx("div",{className:"col-6",children:a({type:"select",index:19,innerKey:"leading_field",placeholder:l("The leading field (which will be displayed when the repeater is collapsed)."),label:l("Leading field"),options:{options:s}})}),e.jsx("div",{className:"col-6",children:a({type:"select",index:20,innerKey:"layout",placeholder:l("The look of the field for admins and editors."),label:l("Field layout"),options:{options:u}})})]}),e.jsxs("div",{className:"container align-end",children:[e.jsx("div",{className:"col-4",children:a({type:"integer",index:3,innerKey:"columns",placeholder:l("Field columns ([1-6] only for repeater field)"),label:l("Field columns"),options:{min:1,max:6,step:1}})}),e.jsx("div",{className:"col-4",children:a({type:"integer",index:12,innerKey:"minimum_blocks",placeholder:l("The limit on how many elements are required ([1-100] only for repeater field)"),label:l("Minimum elements allowed"),options:{min:"0"}})}),e.jsx("div",{className:"col-4",children:a({type:"integer",index:13,innerKey:"maximum_blocks",placeholder:l("The limit on how many elements are allowed ([1-100] only for repeater field)"),label:l("Maximum elements allowed"),options:{min:"0"}})})]})]})]})};ps.propTypes={renderAdvancedField:n.func.isRequired,leadingFieldOptions:n.array.isRequired};const ms=({renderAdvancedField:a})=>e.jsxs("fieldset",{className:"acpt-fieldset",children:[e.jsx("legend",{children:l("Gallery settings")}),e.jsx("div",{className:"flex-column s-24",children:e.jsx("div",{className:"container align-end",children:e.jsx("div",{className:"col-12",children:a({type:"radio",index:34,innerKey:"render",placeholder:l("Render as"),label:l("Render as"),options:{options:sl}})})})})]});ms.propTypes={renderAdvancedField:n.func.isRequired};const xs=({renderAdvancedField:a})=>e.jsxs("fieldset",{className:"acpt-fieldset",children:[e.jsx("legend",{children:l("Video settings")}),e.jsx("div",{className:"flex-column s-24",children:e.jsx("div",{className:"container align-end",children:e.jsx("div",{className:"col-12",children:a({type:"radio",index:34,innerKey:"render",placeholder:l("Render as"),label:l("Render as"),options:{options:sl}})})})})]});xs.propTypes={renderAdvancedField:n.func.isRequired};const bs=({field:a,formId:s})=>{const{control:u,register:t,formState:{errors:o},setValue:i,clearErrors:d}=U(),x=V({control:u,name:s("children")}),v=V({control:u,name:s("blocks")});let r=[];x&&x.length>0&&x.map(p=>{nl(p.type)&&r.push({label:p.label?p.label:p.name,value:p.id})}),v&&v.length>0&&v.map(p=>{p.fields&&p.fields.length>0&&p.fields.map(T=>{nl(T.type)&&r.push({label:T.label?T.label:T.name,value:T.id})})});const c=({type:p,index:T,innerKey:b,label:h,placeholder:f,options:m})=>{const k=j=>`${s(`advancedOptions.${T}.${j}`)}`,F=()=>{if(!a.advancedOptions)return null;const j=a.advancedOptions[T];return j||null},A=()=>{let j={};return m.min&&(j.min={value:m.min,message:l("min length is")+" "+m.min}),m.max&&(j.max={value:m.max,message:l("max length is")+" "+m.max}),j};return e.jsxs(q.Fragment,{children:[e.jsx(ge,{id:k("id"),value:F()?F().id:me(),register:t}),e.jsx(ge,{id:k("key"),value:F()?F().key:b,register:t}),e.jsx(le,{id:k("value"),label:e.jsx("span",{dangerouslySetInnerHTML:{__html:h}})}),p==="toggle"&&e.jsx(jl,{id:k("value"),register:t,errors:o,placeholder:f,defaultValue:F()?F().value:null}),p==="integer"&&e.jsx(ae,{type:"number",id:k("value"),register:t,errors:o,placeholder:f,min:m.min?m.min:null,max:m.max?m.max:null,step:m.step?m.step:null,defaultValue:F()?F().value:null,validate:A()}),p==="date"&&e.jsx(ae,{type:"date",id:k("value"),register:t,errors:o,placeholder:f,defaultValue:F()?F().value:null}),p==="radio"&&m&&m.options&&e.jsx(q.Fragment,{children:e.jsx(za,{style:"inline",register:t,id:k("value"),errors:o,placeholder:f,values:m.options,defaultValue:F()?F().value:null})}),p==="select"&&m&&m.options&&e.jsx(q.Fragment,{children:m.multiple&&m.multiple===!0?e.jsx(Ne,{clearErrors:d,errors:o,id:k("value"),register:t,setValue:i,values:m.options,defaultValue:F()?F().value:null}):e.jsx(W,{register:t,id:k("value"),errors:o,placeholder:f,values:m.options,defaultValue:F()?F().value:null})}),p==="text"&&e.jsx(ae,{id:k("value"),register:t,errors:o,placeholder:f,defaultValue:F()?F().value:null})]})};return e.jsxs("div",{className:"flex-column s-24",children:[e.jsx(Qa,{fieldType:a.type,renderAdvancedField:c}),ot(a.type)&&e.jsx(Za,{renderAdvancedField:c,fieldType:a.type}),nl(a.type)&&e.jsx(Wa,{renderAdvancedField:c,fieldType:a.type}),dt(a.type)&&e.jsx(Xa,{renderAdvancedField:c}),ct(a.type)&&e.jsx(es,{renderAdvancedField:c}),ut(a.type)&&e.jsx(ls,{renderAdvancedField:c,fieldType:a.type}),ht(a.type)&&e.jsx(as,{renderAdvancedField:c}),pt(a.type)&&e.jsx(ss,{renderAdvancedField:c}),mt(a.type)&&e.jsx(ts,{renderAdvancedField:c}),xt(a.type)&&e.jsx(rs,{renderAdvancedField:c,baseFormId:s}),bt(a.type)&&e.jsx(ps,{leadingFieldOptions:r,renderAdvancedField:c}),vt(a.type)&&e.jsx(os,{renderAdvancedField:c}),ft(a.type)&&e.jsx(ds,{renderAdvancedField:c}),gt(a.type)&&e.jsx(us,{renderAdvancedField:c}),jt(a.type)&&e.jsx(cs,{renderAdvancedField:c}),yt(a.type)&&e.jsx(ms,{renderAdvancedField:c}),Nt(a.type)&&e.jsx(xs,{renderAdvancedField:c}),Tt(a.type)&&e.jsx(hs,{renderAdvancedField:c}),St(a.type)&&e.jsx(ns,{renderAdvancedField:c}),Ct(a.type)&&e.jsx(is,{renderAdvancedField:c}),Rt(a.type)&&e.jsx(Ja,{renderAdvancedField:c})]})};bs.propTypes={formId:n.func.isRequired,boxIndex:n.number.isRequired,fieldIndex:n.number.isRequired,field:n.object.isRequired};const vs=({boxId:a,fieldId:s,elementId:u,elementIndex:t,parentFieldId:o})=>{const i=X(),{group:d}=Q(b=>b.metaState),x=()=>`${se(d.boxes,a,s)}.visibilityConditions`,{control:v}=U(),{remove:r}=ue({control:v,name:x()}),[c,p]=w.useState(!1),T=[e.jsx(z,{style:P.SUCCESS,onClick:b=>{b.preventDefault(),i(Et({boxId:a,fieldId:s,parentFieldId:o,elementId:u})),r(t),p(!c)},children:l("Yes")}),e.jsx(z,{style:P.DANGER,onClick:b=>{b.preventDefault(),p(!c)},children:l("No")})];return e.jsxs("div",{children:[e.jsx(ve,{title:l("Confirm deleting conditional rendering element"),visible:c,buttons:T,children:l("Are you sure?")}),e.jsx("a",{href:"#",onClick:b=>{b.preventDefault(),p(!c)},children:e.jsx($,{icon:!1,tip:l("Delete"),label:e.jsx(L,{icon:"bx-trash",width:18,color:"#F94144"})})})]})};vs.propTypes={boxId:n.string.isRequired,fieldId:n.string.isRequired,elementId:n.string.isRequired,elementIndex:n.number.isRequired,parentFieldId:n.string};const fs=({elementIndex:a,boxIndex:s,fieldIndex:u,boxId:t,fieldId:o,element:i,parentFieldIndex:d,parentFieldId:x,isLast:v})=>{const{POST_TAX:r,POST_ID:c,USER_ID:p,optionPage:T}=document.globals.globals.find,{group:b}=Q(G=>G.metaState),h=G=>`${se(b.boxes,t,o)}.visibilityConditions.${a}.${G}`,{register:f,formState:{errors:m},control:k,setValue:F,clearErrors:A}=U(),j=V({control:k,name:"belongs"}),O=V({control:k,name:"boxes"}),g=V({control:k,name:`${se(b.boxes,t,o)}.type`}),C=V({control:k,name:h("type")}),S=V({control:k,name:h("operator")}),R=V({control:k,name:h("value")}),y=V({control:k,name:h("logic")}),N=V({control:k,name:h("frontEnd")}),I=V({control:k,name:h("backEnd")}),[M,D]=w.useState([]);w.useEffect(()=>{j&&j.map(G=>{G.belongsTo===oe.TAXONOMY&&xe("fetchTermsAction",{taxonomy:G.find,format:"short"}).then(B=>{ye(B)&&ye(M)&&D([...M,...B])})})},[j]);const de=()=>{const G=[E.GALLERY,E.IMAGE,E.AUDIO,E.AUDIO_MULTI,E.VIDEO,E.FILE,E.RATING,E.NUMBER,E.PASSWORD,E.TEXT,E.TEXTAREA,E.CHECKBOX,E.RADIO,E.SELECT,E.SELECT_MULTI,E.DATE,E.DATE_TIME,E.TIME,E.URL,E.PHONE,E.EMAIL,E.COLOR,E.CURRENCY,E.WEIGHT,E.LENGTH,E.TOGGLE,E.POST,E.POST_OBJECT,E.POST_OBJECT_MULTI,E.TERM_OBJECT,E.TERM_OBJECT_MULTI,E.USER,E.USER_MULTI];let B=!1,H=[],ce=[],Y=[{value:null,label:l("Select")}];if(O.map(J=>{if(typeof J.fields<"u"&&J.fields.length>0){const ie=Ft(J);ie&&ie.length>0&&ie.filter(ne=>ne.field&&ne.field.id===o).map(ne=>{ne.fields&&ne.fields.map(fe=>{if(G.includes(fe.type)&&fe.id!==o){const re=()=>{let pe="";return pe+=`[${J.label?J.label:J.name}] `,pe+=fe.label?fe.label:fe.name,pe};ce.push({label:re(),value:je({type:"OTHER_FIELDS",value:fe.id})})}})})}}),G.includes(g)&&H.push({value:je({type:"VALUE",value:"VALUE"}),label:l("Value")}),j&&j.map(J=>{J.belongsTo===oe.CUSTOM_POST_TYPE&&(H.push({value:je({type:"POST_ID",value:"POST_ID"}),label:l("Post")}),B=!0),J.belongsTo===oe.TAXONOMY&&H.push({value:je({type:"TERM_ID",value:"TERM_ID"}),label:l("Term")}),J.belongsTo===oe.USER&&H.push({value:je({type:"USER_ID",value:"USER_ID"}),label:l("User")}),J.belongsTo===oe.OPTION_PAGE&&H.push({value:je({type:"OPTION_PAGE",value:"OPTION_PAGE"}),label:l("Option page")})}),H&&H.length>0&&Y.push({label:l("This field"),options:H}),B&&r&&r.length>0){let J={label:l("Related taxonomies"),options:[]};r.map(ie=>{ie.value!==null&&J.options.push({value:je({type:"TAXONOMY",value:ie.label}),label:ie.label})}),Y.push(J)}if(p&&p.length>0){let J={label:l("Users"),options:[{value:je({type:"USER",value:l("Logged user")}),label:l("Logged user")}]};Y.push(J)}return ce&&ce.length>0&&Y.push({label:l("Other fields"),options:ce}),Y},_=()=>typeof C>"u",K=G=>{if(!C||typeof C>"u")return[{value:null,label:l("Select")}];const B=typeof C=="object"?C:ol(C),H=B.type,ce=B.value;if(H==="VALUE")return G===E.SELECT_MULTI?[{value:null,label:l("Select")},{value:"IN",label:l("is included in")},{value:"NOT_IN",label:l("is not included in")},{value:"BLANK",label:l("is empty")},{value:"NOT_BLANK",label:l("is not empty")}]:G===E.NUMBER||G===E.CURRENCY||G===E.WEIGHT||G===E.LENGTH||G===E.DATE||G===E.DATE_TIME||G===E.TIME?[{value:null,label:l("Select")},{value:"=",label:l("is equal to")},{value:"!=",label:l("is not equal to")},{value:"<",label:l("is less than")},{value:">",label:l("is greater than")},{value:"<=",label:l("is less than or equal to")},{value:">=",label:l("is greater than or equal to")},{value:"BLANK",label:l("is empty")},{value:"NOT_BLANK",label:l("is not empty")}]:G===E.TOGGLE?[{value:null,label:l("Select")},{value:"CHECKED",label:l("is checked")},{value:"NOT_CHECKED",label:l("is not checked")}]:[{value:null,label:l("Select")},{value:"=",label:l("is equal to")},{value:"!=",label:l("is not equal to")},{value:"LIKE",label:l("is like to")},{value:"NOT_LIKE",label:l("is not like")},{value:"BLANK",label:l("is empty")},{value:"NOT_BLANK",label:l("is not empty")}];if(H==="OTHER_FIELDS"){const Y=kt(O,ce);return Y&&Y.type===E.GALLERY||Y&&Y.type===E.IMAGE||Y&&Y.type===E.AUDIO||Y&&Y.type===E.AUDIO_MULTI||Y&&Y.type===E.VIDEO||Y&&Y.type===E.FILE?[{value:null,label:l("Select")},{value:"BLANK",label:l("is empty")},{value:"NOT_BLANK",label:l("is not empty")}]:Y&&Y.type===E.SELECT_MULTI?[{value:null,label:l("Select")},{value:"IN",label:l("is included in")},{value:"NOT_IN",label:l("is not included in")},{value:"BLANK",label:l("is empty")},{value:"NOT_BLANK",label:l("is not empty")}]:Y&&Y.type===E.NUMBER||Y&&Y.type===E.CURRENCY||Y&&Y.type===E.WEIGHT||Y&&Y.type===E.LENGTH||Y&&Y.type===E.DATE||Y&&Y.type===E.TIME?[{value:null,label:l("Select")},{value:"=",label:l("is equal to")},{value:"!=",label:l("is not equal to")},{value:"<",label:l("is less than")},{value:">",label:l("is greater than")},{value:"<=",label:l("is less than or equal to")},{value:">=",label:l("is greater than or equal to")},{value:"BLANK",label:l("is empty")},{value:"NOT_BLANK",label:l("is not empty")}]:Y&&Y.type===E.TOGGLE?[{value:null,label:l("Select")},{value:"CHECKED",label:l("is checked")},{value:"NOT_CHECKED",label:l("is not checked")}]:[{value:null,label:l("Select")},{value:"=",label:l("is equal to")},{value:"!=",label:l("is not equal to")},{value:"LIKE",label:l("is like to")},{value:"NOT_LIKE",label:l("is not like")},{value:"BLANK",label:l("is empty")},{value:"NOT_BLANK",label:l("is not empty")}]}return H==="POST_ID"||H==="TERM_ID"||H==="USER_ID"||H==="OPTION_PAGE"||H==="TAXONOMY"||H==="USER"?[{value:null,label:l("Select")},{value:"=",label:l("is equal to")},{value:"!=",label:l("is not equal to")},{value:"IN",label:l("is included in")},{value:"NOT_IN",label:l("is not included in")}]:[{value:null,label:l("Select")},{value:"=",label:l("is equal to")},{value:"!=",label:l("is not equal to")},{value:"IN",label:l("is included in")},{value:"NOT_IN",label:l("is not included in")},{value:"BLANK",label:l("is empty")},{value:"NOT_BLANK",label:l("is not empty")}]},he=()=>C&&S&&S!=="BLANK"&&S!=="NOT_BLANK"&&S!=="CHECKED"&&S!=="NOT_CHECKED",te=()=>{let G=typeof C=="object"?C:ol(C);typeof G=="string"&&(G=JSON.parse(G));const B=G.type,H=G.value,ce=S==="IN"||S==="NOT_IN",Y=S==="CHECKED"||S==="NOT_CHECKED",J={value:null,label:l("Select")};if(B==="POST_ID"){const ie=()=>{if(i.operator==="IN"||i.operator==="NOT_IN"){const ne=R||i.value,fe=typeof ne=="string"?ne.split(","):ne;let re=[];return fe.map(pe=>re.push(parseInt(pe))),re}return R||i.value};return ce?e.jsx(q.Fragment,{children:e.jsx(Ne,{id:h("value"),defaultValue:ie(),placeholder:l("Select posts"),values:c,errors:m,register:f,setValue:F,clearErrors:A,validate:{required:l("This field is mandatory")}})}):e.jsx(q.Fragment,{children:e.jsx(W,{id:h("value"),defaultValue:ie(),placeholder:l("Select posts"),values:ye(c)?c:[],errors:m,register:f,validate:{required:l("This field is mandatory")}})})}if(B==="USER")return ye(p)&&p&&p.length>0?ce?e.jsx(q.Fragment,{children:e.jsx(Ne,{id:h("value"),defaultValue:R||i.value,placeholder:l("Select users"),errors:m,register:f,values:p,setValue:F,clearErrors:A,validate:{required:l("This field is mandatory")}})}):e.jsx(q.Fragment,{children:e.jsx(W,{id:h("value"),defaultValue:R||i.value,placeholder:l("Select user"),errors:m,register:f,values:p,validate:{required:l("This field is mandatory")}})}):e.jsx(q.Fragment,{children:e.jsx(ae,{id:h("value"),errors:m,register:f,defaultValue:R||i.value,placeholder:l("value"),validate:{required:l("This field is mandatory")}})});if(B==="TAXONOMY"){if(r&&r.length>0){const ie=r.filter(ne=>ne.label===H);if(ie&&ie.length===1&&ie[0].options)return ce?e.jsx(q.Fragment,{children:e.jsx(Ne,{id:h("value"),defaultValue:R||i.value,placeholder:l("Select taxonomies"),errors:m,register:f,values:ie[0].options,setValue:F,clearErrors:A,validate:{required:l("This field is mandatory")}})}):e.jsx(q.Fragment,{children:e.jsx(W,{id:h("value"),defaultValue:R||i.value,placeholder:l("Select taxonomy"),errors:m,register:f,values:ie.length>0&&ie[0].options&&ye(ie[0].options)?[J,...ie[0].options]:[],validate:{required:l("This field is mandatory")}})})}return e.jsx(q.Fragment,{children:e.jsx(ae,{id:h("value"),errors:m,register:f,defaultValue:R||i.value,placeholder:l("value"),validate:{required:l("This field is mandatory")}})})}if(B==="TERM_ID"){const ie=()=>{if(i.operator==="IN"||i.operator==="NOT_IN"){const ne=R||i.value,fe=typeof ne=="string"?ne.split(","):ne;let re=[];return fe.map(pe=>re.push(parseInt(pe))),re}return R||i.value};return ce?e.jsx(q.Fragment,{children:e.jsx(Ne,{id:h("value"),defaultValue:ie(),placeholder:l("Select taxonomies"),errors:m,register:f,values:M,setValue:F,clearErrors:A,validate:{required:l("This field is mandatory")}})}):e.jsx(q.Fragment,{children:e.jsx(W,{id:h("value"),defaultValue:ie(),placeholder:l("Select taxonomy"),errors:m,register:f,values:ye(M)?[J,...M]:[],validate:{required:l("This field is mandatory")}})})}if(B==="OPTION_PAGE"){const ie=()=>{if(i.operator==="IN"||i.operator==="NOT_IN"){const ne=R||i.value;return typeof ne=="string"?ne.split(","):ne}return R||i.value};return ce?e.jsx(q.Fragment,{children:e.jsx(Ne,{id:h("value"),defaultValue:ie(),placeholder:l("Select pages"),errors:m,register:f,values:T,setValue:F,clearErrors:A,validate:{required:l("This field is mandatory")}})}):e.jsx(q.Fragment,{children:e.jsx(W,{id:h("value"),defaultValue:ie(),placeholder:l("Select page"),errors:m,register:f,values:ye(T)?T:[],validate:{required:l("This field is mandatory")}})})}if(B==="USER_ID"){const ie=()=>{if(i.operator==="IN"||i.operator==="NOT_IN"){const ne=R||i.value;return typeof ne=="string"?ne.split(","):ne}return R||i.value};return ce?e.jsx(q.Fragment,{children:e.jsx(Ne,{id:h("value"),defaultValue:ie(),placeholder:l("Select users"),errors:m,register:f,values:p,setValue:F,clearErrors:A,validate:{required:l("This field is mandatory")}})}):e.jsx(q.Fragment,{children:e.jsx(W,{id:h("value"),defaultValue:ie(),placeholder:l("Select user"),errors:m,register:f,values:ye(p)?[J,...p]:[],validate:{required:l("This field is mandatory")}})})}return Y?e.jsx(q.Fragment,{children:e.jsx(ae,{id:h("value"),disabled:!0,register:f,errors:m,placeholder:`${ce?l("Insert values separated by comma. Ex: 12, 54, foo"):l("value")}`,defaultValue:R||i.value})}):e.jsx(q.Fragment,{children:e.jsx(ae,{id:h("value"),register:f,errors:m,placeholder:`${ce?l("Insert values separated by comma. Ex: 12, 54, foo"):l("value")}`,defaultValue:R||i.value,validate:{required:l("This field is mandatory")}})})};return e.jsxs("div",{className:"i-flex-center s-8 w-100",children:[e.jsx(ge,{id:h("id"),value:i.id,register:f}),e.jsx("div",{className:"w-60",children:e.jsx(W,{id:h("type"),placeholder:l("Select option"),register:f,values:de(),errors:m,defaultValue:C||je(i.type),validate:{required:l("This field is mandatory")}})}),e.jsx("div",{className:"w-40",children:e.jsx(W,{id:h("operator"),placeholder:l("Select option"),register:f,disabled:_(),values:K(g),errors:m,defaultValue:C||i.operator,validate:{required:l("This field is mandatory")}})}),e.jsx("div",{className:"w-100",children:he()?te():e.jsx(ae,{id:h("value"),placeholder:l("Value"),register:f,errors:m,value:"",defaultValue:R||i.value,disabled:!0})}),e.jsx("div",{className:"w-20",children:!v&&e.jsx(q.Fragment,{children:e.jsx(W,{id:h("logic"),placeholder:l("Select option"),register:f,values:[{label:l("AND"),value:"AND"},{label:l("OR"),value:"OR"}],errors:m,defaultValue:y||i.logic,validate:{required:l("This field is mandatory")}})})}),e.jsxs("div",{className:"i-flex-center s-8",children:[e.jsx($,{label:e.jsx(Ie,{id:h("frontEnd"),control:k,defaultValue:typeof N=="boolean"?N:i.frontEnd,errors:m,icon:"bx:devices",disabled:!he()}),tip:l("Show in Front-End"),icon:!1}),e.jsx($,{label:e.jsx(Ie,{id:h("backEnd"),control:k,defaultValue:typeof I=="boolean"?I:i.backEnd,errors:m,icon:"bx:cog",disabled:!he()}),tip:l("Show in Back-End"),icon:!1})]}),e.jsx(vs,{boxId:t,fieldId:o,elementId:i.id,parentFieldId:x,elementIndex:a})]})};fs.propTypes={elementIndex:n.number.isRequired,boxIndex:n.number.isRequired,fieldIndex:n.number.isRequired,boxId:n.string.isRequired,fieldId:n.string.isRequired,element:n.object.isRequired,isLast:n.bool.isRequired,parentFieldIndex:n.string,parentFieldId:n.string};const gs=({boxIndex:a,fieldIndex:s,boxId:u,field:t,parentFieldIndex:o,parentFieldId:i})=>{const d=X(),[x]=Re(),v=()=>{const r={id:me(),type:null,operator:"=",value:"",logic:null,frontEnd:!0,backEnd:!0};d(wt({boxId:u,fieldId:t.id,parentFieldId:i,element:r}))};return e.jsxs("div",{ref:x,className:t.visibilityConditions&&t.visibilityConditions.length>0?"flex-column s-24":"",children:[t.visibilityConditions&&t.visibilityConditions.length>0?e.jsx(q.Fragment,{children:t.visibilityConditions.map((r,c)=>e.jsx(fs,{elementIndex:c,boxIndex:a,fieldIndex:s,boxId:u,fieldId:t.id,element:r,parentFieldIndex:o,parentFieldId:i,isLast:c===t.visibilityConditions.length-1},r.id))}):e.jsx(tl,{style:P.WARNING,children:l('No conditions are present, click on "Add condition" button to add the first one.')}),e.jsx("span",{children:e.jsx("a",{href:"#",className:t.visibilityConditions&&t.visibilityConditions.length>0?"":"mt-12",onClick:r=>{r.preventDefault(),v()},children:l("Add condition")})})]})};gs.propTypes={boxIndex:n.number.isRequired,fieldIndex:n.number.isRequired,boxId:n.string.isRequired,parentFieldIndex:n.string,parentFieldId:n.string,field:n.object.isRequired};const js=({boxId:a,fieldId:s,ruleId:u,ruleIndex:t,parentFieldId:o})=>{const i=X(),{group:d}=Q(b=>b.metaState),x=()=>`${se(d.boxes,a,s)}.validationRules`,{control:v}=U(),{remove:r}=ue({control:v,name:x()}),[c,p]=w.useState(!1),T=[e.jsx(z,{style:P.SUCCESS,onClick:b=>{b.preventDefault(),r(t),i(It({boxId:a,fieldId:s,parentFieldId:o,ruleId:u})),p(!c)},children:l("Yes")}),e.jsx(z,{style:P.DANGER,onClick:b=>{b.preventDefault(),p(!c)},children:l("No")})];return e.jsxs("div",{children:[e.jsx(ve,{title:l("Confirm deleting validation rule"),visible:c,buttons:T,children:l("Are you sure?")}),e.jsx("a",{href:"#",onClick:b=>{b.preventDefault(),p(!c)},children:e.jsx($,{icon:!1,tip:l("Delete"),label:e.jsx(L,{icon:"bx-trash",width:18,color:"#F94144"})})})]})};js.propTypes={boxId:n.string.isRequired,fieldId:n.string.isRequired,ruleId:n.string.isRequired,ruleIndex:n.number.isRequired,parentFieldId:n.string};const ys=w.memo(({ruleIndex:a,boxIndex:s,fieldIndex:u,boxId:t,fieldId:o,rule:i,formId:d,parentFieldIndex:x,parentFieldId:v})=>{const r=N=>`${d(`validationRules.${a}.${N}`)}`,{register:c,formState:{errors:p},control:T,setValue:b}=U(),h=V({control:T,name:r("condition")}),f=V({control:T,name:r("value")}),m=V({control:T,name:r("message")}),k=()=>h||i.condition,F=()=>m||(i.message?i.message:A(k())),A=N=>{let I;switch(N){case"blank":I="Value is not blank";break;case"not_blank":I="Value is blank";break;case"=":I="Value is not equal to {{v}}";break;case"!=":I="Value is equals to {{v}}";break;case">":I="Value is lower or equals than {{v}}";break;case">=":I="Value is lower than {{v}}";break;case"<":I="Value is greatest or equals than {{v}}";break;case"<=":I="Value is greatest than {{v}}";break;case"max":I="The maximum length is {{v}}";break;case"min":I="The minimum length is {{v}}";break;case"regex":I="Regex value is not matching {{v}}";break}return l(I)},j=N=>N==="blank"||N==="not_blank",O=N=>{C(A(N)),b(r("message"),A(N)),R(j(N)),j(N)&&b(r("value"),null)},[g,C]=w.useState(F()),[S,R]=w.useState(j(h||i.condition)),y=[{value:"blank",label:l("is empty")},{value:"not_blank",label:l("is not empty")},{value:"=",label:l("is equal to")},{value:"!=",label:l("is not equal to")},{value:">",label:l("is greater than")},{value:">=",label:l("is greater than or equal to")},{value:"<",label:l("is less than")},{value:"<=",label:l("is less than or equal to")},{value:"max",label:l("max length is")},{value:"min",label:l("min length is")},{value:"regex",label:l("regular expression")}];return e.jsxs("div",{className:"i-flex-center s-24 w-100",children:[e.jsx(ge,{id:r("id"),value:i.id,register:c}),e.jsx("div",{className:"w-40",children:e.jsx(W,{id:r("condition"),register:c,defaultValue:k(),values:y,errors:p,onChangeCapture:N=>O(N.target.value),validate:{required:l("This field is mandatory")}})}),!S&&e.jsx("div",{className:"w-100",children:e.jsx(ae,{id:r("value"),register:c,errors:p,defaultValue:f||i.value,validate:{required:l("This field is mandatory"),maxLength:{value:255,message:"max length is 255"}}})}),e.jsx("div",{className:"w-100",children:e.jsx(ae,{id:r("message"),register:c,errors:p,defaultValue:g,validate:{required:l("This field is mandatory"),maxLength:{value:255,message:"max length is 255"}}})}),e.jsx(js,{boxId:t,fieldId:o,ruleId:i.id,parentFieldId:v,ruleIndex:a})]})});ys.propTypes={formId:n.func.isRequired,ruleIndex:n.number.isRequired,boxIndex:n.number.isRequired,fieldIndex:n.number.isRequired,boxId:n.string.isRequired,fieldId:n.string.isRequired,rule:n.object.isRequired,parentFieldIndex:n.string,parentFieldId:n.string};const Ns=({boxIndex:a,fieldIndex:s,boxId:u,field:t,formId:o,parentFieldIndex:i,parentFieldId:d})=>{const x=X(),[v]=Re(),r=()=>{const c={id:me(),condition:"=",value:""};x(Ot({boxId:u,fieldId:t.id,parentFieldId:d,rule:c}))};return e.jsxs("div",{ref:v,className:t.validationRules&&t.validationRules.length>0?"flex-column s-24":"",children:[t.validationRules&&t.validationRules.length>0?e.jsx(q.Fragment,{children:t.validationRules.map((c,p)=>e.jsx(ys,{formId:o,boxId:u,fieldId:t.id,fieldIndex:s,rule:c,boxIndex:a,parentFieldIndex:i,parentFieldId:d,ruleIndex:p}))}):e.jsx(tl,{style:P.WARNING,children:l('No rules already created. Create the first one now by clicking the button "Add rule"!')}),e.jsx("a",{href:"#",className:t.validationRules&&t.validationRules.length>0?"":"mt-12",onClick:c=>{c.preventDefault(),r()},children:l("Add rule")})]})};Ns.propTypes={formId:n.func.isRequired,boxIndex:n.number.isRequired,fieldIndex:n.number.isRequired,boxId:n.string.isRequired,field:n.object.isRequired,parentFieldIndex:n.string,parentFieldId:n.string};const Ts=({boxId:a,fieldId:s,permissionId:u,permissionIndex:t,parentFieldId:o})=>{const i=X(),{group:d}=Q(b=>b.metaState),x=()=>`${se(d.boxes,a,s)}.permissions`,{control:v}=U(),{remove:r}=ue({control:v,name:x()}),[c,p]=w.useState(!1),T=[e.jsx(z,{style:P.SUCCESS,onClick:b=>{b.preventDefault(),i(qt({boxId:a,fieldId:s,parentFieldId:o,permissionId:u})),r(t),p(!c)},children:l("Yes")}),e.jsx(z,{style:P.DANGER,onClick:b=>{b.preventDefault(),p(!c)},children:l("No")})];return e.jsxs("div",{children:[e.jsx(ve,{title:l("Confirm deleting permission element"),visible:c,buttons:T,children:l("Are you sure?")}),e.jsx("a",{href:"#",onClick:b=>{b.preventDefault(),p(!c)},children:e.jsx($,{icon:!1,tip:l("Delete"),label:e.jsx(L,{icon:"bx-trash",width:18,color:"#F94144"})})})]})};Ts.propTypes={boxId:n.string.isRequired,fieldId:n.string.isRequired,permissionId:n.string.isRequired,permissionIndex:n.number.isRequired,parentFieldId:n.string};const Ss=w.memo(({permissionIndex:a,boxIndex:s,fieldIndex:u,boxId:t,fieldId:o,permission:i,formId:d,parentFieldIndex:x,parentFieldId:v})=>{const{group:r}=Q(b=>b.metaState),c=b=>`${se(r.boxes,t,o)}.permissions.${a}.${b}`,{register:p,formState:{errors:T}}=U();return e.jsxs(q.Fragment,{children:[e.jsx(ge,{id:c("id"),value:i.id,register:p}),e.jsx(ge,{id:c("entityId"),value:o,register:p}),e.jsxs("tr",{id:i.id,children:[e.jsx("td",{children:e.jsx(W,{register:p,id:c("userRole"),values:document.globals.globals.roles,errors:T,defaultValue:i.userRole})}),e.jsx("td",{children:e.jsxs("label",{className:"checkbox",htmlFor:c("permissions.edit"),children:[e.jsx("input",{name:c("permissions.edit"),value:!0,defaultChecked:i.permissions.edit===!0,type:"checkbox",id:c("permissions.edit"),...p(c("permissions.edit"),{})}),e.jsx("span",{})]})}),e.jsx("td",{children:e.jsxs("label",{className:"checkbox",htmlFor:c("permissions.read"),children:[e.jsx("input",{name:c("permissions.read"),value:!0,defaultChecked:i.permissions.read===!0,type:"checkbox",id:c("permissions.read"),...p(c("permissions.read"),{})}),e.jsx("span",{})]})}),e.jsx("td",{children:e.jsx(Ts,{permissionIndex:a,boxId:t,fieldId:o,permissionId:i.id,parentFieldId:v})})]})]})});Ss.propTypes={formId:n.func.isRequired,permissionIndex:n.number.isRequired,boxIndex:n.number.isRequired,fieldIndex:n.number.isRequired,boxId:n.string.isRequired,fieldId:n.string.isRequired,permission:n.object.isRequired,parentFieldIndex:n.string,parentFieldId:n.string};const Cs=({boxIndex:a,fieldIndex:s,boxId:u,field:t,parentFieldIndex:o,formId:i,parentFieldId:d})=>{const x=document.globals;x.settings;const v=x.globals,r=X(),[c]=Re(),p=()=>{const T={id:me(),entityId:t.id,userRole:"editor",permissions:{edit:!0,read:!0}};r(At({boxId:u,fieldId:t.id,parentFieldId:d,permission:T}))};return e.jsxs("div",{ref:c,className:t.permissions&&t.permissions.length>0?"flex-column s-24":"",children:[t.permissions&&t.permissions.length>0?e.jsx("div",{className:"responsive",children:e.jsxs("table",{className:`acpt-table rounded all-white with-border ${v.is_rtl?"rtl":""}`,children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:l("User role")}),e.jsx("th",{children:l("Edit")}),e.jsx("th",{children:l("Read")}),e.jsx("th",{style:{width:"10px"}})]})}),e.jsx("tbody",{ref:c,children:t.permissions.map((T,b)=>e.jsx(Ss,{formId:i,permissionIndex:b,boxIndex:a,fieldIndex:s,boxId:u,fieldId:t.id,permission:T,parentFieldIndex:o,parentFieldId:d}))})]})}):e.jsx(tl,{style:P.WARNING,children:l('No permissions are present, click on "Add permission" button to add the first one.')}),e.jsx("span",{children:e.jsx("a",{href:"#",className:t.permissions&&t.permissions.length>0?"":"mt-12",onClick:T=>{T.preventDefault(),p()},children:l("Add permission")})})]})};Cs.propTypes={boxIndex:n.number.isRequired,fieldIndex:n.number.isRequired,boxId:n.string.isRequired,parentFieldIndex:n.string,parentFieldId:n.string,field:n.object.isRequired,formId:n.func.isRequired};const ii=({boxIndex:a,fieldIndex:s,boxId:u,field:t,parentFieldIndex:o,parentFieldId:i,parentBlockId:d})=>{const{attributes:x,listeners:v,setNodeRef:r,isDragging:c,transform:p}=Ae({id:t.id}),T={transform:Me.Translate.toString(p)};X();const{group:b,selectedElementsType:h}=Q(S=>S.metaState),{formState:{errors:f},control:m}=U(),k=S=>De(b.boxes,u,t.id,S),F=V({control:m,name:De(b.boxes,u,t.id,"name")}),A=V({control:m,name:De(b.boxes,u,t.id,"label")}),j=V({control:m,name:De(b.boxes,u,t.id,"type")}),O=()=>{const S=De(b.boxes,u,t.id,"name"),R=Je(f,S);return R?e.jsx("span",{className:"invalid-feedback",children:l(R.message)}):F||t.name},g=()=>typeof A=="string"?A:t.label,C=()=>j||t.type;return e.jsxs(q.Fragment,{children:[e.jsx(_l,{boxId:u,field:t,parentFieldId:i,parentBlockId:d}),e.jsx("tr",{id:t.id,ref:r,style:T,className:`bg-white ${c?"b-rounded z-100 with-drop-shadow":""}`,children:e.jsx("td",{style:{background:da()},className:"with-active-border",colSpan:7,children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex-between s-8 mb-24 for-xs",children:[e.jsxs("span",{className:"i-flex-center s-8",children:[(i||d)&&e.jsx($,{label:e.jsx(L,{icon:"tabler:arrow-guide",color:"#02C39A",width:18}),tip:l("Child field"),icon:!1}),e.jsx("span",{className:"cursor-move top-2 handle",...x,...v,children:e.jsx(L,{icon:"bx:dots-vertical-rounded",color:Ee(),width:18})}),h!=="box"&&h!=="block"&&wl(t.isSaved)&&e.jsx(Xe,{elementType:"field",element:Ol(t,u,i,d)}),e.jsxs("div",{className:"i-flex-center s-8 text-ellipsis",children:[e.jsx("h3",{children:O()}),e.jsx("span",{className:"color-gray",children:g()})]}),e.jsx(Dl,{boxId:u,field:t}),e.jsx(ml,{fieldType:C(),css:"with-border b-rounded p-8"})]}),e.jsx(Vl,{boxIndex:a,field:t,boxId:u,fieldIndex:s,parentFieldIndex:o,parentFieldId:i,parentBlockId:d})]}),e.jsx("div",{children:e.jsxs(Qt,{children:[e.jsx(ll,{title:e.jsxs(q.Fragment,{children:[e.jsx("span",{className:"visible-xs",children:e.jsx(L,{icon:"bx:cog",width:24})}),e.jsx("span",{className:"hidden-xs",children:l("BASIC OPTIONS")})]}),children:e.jsx(Ya,{boxIndex:a,fieldIndex:s,formId:k,boxId:u,field:t})}),e.jsx(ll,{title:e.jsxs(q.Fragment,{children:[e.jsx("span",{className:"visible-xs",children:e.jsx(L,{icon:"solar:tuning-2-outline",width:24})}),e.jsx("span",{className:"hidden-xs",children:l("ADVANCED OPTIONS")})]}),children:e.jsx(bs,{boxIndex:a,fieldIndex:s,field:t,formId:k})}),e.jsx(ll,{title:e.jsxs(q.Fragment,{children:[e.jsx("span",{className:"visible-xs",children:e.jsx(L,{icon:"bx:low-vision",width:24})}),e.jsx("span",{className:"hidden-xs",children:l("CONDITIONAL LOGIC")})]}),children:e.jsx(gs,{boxIndex:a,fieldIndex:s,boxId:u,field:t,parentFieldIndex:o,parentFieldId:i,formId:k})}),nl(j||t.type)&&e.jsx(ll,{title:e.jsxs(q.Fragment,{children:[e.jsx("span",{className:"visible-xs",children:e.jsx(L,{icon:"bx:check-double",width:24})}),e.jsx("span",{className:"hidden-xs",children:l("VALIDATION RULES")})]}),children:e.jsx(Ns,{boxIndex:a,fieldIndex:s,boxId:u,field:t,parentFieldIndex:o,parentFieldId:i,formId:k})}),e.jsx(ll,{title:e.jsxs(q.Fragment,{children:[e.jsx("span",{className:"visible-xs",children:e.jsx(L,{icon:"bx:lock",width:24})}),e.jsx("span",{className:"hidden-xs",children:l("PERMISSIONS")})]}),children:e.jsx(Cs,{boxIndex:a,fieldIndex:s,boxId:u,field:t,parentFieldIndex:o,parentFieldId:i,formId:k})})]})})]})})})]})},xl=({boxIndex:a,fieldIndex:s,boxId:u,field:t,parentFieldIndex:o,parentFieldId:i,parentBlockId:d,isMainView:x,bulkEdit:v=!1})=>{const{closedElements:r}=Q(p=>p.metaState),c=()=>{const p=r.filter(T=>T===t.id);return typeof p>"u"?!1:p.length>0};return v?e.jsx(Nl,{bulkEdit:v,isMainView:x,boxIndex:a,field:t,boxId:u,fieldIndex:s,parentFieldIndex:o,parentFieldId:i,parentBlockId:d}):c()?e.jsx(Nl,{bulkEdit:v,isMainView:x,boxIndex:a,field:t,boxId:u,fieldIndex:s,parentFieldIndex:o,parentFieldId:i,parentBlockId:d}):e.jsx(ii,{boxIndex:a,field:t,boxId:u,fieldIndex:s,parentFieldIndex:o,parentFieldId:i,parentBlockId:d})};xl.propTypes={boxIndex:n.number.isRequired,fieldIndex:n.number.isRequired,boxId:n.string.isRequired,field:n.object.isRequired,parentFieldIndex:n.string,parentFieldId:n.string,parentBlockId:n.string,isMainView:n.bool.isRequired,bulkEdit:n.bool};const al=({boxIndex:a,boxId:s,parentFieldIndex:u,parentFieldId:t,parentBlockId:o,fields:i,bulkEdit:d=!1,addFieldEnabled:x=!0})=>{const v=document.globals;v.settings;const r=v.globals,c=X(),{group:p,selectedElements:T,selectedElementsType:b}=Q(S=>S.metaState),[h,f]=w.useState(!1),[m]=Re(),k=()=>o?`${se(p.boxes,s,o)}.fields`:t?`${se(p.boxes,s,t)}.children`:`boxes.${a}.fields`,F=`select-fields-${zs()}`,{control:A}=U(),{move:j}=ue({control:A,name:k()}),O=S=>{const{active:R,over:y}=S;if(R.id===y.id)return;const N=i.findIndex(D=>D.id===R.id),I=i.findIndex(D=>D.id===y.id),M=Fe(i,N,I);j(N,I),c(ze({boxId:s,parentFieldId:t,parentBlockId:o,sortedFields:M}))},g=()=>{const S={id:me(),boxId:s,name:"meta_box_field",label:"meta box field",type:E.TEXT,defaultValue:"",description:"",isRequired:!1,showInArchive:!1,quickEdit:!1,filterableInAdmin:!1,sort:1,advancedOptions:[],options:[],blocks:[],blockId:o||null,validationRules:[],visibilityConditions:[],hasManyRelation:[],children:[],parentId:t||null,isATextualField:!0,isFilterable:!0,isSaved:!1};c(Ye({boxId:s,parentFieldId:t,parentBlockId:o,field:S}))};w.useEffect(()=>{var S;let R;t?R=T.filter(y=>y.boxId===s&&t===y.parentFieldId):R=T.filter(y=>y.boxId===s&&!y.parentFieldId),f(i.length===((S=R)===null||S===void 0?void 0:S.length))},[T]);const C=S=>{i&&i.map(R=>{const y=Ol(R,s,t,o);c(He({element:y,selected:S,type:"field"})),y.children&&y.children.map(N=>{c(He({element:N,selected:S,type:"field"})),N.children&&N.children.map(I=>{c(He({element:I,selected:S,type:"field"}))})})})};return e.jsx(q.Fragment,{children:i&&(i==null?void 0:i.length)>0?e.jsxs("div",{className:`responsive ${t?"with-shadow b-rounded":""}`,children:[e.jsxs("table",{className:`acpt-table  ${r.is_rtl?"rtl":""}`,children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:{width:"10px"},children:b!=="box"&&b!=="block"&&e.jsxs("label",{className:"checkbox",htmlFor:F,style:{marginLeft:"26px"},children:[e.jsx("input",{id:F,type:"checkbox",checked:h,onChange:S=>{C(S.target.checked)}}),e.jsx("span",{})]})}),e.jsx("th",{className:"hidden-xs",style:{width:"20%"},children:l("Label")}),e.jsx("th",{style:{width:"20%"},children:l("Slug")}),e.jsx("th",{className:"hidden-xs",style:{width:"10px"}}),e.jsx("th",{style:{width:"20%"},children:l("Type")}),e.jsx("th",{children:l("Actions")})]})}),e.jsx("tbody",{ref:m,children:e.jsx(Ce,{onDragEnd:O,items:i,children:i&&i.map((S,R)=>e.jsx(xl,{bulkEdit:d,isMainView:!1,boxIndex:a,fieldIndex:R,boxId:s,field:S,parentFieldIndex:u,parentFieldId:t,parentBlockId:o}))})})]}),x&&e.jsx("div",{className:"p-24",children:e.jsx(z,{type:"button",style:P.SECONDARY,onClick:S=>{S.preventDefault(),g()},children:l("Add field")})})]}):e.jsx("div",{className:`${t?"":"mx-24 pb-24"}`,children:e.jsxs("div",{className:"b-maxi b-rounded p-24 flex-column s-12 text-center",children:[e.jsx("span",{children:l('No field box already created. Create the first one now by clicking the button "Add field box"!')}),x&&e.jsx("div",{children:e.jsx(z,{type:"button",style:P.SECONDARY,onClick:S=>{S.preventDefault(),g()},children:l("Add field")})})]})})})};al.propTypes={boxIndex:n.number.isRequired,boxId:n.string.isRequired,fields:n.array.isRequired,parentFieldIndex:n.string,parentFieldId:n.string,parentBlockId:n.string,bulkEdit:n.bool,addFieldEnabled:n.bool};const Rs=({index:a,box:s,bulkEdit:u=!1,setActiveTab:t})=>{const{attributes:o,listeners:i,setNodeRef:d,isDragging:x,transform:v}=Ae({id:s.id}),r={transform:Me.Translate.toString(v)},{closedElements:c}=Q(b=>b.metaState),[p]=Re(),T=()=>c.filter(h=>h===s.id).length===1;return e.jsxs("div",{id:s.id,className:`bg-white b-rounded ${x?"z-100 with-drop-shadow":"with-shadow"}`,ref:d,style:r,children:[e.jsx(ja,{bulkEdit:u,index:a,setActiveTab:t,attributes:o,listeners:i,box:s}),e.jsx("div",{ref:p,children:!T()&&e.jsx(al,{bulkEdit:u,boxIndex:a,boxId:s.id,fields:s.fields})})]})};Rs.propTypes={bulkEdit:n.bool,index:n.number.isRequired,box:n.object.isRequired,setActiveTab:n.func};const Es=({id:a,control:s,register:u,errors:t,belong:o,handleDeleteBelong:i,values:d,isLast:x,index:v,resetField:r,setValue:c,clearErrors:p,format:T="all"})=>{const{data:b}=Q(R=>R.fetchMeta),h=R=>`${a}.${v}.${R}`,f=V({control:s,name:h("belongsTo")}),m=V({control:s,name:h("operator")}),k=V({control:s,name:h("find")});w.useEffect(()=>{x&&r(h("logic"))},[x]),w.useEffect(()=>{f!==o.belongsTo&&r(h("find"))},[f]),w.useEffect(()=>{m||c(h("operator"),"=")},[m]);const F=()=>f?d[f]?d[f]:[]:b.belongs&&b.belongs[v]?d[b.belongs[v].belongsTo]?d[b.belongs[v].belongsTo]:[]:[],A=()=>k?typeof k=="string"?k.split(","):k:[],j=()=>T==="reduced"?[{value:null,label:l("Select")},{label:l("Posts"),options:[{value:oe.CUSTOM_POST_TYPE,label:l("Post type")},{value:"POST_ID",label:l("Post")}]},{label:l("Taxonomies"),options:[{value:oe.TAXONOMY,label:l("Taxonomy")},{value:"TERM_ID",label:l("Term")}]}]:[{value:null,label:l("Select")},{label:l("Posts"),options:[{value:oe.CUSTOM_POST_TYPE,label:l("Post type")},{value:"POST_ID",label:l("Post")},{value:"PARENT_POST_ID",label:l("Post parent")},{value:"POST_CAT",label:l("Post category")},{value:"POST_TAX",label:l("Post taxonomy")},{value:"POST_TEMPLATE",label:l("Post template")}]},{label:l("Taxonomies"),options:[{value:oe.TAXONOMY,label:l("Taxonomy")},{value:"TERM_ID",label:l("Term")}]},{label:l("Attachment"),options:[{value:oe.MEDIA,label:l("Attachment")}]},{label:l("Option pages"),options:[{value:oe.OPTION_PAGE,label:l("Option page")}]},{label:l("Comments"),options:[{value:oe.COMMENT,label:l("All comments")}]},{label:l("Users"),options:[{value:oe.USER,label:l("All users")},{value:"USER_ID",label:l("User")}]}],O=[{value:null,label:l("Select")},{value:"=",label:l("is equal to")},{value:"!=",label:l("is not equal to")},{value:"IN",label:l("is included in")},{value:"NOT_IN",label:l("is not included in")}],g=[{value:null,label:l("Select")},{label:l("AND"),value:"AND"},{label:l("OR"),value:"OR"}],C=()=>f===oe.USER||f===oe.COMMENT?!0:!f,S=()=>f===oe.USER||f===oe.COMMENT?{required:!1}:{required:l("This field is mandatory")};return e.jsxs("tr",{id:o.id,children:[e.jsx(ge,{register:u,id:h("id"),value:o.id}),e.jsx("td",{children:e.jsx(W,{register:u,id:h("belongsTo"),values:j(),errors:t,onChangeCapture:()=>{r(h("find")),c(h("find"),[])},validate:{required:l("This field is mandatory")}})}),e.jsx("td",{children:e.jsx(W,{register:u,id:h("operator"),values:O,defaultValue:"=",errors:t,disabled:C(),validate:S()})}),e.jsx("td",{children:m==="IN"||m==="NOT_IN"?e.jsx(Ne,{register:u,id:h("find"),values:F(),errors:t,disabled:C(),validate:S(),setValue:c,clearErrors:p,defaultValue:A()}):e.jsx(W,{register:u,id:h("find"),values:F(),errors:t,disabled:C(),validate:S()})}),e.jsx("td",{children:!x&&e.jsx(W,{register:u,id:h("logic"),values:g,errors:t,validate:{required:l("This field is mandatory")}})}),e.jsx("td",{children:e.jsx("a",{href:"#",onClick:R=>{R.preventDefault(),i(v,o.id)},children:e.jsx($,{icon:!1,tip:l("Delete"),label:e.jsx(L,{icon:"bx-trash",width:18,color:"#F94144"})})})})]})};Es.propTypes={id:n.string.isRequired,index:n.number.isRequired,belong:n.object.isRequired,register:n.func.isRequired,errors:n.object.isRequired,isLast:n.bool.isRequired,handleDeleteBelong:n.func.isRequired,resetField:n.func.isRequired,setValue:n.func.isRequired,clearErrors:n.func.isRequired,format:n.oneOf(["all","reduced"])};const Fs=({id:a,control:s,register:u,handleAddBelong:t,handleDeleteBelong:o,conditions:i,values:d,errors:x,resetField:v,setValue:r,clearErrors:c,format:p="all"})=>{const T=document.globals;T.settings;const b=T.globals,[h]=Re();return e.jsx(q.Fragment,{children:e.jsxs("div",{className:`${!be(d)&&i&&i.length>0?"flex-column s-12":""}`,children:[e.jsx("label",{className:"form-label px-24",children:l("Location")}),!be(d)&&i&&i.length>0?e.jsxs("div",{className:"responsive",children:[e.jsxs("table",{className:`acpt-table ${b.is_rtl?"rtl":""}`,children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:l("Location")}),e.jsx("th",{style:{maxWidth:"100px"},children:l("Condition")}),e.jsx("th",{children:l("Value")}),e.jsx("th",{style:{maxWidth:"100px"},children:l("Logic")}),e.jsx("th",{})]})}),e.jsx("tbody",{ref:h,children:i.map((f,m)=>e.jsx(Es,{id:a,format:p,register:u,errors:x,control:s,belong:f,index:m,handleDeleteBelong:o,values:d,isLast:m===i.length-1,resetField:v,setValue:r,clearErrors:c}))})]}),e.jsx("div",{className:"b-top-1 p-24",children:e.jsx(z,{type:"button",style:P.SECONDARY,onClick:()=>{t()},children:l("Add condition")})})]}):e.jsxs("div",{className:"m-24 b-maxi b-rounded p-24 flex-column s-8 text-center",children:[e.jsx("span",{children:l('No conditions are present, click on "Add condition" button to add the first one.')}),e.jsx("div",{children:e.jsx(z,{type:"button",style:P.SECONDARY,onClick:()=>{t()},children:l("Add condition")})})]})]})})};Fs.propTypes={id:n.string.isRequired,values:n.array.isRequired,append:n.func.isRequired,register:n.func.isRequired,unregister:n.func.isRequired,resetField:n.func.isRequired,conditions:n.array.isRequired,errors:n.array.isRequired,handleDeleteBelong:n.func.isRequired,handleAddBelong:n.func.isRequired,setValue:n.func.isRequired,clearErrors:n.func.isRequired,format:n.oneOf(["all","reduced"])};const ks=({groupId:a})=>{const u=document.globals.globals,t=X(),{group:o}=Q(N=>N.metaState),i=u.find,[d]=Re(),{control:x,register:v,unregister:r,formState:{errors:c},setValue:p,resetField:T,clearErrors:b}=U(),{append:h,remove:f}=ue({control:x,name:"belongs"}),m=()=>{const N={id:me(),belongsTo:null,operator:null,find:null,logic:null};t(Mt({belong:N}))},k=(N,I)=>{t(Vt({belongId:I})),f(N)},{id:F}=$e(),[A,j]=w.useState(typeof F!="string"),[O,g]=w.useState(!0),[C,S]=w.useState(!0),R=N=>{O&&o.boxes.map((I,M)=>{p(`boxes.${M}.settings[0].context`,N)})},y=N=>{C&&o.boxes.map((I,M)=>{p(`boxes.${M}.settings[0].priority`,N)})};return e.jsxs("div",{ref:d,children:[e.jsxs("div",{className:"i-flex-center s-8 mb-24",children:[e.jsx(L,{icon:"bx:cog",width:24,color:El()}),e.jsx("h3",{children:l("Settings")}),e.jsx("a",{href:"#",onClick:N=>{N.preventDefault(),j(!A)},children:l(`${A?"Close":"Edit"}`)})]}),!A&&e.jsx("div",{className:"line-separator mb-24"}),A&&e.jsxs("div",{className:"mb-24 bg-white b-rounded with-shadow flex-column b-top-1 pt-24",style:{marginTop:"0"},children:[e.jsxs("div",{className:"container p-24",children:[e.jsxs("div",{className:"col-4",children:[e.jsx(le,{id:"display",label:l("Display as")}),e.jsx(W,{id:"display",register:v,errors:c,values:Js,defaultValue:!be(o)&&o.display?o.display:Ws.STANDARD})]}),e.jsxs("div",{className:"col-4",children:[e.jsx(le,{id:"context",label:e.jsxs("span",{className:"flex-between s-4",children:[e.jsx("span",{children:l("Context")}),e.jsx("a",{href:"#",className:"font-regular text-normal",onClick:N=>{N.preventDefault(),g(!O)},children:l(O?"Apply to meta boxes":"Don't apply to meta boxes")})]})}),e.jsx(W,{id:"context",register:v,errors:c,values:Xl,defaultValue:!be(o)&&o.context?o.context:"advanced",onChangeCapture:N=>{R(N.target.value)}})]}),e.jsxs("div",{className:"col-4",children:[e.jsx(le,{id:"priority",label:e.jsxs("span",{className:"flex-between s-4",children:[e.jsx("span",{children:l("Priority")}),e.jsx("a",{href:"#",className:"font-regular text-normal",onClick:N=>{N.preventDefault(),S(!C)},children:l(C?"Apply to meta boxes":"Don't apply to meta boxes")})]})}),e.jsx(W,{id:"priority",register:v,errors:c,values:Ql,defaultValue:!be(o)&&o.priority?o.priority:"default",onChangeCapture:N=>{y(N.target.value)}})]})]}),e.jsx(Fs,{id:"belongs",values:i,conditions:o.belongs?o.belongs:[],append:h,register:v,unregister:r,remove:f,errors:c,control:x,handleAddBelong:m,handleDeleteBelong:k,resetField:T,setValue:p,clearErrors:b})]})]})};ks.propTypes={groupId:n.string.isRequired};const ws=({boxIds:a,modalOpen:s,setModalOpen:u})=>{const o=document.globals.globals,{setValue:i}=U(),d=X(),{id:x}=$e(),[v,r]=w.useState(null),[c,p]=w.useState(!1),T=()=>{let b=[];a.map(h=>{b.push(h.id)}),xe("copyMetaBoxesAction",{boxIds:b,targetGroupId:v,delete:c}).then(h=>{h.success?(Te.success(`${l("Meta box was successfully copied")}.${l("The browser will refresh after 5 seconds.")}`),u(!s),d(pl()),x===v&&d(Ke({id:x})).then(f=>{d(Oe(f.payload)),i("id",x),i("name",f.payload.name),i("label",f.payload.label),i("display",f.payload.display),f.payload.belongs&&f.payload.belongs.map((m,k)=>{i(`belongs.${k}.id`,m.id),i(`belongs.${k}.belongsTo`,m.belongsTo),i(`belongs.${k}.operator`,m.operator),i(`belongs.${k}.find`,m.find),i(`belongs.${k}.logic`,m.logic)}),f.payload.boxes&&f.payload.boxes.map((m,k)=>{i(`boxes.${k}`,m)})}).catch(f=>{console.error(f)})):Te.error(h.error)}).catch(h=>console.error(h))};return e.jsx(q.Fragment,{children:e.jsx(ve,{title:l("Copy selected meta boxes"),visible:s,buttons:[],children:e.jsxs("div",{className:"flex-column s-24",children:[e.jsxs("div",{children:[e.jsx("label",{className:"form-label i-flex-center s-4",htmlFor:"group",children:l("Meta group")}),e.jsx("div",{className:"acpt-select",children:e.jsx("select",{id:"group",className:"form-control default",onChangeCapture:b=>r(b.target.value),children:o.find.meta.map(b=>e.jsx("option",{value:b.value,children:b.label}))})})]}),v&&v!=="Select"&&e.jsxs("div",{children:[e.jsxs("div",{className:"w-100 i-flex-center s-4 mb-8",children:[e.jsx("input",{type:"checkbox",defaultValue:c,onClick:()=>p(!c),id:"deleteBoxes"}),e.jsx("label",{htmlFor:"deleteBoxes",children:l("Delete after copying")})]}),e.jsx(z,{onClick:()=>T(),style:P.PRIMARY,children:l("Copy")})]})]})})})};ws.propTypes={boxIds:n.array.isRequired,modalOpen:n.bool.isRequired,setModalOpen:n.func.isRequired};const Is=({fieldIds:a,modalOpen:s,setModalOpen:u})=>{const o=document.globals.globals,{setValue:i}=U(),d=X(),{id:x}=$e(),[v,r]=w.useState(null),[c,p]=w.useState([]),[T,b]=w.useState([]),[h,f]=w.useState(null),[m,k]=w.useState(null),[F,A]=w.useState(!1);w.useEffect(()=>{r(null),p([]),b([]),f(null),k(null),A(!1)},[s]);const j=S=>{r(S),p([]),b([]),f(null),k(null),A(!1),xe("fetchMetaAction",{id:S}).then(R=>{p(R.boxes)}).catch(R=>console.error(R))},O=S=>{b([]),f("box"),k(S);const R=c.filter(y=>y.id===S)[0].fields;if(R&&R.length>0){const y=R.filter(N=>N.type===E.REPEATER||N.type===E.FLEXIBLE);y&&y.length>0&&b(y)}},g=S=>{f("field"),k(S)},C=()=>{let S=[];a.map(R=>{S.push(R.id)}),xe("copyMetaFieldsAction",{fieldIds:S,targetEntityType:h,targetEntityId:m,delete:F}).then(R=>{R.success?(Te.success(`${l("Meta field was successfully copied")}.`),u(!s),d(pl()),x===v&&d(Ke({id:x})).then(y=>{d(Oe(y.payload)),i("id",x),i("name",y.payload.name),i("label",y.payload.label),i("display",y.payload.display),y.payload.belongs&&y.payload.belongs.map((N,I)=>{i(`belongs.${I}.id`,N.id),i(`belongs.${I}.belongsTo`,N.belongsTo),i(`belongs.${I}.operator`,N.operator),i(`belongs.${I}.find`,N.find),i(`belongs.${I}.logic`,N.logic)}),y.payload.boxes&&y.payload.boxes.map((N,I)=>{i(`boxes.${I}`,N)})}).catch(y=>{console.error(y)})):Te.error(R.error)}).catch(R=>console.error(R))};return e.jsx(q.Fragment,{children:e.jsx(ve,{title:l("Copy selected meta fields"),visible:s,buttons:[],children:e.jsxs("div",{className:"flex-column s-24",children:[e.jsxs("div",{children:[e.jsx("label",{className:"form-label i-flex-center s-4",htmlFor:"group",children:l("Meta group")}),e.jsx("div",{className:"acpt-select",children:e.jsx("select",{id:"group",className:"form-control default",onChangeCapture:S=>j(S.target.value),children:o.find.meta.map(S=>e.jsx("option",{value:S.value,children:S.label}))})})]}),c&&c.length>0&&e.jsxs("div",{children:[e.jsx("label",{className:"form-label i-flex-center s-4",htmlFor:"box",children:l("Meta box")}),e.jsx("div",{className:"acpt-select",children:e.jsxs("select",{id:"box",className:"form-control default",onChangeCapture:S=>O(S.target.value),children:[e.jsx("option",{value:null,children:l("Select")}),c.map(S=>e.jsx("option",{value:S.id,children:S.name}))]})})]}),T&&T.length>0&&e.jsxs("div",{children:[e.jsx("label",{className:"form-label i-flex-center s-4",htmlFor:"field",children:l("Meta field")}),e.jsx("div",{className:"acpt-select",children:e.jsxs("select",{id:"field",className:"form-control default",onChangeCapture:S=>g(S.target.value),children:[e.jsx("option",{value:null,children:l("Select")}),T.map(S=>e.jsx("option",{value:S.id,children:S.name}))]})})]}),h&&m&&e.jsxs("div",{children:[e.jsxs("div",{className:"w-100 i-flex-center s-4 mb-8",children:[e.jsx("input",{type:"checkbox",defaultValue:F,onClick:()=>A(!F),id:"deleteFields"}),e.jsx("label",{htmlFor:"deleteFields",children:l("Delete the meta field after copying")})]}),e.jsx(z,{onClick:()=>C(),style:P.PRIMARY,children:l("Copy")})]})]})})})};Is.propTypes={fieldIds:n.array.isRequired,modalOpen:n.bool.isRequired,setModalOpen:n.func.isRequired};const Os=({blockIds:a,modalOpen:s,setModalOpen:u})=>{const o=document.globals.globals,{setValue:i}=U(),d=X(),{id:x}=$e(),[v,r]=w.useState(null),[c,p]=w.useState([]),[T,b]=w.useState([]),[h,f]=w.useState(null),[m,k]=w.useState(!1);w.useEffect(()=>{r(null),p([]),b([]),f(null),k(!1)},[s]);const F=g=>{r(g),p([]),b([]),f(null),k(!1),xe("fetchMetaAction",{id:g}).then(C=>{p(C.boxes)}).catch(C=>console.error(C))},A=g=>{b([]);const C=c.filter(S=>S.id===g)[0].fields;b(C)},j=g=>{f(g)},O=()=>{let g=[];a.map(C=>{g.push(C.id)}),xe("copyMetaBlocksAction",{blockIds:g,targetFieldId:h,delete:m}).then(C=>{C.success?(Te.success(`${l("Meta block was successfully copied")}.${l("The browser will refresh after 5 seconds.")}`),u(!s),x===v&&d(Ke({id:x})).then(S=>{d(Oe(S.payload)),i("id",x),i("name",S.payload.name),i("label",S.payload.label),i("display",S.payload.display),S.payload.belongs&&S.payload.belongs.map((R,y)=>{i(`belongs.${y}.id`,R.id),i(`belongs.${y}.belongsTo`,R.belongsTo),i(`belongs.${y}.operator`,R.operator),i(`belongs.${y}.find`,R.find),i(`belongs.${y}.logic`,R.logic)}),S.payload.boxes&&S.payload.boxes.map((R,y)=>{i(`boxes.${y}`,R)})}).catch(S=>{console.error(S)})):Te.error(C.error)}).catch(C=>console.error(C))};return e.jsx(ve,{title:l("Copy selected meta blocks"),visible:s,buttons:[],children:e.jsxs("div",{className:"flex-column s-24",children:[e.jsxs("div",{children:[e.jsx("label",{className:"form-label i-flex-center s-4",htmlFor:"group",children:l("Meta group")}),e.jsx("div",{className:"acpt-select",children:e.jsx("select",{id:"group",className:"form-control default",onChangeCapture:g=>F(g.target.value),children:o.find.meta.map(g=>e.jsx("option",{value:g.value,children:g.label}))})})]}),c&&c.length>0&&e.jsxs("div",{children:[e.jsx("label",{className:"form-label i-flex-center s-4",htmlFor:"box",children:l("Meta box")}),e.jsx("div",{className:"acpt-select",children:e.jsxs("select",{id:"box",className:"form-control default",onChangeCapture:g=>A(g.target.value),children:[e.jsx("option",{value:null,children:l("Select")}),c.map(g=>e.jsx("option",{value:g.id,children:g.name}))]})})]}),T&&T.length>0&&e.jsxs("div",{children:[e.jsx("label",{className:"form-label i-flex-center s-4",htmlFor:"field",children:l("Meta field")}),e.jsx("div",{className:"acpt-select",children:e.jsxs("select",{id:"field",className:"form-control default",onChangeCapture:g=>j(g.target.value),children:[e.jsx("option",{value:null,children:l("Select")}),T.map(g=>e.jsx("option",{value:g.id,children:g.name}))]})})]}),h&&e.jsxs("div",{children:[e.jsxs("div",{className:"w-100 i-flex-center s-4 mb-8",children:[e.jsx("input",{type:"checkbox",defaultValue:m,onClick:()=>k(!m),id:"deleteBlocks"}),e.jsx("label",{htmlFor:"deleteBlocks",children:l("Delete the meta block after copying")})]}),e.jsx(z,{onClick:()=>O(),style:P.PRIMARY,children:l("Copy")})]})]})})};Os.propTypes={blockIds:n.array.isRequired,modalOpen:n.bool.isRequired,setModalOpen:n.func.isRequired};const qs=({setFieldTab:a,setBoxTab:s,setBlockTab:u})=>{const t=X(),{selectedElements:o,selectedElementsType:i}=Q(j=>j.metaState),{control:d,setValue:x,getValues:v}=U(),r=V({control:d,name:"boxes"}),c=w.useRef(null),[p,T]=w.useState(null),[b,h]=w.useState(!1),[f,m]=w.useState(!1),[k,F]=w.useState(!1),A=()=>{o.map(j=>{switch(p){case"copy":i==="box"?h(!b):i==="block"?F(!k):m(!f);break;case"duplicate":if(i==="box"){const O=r.findIndex(S=>S.id===j.id),g=r[O],C=ta(g);r.push(C),x("boxes",r),t(ul(C))}else if(i==="block"){const O=Ul(r,j.boxId,j.id),g=oa(j.boxId,j.parentFieldId,O),C=se(r,j.boxId,j.id,!1),S=v(C);S.push(g),x(C,S),t(hl({boxId:j.boxId,parentFieldId:j.parentFieldId,block:g}))}else{const O=Ul(r,j.boxId,j.id),g=na(j.boxId,O),C=se(r,j.boxId,j.id,!1),S=v(C);S.push(g),x(C,S),t(Ye({boxId:j.boxId,field:g,parentFieldId:j.parentFieldId,parentBlockId:j.parentBlockId}))}break;case"delete":if(i==="box"){const O=r?r.filter(g=>g.id!==j.id):[];x("boxes",O),t(sa(j.id))}else if(i==="block"){const O=se(r,j.boxId,j.id,!1),g=v(O),C=g?g.filter(S=>S.id!==j.id):[];typeof g<"u"&&(x(O,C),t(ra({boxId:j.boxId,parentFieldId:j.parentFieldId,blockId:j.id})))}else{const O=se(r,j.boxId,j.id,!1),g=v(O),C=g?g.filter(S=>S.id!==j.id):[];typeof g<"u"&&(x(O,C),t(ia({boxId:j.boxId,fieldId:j.id,parentFieldId:j.parentFieldId,parentBlockId:j.parentBlockId})))}break}}),(p==="delete"||p==="duplicate")&&t(pl()),c.current.value=""};return e.jsxs(q.Fragment,{children:[e.jsx(ws,{boxIds:o,modalOpen:b,setModalOpen:h}),e.jsx(Is,{fieldIds:o,modalOpen:f,setModalOpen:m}),e.jsx(Os,{blockIds:o,modalOpen:k,setModalOpen:F}),o&&o.length>0&&e.jsxs("div",{className:"flex-between",children:[e.jsxs("div",{children:[o.length," ",l("Selected items")]}),e.jsxs("div",{className:"i-flex-center s-8",children:[e.jsxs("select",{ref:c,className:"form-control sm",onChange:j=>{T(j.target.value!==""?j.target.value:null)},children:[e.jsx("option",{value:"",children:l("Select")}),e.jsx("option",{value:"copy",children:l("Copy")}),e.jsx("option",{value:"duplicate",children:l("Duplicate")}),e.jsx("option",{value:"delete",children:l("Delete")})]}),e.jsx(z,{style:P.WHITE,size:"sm",disabled:p===null,onClick:j=>{j.preventDefault(),A()},children:l("Execute")})]})]})]})};qs.propTypes={setBoxTab:n.func,setFieldTab:n.func,setBlockTab:n.func};const As=({level:a,boxIndex:s,fieldIndex:u,blockIndex:t,boxId:o,parentField:i,block:d})=>{const{group:x}=Q(A=>A.metaState),v=X(),{attributes:r,listeners:c,setNodeRef:p,isDragging:T,transform:b}=Ae({id:d.id}),h={transform:Me.Translate.toString(b)},{control:f}=U(),m=V({control:f,name:`${se(x.boxes,o,i.id)}.blocks.${t}.name`}),{move:k}=ue({control:f,name:`${se(x.boxes,o,i.id)}.blocks.${t}.fields`}),F=A=>{const{active:j,over:O}=A;if(j.id===O.id)return;const g=d.fields,C=g.findIndex(y=>y.id===j.id),S=g.findIndex(y=>y.id===O.id),R=Fe(g,C,S);k(C,S),v(ze({boxId:o,parentFieldId:i.id,parentBlockId:d.id,sortedFields:R}))};return e.jsxs(q.Fragment,{children:[e.jsxs("div",{className:`tree-el level${a} flex-between s-8`,ref:p,style:h,children:[e.jsxs("div",{className:"i-flex-center s-8",children:[e.jsx("span",{className:"cursor-move top-2 handle",...r,...c,children:e.jsx(L,{icon:"bx:dots-vertical-rounded",color:Ee(),width:18})}),e.jsx("span",{className:"cursor-pointer text-ellipsis",onClick:A=>{A.preventDefault(),Se(`${d.id}`)},children:m||d.name})]}),e.jsx(aa,{style:P.INFO,children:"B"})]},d.id),d.fields&&d.fields.length>0&&e.jsx(Ce,{onDragEnd:F,items:d.fields,children:e.jsx(q.Fragment,{children:d.fields.map((A,j)=>e.jsx(bl,{level:a+1,boxIndex:s,fieldIndex:j,boxId:o,parentField:i,field:A}))})})]})};As.propTypes={level:n.number.isRequired,boxIndex:n.number.isRequired,fieldIndex:n.number.isRequired,blockIndex:n.number.isRequired,boxId:n.string.isRequired,block:n.object.isRequired,parentField:n.object.isRequired};const bl=({level:a,boxIndex:s,fieldIndex:u,boxId:t,parentField:o,field:i})=>{const{group:d}=Q(j=>j.metaState),x=X(),{attributes:v,listeners:r,setNodeRef:c,isDragging:p,transform:T}=Ae({id:i.id}),b={transform:Me.Translate.toString(T)},{control:h}=U(),f=V({control:h,name:`${se(d.boxes,t,i.id)}.name`}),{move:m}=ue({control:h,name:`${se(d.boxes,t,i.id)}.children`}),{move:k}=ue({control:h,name:`${se(d.boxes,t,i.id)}.blocks`}),F=j=>{const{active:O,over:g}=j;if(O.id===g.id)return;const C=i.blocks,S=C.findIndex(N=>N.id===O.id),R=C.findIndex(N=>N.id===g.id),y=Fe(C,S,R);k(S,R),x(ql({boxId:t,parentFieldId:i.id,sortedBlocks:y}))},A=j=>{const{active:O,over:g}=j;if(O.id===g.id)return;const C=i.children,S=C.findIndex(N=>N.id===O.id),R=C.findIndex(N=>N.id===g.id),y=Fe(C,S,R);m(S,R),x(ze({boxId:t,parentFieldId:i.id,parentBlockId:null,sortedFields:y}))};return e.jsxs(q.Fragment,{children:[e.jsxs("div",{className:`tree-el level${a} flex-between s-8`,ref:c,style:b,children:[e.jsxs("div",{className:"i-flex-center s-8",children:[e.jsx("span",{className:"cursor-move top-2 handle",...v,...r,children:e.jsx(L,{icon:"bx:dots-vertical-rounded",color:Ee(),width:18})}),e.jsx("span",{className:"cursor-pointer text-ellipsis",onClick:j=>{j.preventDefault(),Se(`${i.id}`)},children:f||i.name})]}),e.jsx(aa,{style:o?P.SUCCESS:P.SECONDARY,children:o?"C":"F"})]},i.id),i.children&&i.children.length>0&&e.jsx(Ce,{onDragEnd:A,items:i.children,children:e.jsx(q.Fragment,{children:i.children.map((j,O)=>e.jsx(bl,{level:a+1,boxIndex:s,fieldIndex:O,boxId:t,parentField:i,field:j}))})}),i.blocks&&i.blocks.length>0&&e.jsx(Ce,{onDragEnd:F,items:i.blocks,children:e.jsx(q.Fragment,{children:i.blocks.map((j,O)=>e.jsx(As,{boxIndex:s,block:j,blockIndex:O,boxId:t,level:a+1,parentField:i,fieldIndex:u}))})})]})};bl.propTypes={level:n.number.isRequired,fieldIndex:n.number.isRequired,boxIndex:n.number.isRequired,boxId:n.string.isRequired,field:n.object.isRequired,parentField:n.object};const Ms=({index:a,box:s})=>{const t=document.globals.globals,o=X(),[i,d]=w.useState(!1),{attributes:x,listeners:v,setNodeRef:r,isDragging:c,transform:p}=Ae({id:s.id}),T={transform:Me.Translate.toString(p)},{control:b}=U(),h=V({control:b,name:`boxes.${a}.name`}),{move:f}=ue({control:b,name:`boxes.${a}.fields`}),m=k=>{const{active:F,over:A}=k;if(F.id===A.id)return;const j=s.fields,O=j.findIndex(S=>S.id===F.id),g=j.findIndex(S=>S.id===A.id),C=Fe(j,O,g);f(O,g),o(ze({boxId:s.id,sortedFields:C,parentFieldId:null,parentBlockId:null}))};return e.jsxs("div",{ref:r,style:T,className:"b-rounded with-shadow bg-white p-24",children:[e.jsxs("h3",{className:`${!i&&s.fields&&s.fields.length>0?"mb-24":""} flex-between s-8`,children:[e.jsxs("div",{className:"i-flex-center s-8",children:[e.jsx("span",{className:"cursor-move top-2 handle",...x,...v,children:e.jsx(L,{icon:"bx:dots-vertical-rounded",color:Ee(),width:18})}),e.jsx("span",{className:"text-ellipsis cursor-pointer",onClick:k=>{k.preventDefault(),Se(s.id)},children:h||s.name})]}),e.jsx("span",{className:"cursor-pointer top-2",style:{paddingRight:"6px"},onClick:()=>d(!i),children:e.jsx(L,{width:18,icon:i?"bx:chevron-up":"bx:chevron-down",color:Ee()})})]}),!i&&s.fields&&s.fields.length>0&&e.jsx("div",{className:`tree ${t.is_rtl===!0?"rtl":""}`,children:e.jsx(Ce,{onDragEnd:m,items:s.fields,children:e.jsx(q.Fragment,{children:s.fields&&s.fields.map((k,F)=>e.jsx(bl,{level:0,boxIndex:a,fieldIndex:F,boxId:s.id,field:k}))})})})]},s.id)};Ms.propTypes={index:n.number.isRequired,box:n.object.isRequired};const Vs=({boxes:a})=>{if(typeof a>"u"||a.length===0)return null;const s=X(),{control:u}=U(),{move:t}=ue({control:u,name:"boxes"}),o=i=>{const{active:d,over:x}=i;if(d.id===x.id)return;const v=a.findIndex(p=>p.id===d.id),r=a.findIndex(p=>p.id===x.id),c=Fe(a,v,r);t(v,r),s(pa(c))};return e.jsx(q.Fragment,{children:e.jsx(Ce,{onDragEnd:o,items:a,children:e.jsx(q.Fragment,{children:a&&a.map((i,d)=>e.jsx(Ms,{index:d,box:i}))})})})};Vs.propTypes={boxes:n.array.isRequired};const Ds=({boxes:a})=>{const s=X(),{group:u,closedElements:t}=Q(g=>g.metaState),o=me(),[i,d]=Re(),{control:x}=U(),{move:v}=ue({control:x,name:"boxes"}),r=()=>{const g=Yl(u.boxes);return(t==null?void 0:t.length)===g.length},[c,p]=w.useState(Kl(u.id)),[T,b]=w.useState(Hl(u.id)),[h,f]=w.useState(r());w.useEffect(()=>{typeof u.id<"u"&&(p(Kl(u.id)),b(Hl(u.id)),f(r()))},[u]);const m=()=>{var g;const C=me(),S={id:C,name:"meta_box_title",UIName:"meta box title",label:"meta box title",fields:[],isSaved:!1,sort:u.boxes?(g=u.boxes)===null||g===void 0?void 0:g.length:1};s(ul(S)),qe(1).then(()=>{Se(`${C}`)})},k=g=>{const{active:C,over:S}=g;if(C.id===S.id)return;const R=a.findIndex(I=>I.id===C.id),y=a.findIndex(I=>I.id===S.id),N=Fe(a,R,y);v(R,y),s(pa(N))},F=()=>{const g=Yl(u.boxes);(t==null?void 0:t.length)>0?(s(Dt()),_t(g)):(s(Bt()),Lt(g)),f(!h)},A=g=>{$t(u.id,g),p(!c)},j=g=>{Pt(u.id,g),b(!T)},O=()=>{let g=[];return g.push(e.jsxs("div",{className:"i-flex-center s-8",children:[e.jsx("div",{className:"toggle-group",children:e.jsxs("label",{htmlFor:"toggle_visibility",className:"toggle",children:[e.jsx("input",{id:"toggle_visibility",type:"checkbox",checked:h,onChangeCapture:C=>{F()}}),e.jsx("span",{className:"slider round"})]})}),e.jsx("label",{className:"cursor-pointer",htmlFor:"toggle_visibility",children:l("Hide elements")})]})),g.push(e.jsxs("div",{className:"i-flex-center s-8",children:[e.jsx("div",{className:"toggle-group",children:e.jsxs("label",{htmlFor:"toggle_bulk_edit",className:"toggle",children:[e.jsx("input",{id:"toggle_bulk_edit",type:"checkbox",checked:T,onChangeCapture:C=>{j(C.target.checked)}}),e.jsx("span",{className:"slider round"})]})}),e.jsx("label",{className:"cursor-pointer",htmlFor:"toggle_bulk_edit",children:l("Bulk edit")})]})),a&&a.length>0&&g.push(e.jsxs("div",{className:"i-flex-center s-8",children:[e.jsx("div",{className:"toggle-group",children:e.jsxs("label",{htmlFor:"toggle_navigation",className:"toggle",children:[e.jsx("input",{id:"toggle_navigation",type:"checkbox",checked:c,onChangeCapture:C=>{A(C.target.checked)}}),e.jsx("span",{className:"slider round"})]})}),e.jsx("label",{className:"cursor-pointer",htmlFor:"toggle_navigation",children:l(c?"Hide navigation":"Show navigation")})]})),g};return e.jsxs(q.Fragment,{children:[e.jsx(ks,{groupId:be(u)?o:u.id}),e.jsxs("div",{className:"flex-column s-24",ref:i,children:[e.jsxs("div",{className:"flex-between s-8",children:[e.jsxs("div",{className:"i-flex-center s-8",children:[e.jsx(L,{icon:"bx:box",width:24,color:El()}),e.jsx("h3",{children:l("Meta boxes")}),e.jsx("span",{className:"px-8 py-4 font-sm bg-light-gray text-normal b-rounded",children:a&&a.length>0?a.length:0})]}),e.jsx(Zs,{align:"right",name:"meta-field-menu",buttonClass:P.WHITE,anchor:e.jsx(L,{icon:"bx:dots-vertical-rounded",color:Ee(),width:24}),links:O()})]}),e.jsx(qs,{}),a&&a.length>0?e.jsxs("div",{ref:d,className:"container",children:[c&&e.jsx("div",{className:"col-3 flex-column s-24 hidden-xs sticky",style:{top:"130px"},children:e.jsx(Vs,{boxes:a})}),e.jsxs("div",{className:`flex-column s-24 ${c?"col-9":"col-12"}`,children:[e.jsx(Ce,{onDragEnd:k,items:a,children:e.jsx(q.Fragment,{children:a&&a.map((g,C)=>e.jsx(Rs,{index:C,box:g,bulkEdit:T},g.id))})}),e.jsx("div",{children:e.jsx(z,{type:"button",style:P.WHITE,onClick:()=>{m()},children:l("Add meta box")})})]})]}):e.jsx("div",{className:"mb-24 p-24 bg-white with-shadow",children:e.jsxs("div",{className:"b-maxi b-rounded p-24 flex-column s-12 text-center",children:[e.jsx("span",{children:l('No meta box already created. Create the first one now by clicking the button "Add meta box"!')}),e.jsx("div",{children:e.jsx(z,{type:"button",style:P.SECONDARY,onClick:()=>{m()},children:l("Add meta box")})})]})})]})]})};Ds.propTypes={boxes:n.array.isRequired};const ni=()=>{const a=X(),[s,u]=w.useState(!1),{unregister:t}=U(),o=[e.jsx(z,{style:P.SUCCESS,onClick:i=>{i.preventDefault(),a(Gt()),a(pl()),t("boxes"),u(!s)},children:l("Yes")}),e.jsx(z,{style:P.DANGER,onClick:i=>{i.preventDefault(),u(!s)},children:l("No")})];return e.jsxs(q.Fragment,{children:[e.jsx(ve,{title:l("Confirm deleting all"),visible:s,buttons:o,children:l("Are you sure?")}),e.jsx(z,{type:"button",style:P.DANGER,onClick:i=>{i.preventDefault(),u(!s)},children:l("Delete all")})]})},ri=a=>{const s="You have unsaved changes. Continue?";w.useEffect(()=>{const u=t=>{if(a)return t.returnValue=s,s};return window.addEventListener("beforeunload",u),()=>window.removeEventListener("beforeunload",u)},[a])},_s=({groupId:a})=>{const{register:s,formState:{errors:u},control:t,setValue:o,resetField:i}=U(),d=V({control:t,name:"name"}),x=V({control:t,name:"label"}),{group:v}=Q(f=>f.metaState),[r,c]=w.useState(!0),[p,T]=w.useState(!1),b=()=>u&&u.name?e.jsx("span",{className:"invalid-feedback",children:l("Group name error(s). Please fix it.")}):u&&u.belongs?e.jsx("span",{className:"invalid-feedback",children:l("Location rules error(s). Please fix it.")}):d?e.jsx("span",{children:d}):e.jsx("span",{children:be(v)?"group_name":v.name}),h=()=>x?e.jsx("span",{className:"color-gray",children:x}):!be(v)&&v.label?e.jsx("span",{className:"color-gray",children:v.label}):l("Group name");return e.jsxs("div",{className:"i-flex-center s-8",children:[e.jsx(ge,{id:"id",value:a,register:s}),p?e.jsxs(q.Fragment,{children:[e.jsx("div",{children:e.jsx(ae,{id:"label",register:s,placeholder:l("Group label"),defaultValue:be(v)?null:v.label,errors:u,onChangeCapture:f=>{r&&o("name",Be(Le(f.target.value)))},onClick:f=>{f.target.value==="group name"&&i("label")},validate:{maxLength:{value:255,message:"max length is 255"}}})}),e.jsx("div",{children:e.jsx(ae,{id:"name",register:s,placeholder:l("Group name"),defaultValue:be(v)?"group_name":v.name,errors:u,isRequired:!0,validate:{validate:We,required:l("This field is mandatory"),maxLength:{value:255,message:"max length is 255"}}})}),e.jsx("div",{children:e.jsx($,{label:e.jsx("span",{className:`acpt-btn-switch ${r===!0?"active":""}`,onClick:f=>{f.preventDefault(),c(!r)},children:e.jsx(L,{icon:"bx-link",width:18})}),tip:l(`${r?"Auto slug ON":"Auto slug OFF"}`),icon:!1})})]}):e.jsxs(q.Fragment,{children:[e.jsx("h1",{children:b()}),h()&&e.jsx("span",{className:"font-regular text-normal",children:h()})]}),e.jsx(z,{style:P.SECONDARY,size:"sm",onClick:f=>{f.preventDefault(),T(!p)},children:l(`${p?"Close":"Edit"}`)})]})};_s.propTypes={groupId:n.string.isRequired};const Vi=()=>{const a=w.useRef(null),s=X(),{error:u,success:t,loading:o}=Q(y=>y.saveMeta),{loading:i}=Q(y=>y.fetchMeta),{group:d}=Q(y=>y.metaState),x=me(),{id:v}=$e(),[r,c]=Xs(),p=v||x,[T,b]=w.useState(!1),[h,f]=w.useState(!1),[m,k]=w.useState(!1),[F,A]=w.useState(0);Qs();const j=zt({mode:"onChange"});w.useEffect(()=>{zl(`${l("Manage meta fields")}${h?"*":""}`)},[h]),ri(h),rl([a],()=>{s(Yt())});const O=()=>{const y=me(),N={id:y,name:"meta_box_title",UIName:"meta box title",label:"meta box title",fields:[],isSaved:!1,sort:d.boxes?d.boxes.length:1};s(ul(N)),A(d.boxes?d.boxes.length:0),qe(1).then(()=>{Se(`${y}`)})};w.useEffect(()=>{if(zl(l("Manage meta fields")),Ut("#/meta"),v)s(Ke({id:v})).then(y=>{s(Oe(y.payload)),j.setValue("id",v),j.setValue("name",y.payload.name),j.setValue("label",y.payload.label),j.setValue("display",y.payload.display),j.setValue("context",y.payload.context),j.setValue("priority",y.payload.priority),y.payload.belongs&&y.payload.belongs.map((N,I)=>{j.setValue(`belongs.${I}.id`,N.id),j.setValue(`belongs.${I}.belongsTo`,N.belongsTo),j.setValue(`belongs.${I}.operator`,N.operator),j.setValue(`belongs.${I}.find`,N.find),j.setValue(`belongs.${I}.logic`,N.logic)}),y.payload.boxes&&y.payload.boxes.map((N,I)=>{j.setValue(`boxes.${I}`,N)})}).catch(y=>{console.error(y),k(!0)});else{const y=r.get("find"),N=r.get("belongsTo"),I=`${y?y+"_":""}group_name`,M=`${y?y+" ":""}group name`;let D={name:I,label:M};if(j.reset(),j.setValue("name",I),j.setValue("label",M),y&&N){const de=me();j.setValue("belongs.0.id",de),j.setValue("belongs.0.belongsTo",N),j.setValue("belongs.0.operator","="),j.setValue("belongs.0.find",y),D.belongs=[],D.belongs.push({id:de,belongsTo:N,operator:"=",find:y})}s(Oe(D))}},[v]);const g=()=>!(T||o||!be(j.formState.errors)),C=y=>{b(!0),s(Ht(y)).then(N=>{const I=N.payload;I&&I.success?(j.reset({},{keepValues:!0,keepIsSubmitted:!0}),f(!1),gl.success(l("Meta group settings successfully saved")),s(Oe(y)),S(y),lt()):gl.error(I&&I.error?I.error:l("An unexpected error has occurred")),b(!1)}).catch(N=>{console.error(N),gl.error(N),b(!1)})},S=y=>{let N=[];document.globals.globals.find.meta.map(de=>{de.value===y.id?N.push({value:y.id,label:y.name}):N.push(de)});const I={meta:N},M={find:{...document.globals.globals.find,...I}},D={globals:{...document.globals.globals,...M}};document.globals={...document.globals,...D}},R=[e.jsx(z,{type:"button",style:P.SECONDARY,onClick:y=>{y.preventDefault(),O()},children:l("Add meta box")}),e.jsx(z,{disabled:!g(),style:P.PRIMARY,children:l("Save")}),e.jsx(ni,{})];return v&&i?e.jsx(Kt,{}):m?e.jsx(li,{}):e.jsx(q.Fragment,{children:e.jsx(Jt,{...j,children:e.jsx("form",{onSubmit:j.handleSubmit(C),onChange:()=>{f(!0)},children:e.jsx(et,{title:e.jsx(_s,{groupId:p}),actions:R,crumbs:[{label:l("Field groups"),link:"/meta"},{label:l("Manage meta fields")}],children:e.jsx("div",{ref:a,children:e.jsx(Ds,{boxes:be(d)?[]:d.boxes})})})})})})};export{Vi as default};
