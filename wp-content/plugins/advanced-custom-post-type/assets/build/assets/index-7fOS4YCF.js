import{j as e,r as ee,f as i,u as c,a as Ne,s as Ce,l as X}from"./fields-Uuj9pZLj.js";import{a as S,R as O,u as ke}from"./vendor-D21mNUGX.js";import{n as B,u as Ee,a as Re,L as Se}from"./Layout-CbPpDR-w.js";import{b as ae,C as le,c as M,d as Te,D as $e,e as we,f as Ve,g as De,h as Oe,M as _e,a as Ie}from"./sortable.esm-C-GypyhB.js";import{P as f,a as w,w as se,I as E,A as q,s as T,u as $,ai as Me,aj as Ae,ak as Y,al as Pe,am as J,an as Fe,ao as K,ap as Le,aq as qe,ar as _,as as U,at as Ke,au as Q,B as L,av as te,aw as k,b as F,ax as Ue,ay as Z,m as He,az as Ge,aA as H,aB as We,L as Be,aC as Ye,aD as ze}from"./index-DW87FRXD.js";import{T as Xe,a as G}from"./index-CTmKXGMM.js";import{u as re}from"./index-DRV1MUeg.js";import{C as Je}from"./index-BY9jGxdk.js";import{d as Qe,w as Ze}from"./bundle.esm.min-B-HQpnrw.js";import{a as ea}from"./index.esm-DCQn2FO4.js";import{M as aa}from"./index-Bskps18W.js";import{T as la}from"./index-D3iHHJgH.js";import{M as sa}from"./index-mrXLwnSf.js";import{m as W}from"./metaTypes-Bb9tjSPe.js";import{S as ta}from"./SaveFormModal-Rs9bFbHG.js";import"./index-Cwt3Qm9G.js";import"./InputHidden-Sd_YdD40.js";import"./Label-DH8FgXCw.js";import"./Input-Dag95jow.js";import"./validation-dtG0NF0D.js";import"./Select-Cp1uHe-V.js";import"./forms-AWTgcgiu.js";import"./index-kc5wfrYu.js";import"./posts-DQvmjIOC.js";import"./SelectMulti-BMDK2H7z.js";const ra="/wp-content/plugins/advanced-custom-post-type/assets/build/assets/map-_IUcn4PK.png",ia="/wp-content/plugins/advanced-custom-post-type/assets/build/assets/map-multi-B8CB54_e.png",A=({element:a,isDragging:n})=>{const l=a.field,r=a.settings,{previewElement:p}=w(h=>h.formManager),[s,x]=S.useState(l.extra.defaultValue);S.useEffect(()=>{se("fetchFormPreviewElementAction",{field:l,previewElement:p}).then(h=>{x(h.value!==null?h.value:l.extra.defaultValue)}).catch(h=>{console.error(h.message)})},[p]),S.useEffect(()=>{p||x(l.extra.defaultValue)},[l.extra.defaultValue]);const m=n?{zIndex:1e4,padding:"8px",background:"white",borderRadius:"4px",opacity:"0.8",boxShadow:"rgba(0, 0, 0, 0.16) 0px 1px 4px"}:{},t=()=>{const h=l.extra.options?l.extra.options:[],o=a.id+"-"+ee(8);switch(l.type){case i.ADDRESS_MULTI:case i.ADDRESS:return e.jsx("div",{className:"with-border b-rounded p-4",children:e.jsx("img",{className:"w-100 b-rounded",style:{objectFit:"cover",height:"300px"},src:l.extra.isMulti?ia:ra,alt:"Maps placeholder"})});case i.QR_CODE:return e.jsx("div",{className:"with-border inline-block b-rounded p-4",children:e.jsx(E,{icon:"bx:qr",width:96})});case i.BUTTON:return e.jsx("button",{disabled:l.extra.disabled?l.extra.disabled:!1,id:a.id,type:l.extra.type,className:`acpt-btn acpt-btn-default acpt-btn-primary ${r.css}`,children:l.extra.label},o);case i.CAPTCHA:return e.jsxs("div",{className:"i-flex-center p-8 s-8 bg-pale-gray with-border b-rounded",children:[e.jsx(E,{icon:"logos:recaptcha",width:32}),e.jsx("span",{children:"CAPTCHA"})]});case i.CHECKBOX:return e.jsx("div",{className:"i-flex-center s-8",children:h&&h.map(u=>e.jsxs("div",{className:"i-flex-center s-4",children:[e.jsx("input",{disabled:l.extra.disabled?l.extra.disabled:!1,type:"checkbox",checked:u.value===s,value:u.value,id:u.id},o),e.jsx("label",{htmlFor:u.id,children:u.label})]}))});case i.COLOR:return e.jsx("input",{type:"color",disabled:l.extra.disabled?l.extra.disabled:!1,className:`form-control ${r.css}`,id:a.id,readOnly:!0,defaultValue:s},o);case i.TIME:return e.jsx("input",{type:"time",disabled:l.extra.disabled?l.extra.disabled:!1,className:`form-control ${r.css}`,id:a.id,readOnly:!0,placeholder:l.extra.placeholder,defaultValue:s},o);case i.WORDPRESS_POST_DATE:case i.DATE:case i.DATE_TIME:return e.jsx("input",{type:"date",disabled:l.extra.disabled?l.extra.disabled:!1,className:`form-control ${r.css}`,id:a.id,readOnly:!0,placeholder:l.extra.placeholder,defaultValue:s},o);case i.WORDPRESS_USER_EMAIL:case i.EMAIL:return e.jsx("input",{type:"email",disabled:l.extra.disabled?l.extra.disabled:!1,className:`form-control ${r.css}`,id:a.id,readOnly:!0,placeholder:l.extra.placeholder,defaultValue:s},o);case i.WORDPRESS_POST_THUMBNAIL:case i.FILE:return e.jsx("input",{type:"file",disabled:l.extra.disabled?l.extra.disabled:!1,className:`form-control ${r.css}`,id:a.id,readOnly:!0,placeholder:l.extra.placeholder,defaultValue:s},o);case i.HIDDEN:return e.jsxs(q,{style:T.DEFAULT,children:["HIDDEN ",s?`[${s}]`:""]});case i.ICON:return e.jsx(E,{icon:"bx:wink-smile",width:24});case i.NUMBER:return e.jsx("input",{disabled:l.extra.disabled?l.extra.disabled:!1,type:"number",className:`form-control ${r.css}`,id:a.id,readOnly:!0,min:l.extra.min,max:l.extra.max,step:l.extra.step,placeholder:l.extra.placeholder,defaultValue:s},o);case i.RADIO:return e.jsx("div",{className:"i-flex-center s-8",children:h&&h.map(u=>e.jsxs("div",{className:"i-flex-center s-4",children:[e.jsx("input",{disabled:l.extra.disabled?l.extra.disabled:!1,type:"radio",checked:u.value===s,value:u.value,id:u.id},o),e.jsx("label",{htmlFor:u.id,children:u.label})]}))});case i.RANGE:return e.jsx("input",{type:"range",className:`form-control ${r.css}`,id:a.id,readOnly:!0,min:l.extra.min,max:l.extra.max,step:l.extra.step,defaultValue:s,disabled:!0},o);case i.RATING:let v=isNaN(parseInt(s))?0:parseInt(s);v<0&&(v=0),v>5&&(v=5);const b=5-v;return e.jsxs("div",{className:"i-flex-center",children:[[...Array(s)].map((u,N)=>e.jsx(E,{icon:"bxs:star",width:24})),[...Array(b)].map((u,N)=>e.jsx(E,{icon:"bx:star",width:24}))]});case i.LIST:const g=[];for(let u=0;u<2;u++)g.push(e.jsx("input",{disabled:l.extra.disabled?l.extra.disabled:!1,type:"text",className:`form-control ${r.css}`,id:a.id.i,readOnly:!0,placeholder:l.extra.placeholder},o));return e.jsxs("div",{className:"flex-column s-8",children:[g.map(u=>e.jsx("div",{children:u})),e.jsx("a",{href:"#",onClick:u=>{u.preventDefault()},children:c("Add element")})]});case i.REPEATER:const C=l.extra.layout;if(C==="table"){const u=[];for(let N=0;N<3;N++)u.push(e.jsx("input",{type:"text",className:`form-control ${r.css}`,id:a.id.i,readOnly:!0},N));return e.jsxs(O.Fragment,{children:[e.jsxs("table",{className:"acpt-table with-border",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Field A"}),e.jsx("th",{children:"Field B"}),e.jsx("th",{children:"Field C"})]})}),e.jsx("tbody",{children:e.jsx("tr",{children:u.map(N=>e.jsx("td",{children:N}))})})]}),e.jsx("a",{href:"#",className:"mt-8",onClick:N=>{N.preventDefault()},children:c("Add element")})]})}if(C==="block"){const u=[];for(let N=0;N<2;N++)u.push(e.jsx("table",{className:"acpt-table with-border",children:e.jsxs("tr",{children:[e.jsx("th",{children:e.jsxs("h3",{children:["ELEMENT #",N+1]})}),e.jsx("td",{children:e.jsxs("div",{className:"w-100 i-flex-center s-8",children:[e.jsx("input",{type:"text",className:`form-control ${r.css}`,id:`${a.id}_${N}_1`,readOnly:!0}),e.jsx("input",{type:"text",className:`form-control ${r.css}`,id:`${a.id}_${N}_2`,readOnly:!0})]})})]})}));return e.jsxs("div",{className:"flex-column s-8",children:[u.map(N=>N),e.jsx("a",{href:"#",onClick:N=>{N.preventDefault()},children:c("Add element")})]})}const d=[];for(let u=0;u<2;u++)d.push(e.jsxs("div",{className:"flex-column p-8 s-8 with-border b-rounded",children:[e.jsxs("h3",{children:["ELEMENT #",u+1]}),e.jsxs("div",{className:"w-100 flex-column s-8",children:[e.jsx("input",{type:"text",className:`form-control ${r.css}`,id:`${a.id}_${u}_1`,readOnly:!0}),e.jsx("input",{type:"text",className:`form-control ${r.css}`,id:`${a.id}_${u}_2`,readOnly:!0})]})]}));return e.jsxs("div",{className:"flex-column s-8",children:[d.map(u=>u),e.jsx("a",{href:"#",onClick:u=>{u.preventDefault()},children:c("Add element")})]});case i.TURNSTILE:return e.jsxs("div",{className:"i-flex-center p-8 s-8 bg-pale-gray with-border b-rounded",children:[e.jsx(E,{icon:"devicon:cloudflare",width:32}),e.jsx("span",{children:"TURNSTILE"})]});case i.WORDPRESS_POST_TAXONOMIES:let j=[];for(const[u,N]of Object.entries(h)){let z=[];for(const[ve,ye]of Object.entries(N))z.push({label:ye,value:ve});j.push({label:u,options:z})}return e.jsx("select",{className:`form-control ${r.css}`,id:a.id,disabled:!0,multiple:l.extra.isMulti,placeholder:l.extra.placeholder,defaultValue:s,children:j&&j.map(u=>e.jsx("optgroup",{label:u.label,children:u.options&&u.options.map(N=>e.jsx("option",{value:N.value,children:N.label}))}))},o);case i.POST_OBJECT_MULTI:case i.POST_OBJECT:const y=()=>document.globals&&document.globals.globals&&document.globals.globals.find&&document.globals.globals.find.POST_ID?document.globals.globals.find.POST_ID.filter(u=>u.value!==null):[];return e.jsx("select",{className:`form-control ${r.css}`,id:a.id,disabled:!0,multiple:l.extra.isMulti,placeholder:l.extra.placeholder,defaultValue:s,children:y()&&y().map(u=>e.jsx("optgroup",{label:u.label,children:u.options&&u.options.map(N=>e.jsx("option",{value:N.value,children:N.label}))}))},o);case i.TERM_OBJECT_MULTI:case i.TERM_OBJECT:const V=()=>document.globals&&document.globals.globals&&document.globals.globals.find&&document.globals.globals.find.TERM_ID?document.globals.globals.find.TERM_ID.filter(u=>u.value!==null):[];return e.jsx("select",{className:`form-control ${r.css}`,id:a.id,disabled:!0,multiple:l.extra.isMulti,placeholder:l.extra.placeholder,defaultValue:s,children:V()&&V().map(u=>e.jsx("optgroup",{label:u.label,children:u.options&&u.options.map(N=>e.jsx("option",{value:N.value,children:N.label}))}))},o);case i.USER_MULTI:case i.USER:const D=()=>document.globals&&document.globals.globals&&document.globals.globals.find&&document.globals.globals.find.USER_ID?document.globals.globals.find.USER_ID.filter(u=>u.value!==null):[];return e.jsx("select",{className:`form-control ${r.css}`,id:a.id,disabled:!0,multiple:l.extra.isMulti,placeholder:l.extra.placeholder,defaultValue:s,children:D().map(u=>e.jsx("option",{value:u.value,children:u.label}))},o);case i.WORDPRESS_POST_AUTHOR:case i.SELECT:return e.jsx("select",{className:`form-control ${r.css}`,id:a.id,disabled:!0,multiple:l.extra.isMulti,placeholder:l.extra.placeholder,defaultValue:s,children:h&&h.map(u=>e.jsx("option",{value:u.value,children:u.label}))},o);case i.WORDPRESS_TERM_DESCRIPTION:case i.WORDPRESS_USER_BIO:case i.WORDPRESS_POST_CONTENT:case i.WORDPRESS_POST_EXCERPT:case i.TEXTAREA:return e.jsxs(O.Fragment,{children:[l.extra.wysiwyg&&e.jsxs("div",{className:"i-flex-center s-12 p-12",children:[e.jsx(E,{icon:"bx:bx-bold",width:24}),e.jsx(E,{icon:"bx:bx-italic",width:24}),e.jsx(E,{icon:"bx:bx-link",width:24}),e.jsx(E,{icon:"bx:bxs-quote-right",width:24}),e.jsx(E,{icon:"bx:bx-code",width:24}),e.jsx(E,{icon:"bx:bx-image",width:24}),e.jsx(E,{icon:"bx:bx-list-ol",width:24}),e.jsx(E,{icon:"bx:bx-list-ul",width:24})]}),e.jsx("textarea",{disabled:l.extra.disabled?l.extra.disabled:!1,className:`form-control ${r.css}`,id:a.id,rows:l.extra.rows,cols:l.extra.cols,readOnly:!0,placeholder:l.extra.placeholder,defaultValue:s},o)]});case i.TOGGLE:return e.jsx("div",{className:"toggle-group",children:e.jsxs("label",{className:"toggle",children:[e.jsx("input",{disabled:l.extra.disabled?l.extra.disabled:!1,readOnly:!0,type:"checkbox",checked:l.extra.checked}),e.jsx("span",{className:"slider round"})]})});case i.URL:const R=()=>typeof s=="object"&&s.urlLabel?s.urlLabel:typeof l.extra.defaultValue=="object"&&l.extra.defaultValue.urlLabel?l.extra.defaultValue.urlLabel:null,I=()=>typeof s=="object"&&s.url?s.url:typeof l.extra.defaultValue=="object"?l.extra.defaultValue.url?l.extra.defaultValue.url:null:s;return l.extra.hideLabel?e.jsx("input",{disabled:l.extra.disabled?l.extra.disabled:!1,type:"url",className:`form-control ${r.css}`,id:a.id,readOnly:!0,placeholder:l.extra.placeholder,defaultValue:I()},o):e.jsxs("div",{className:"i-flex-center s-8 w-100",children:[e.jsx("input",{disabled:l.extra.disabled?l.extra.disabled:!1,type:"url",className:`form-control ${r.css}`,id:a.id,readOnly:!0,placeholder:l.extra.placeholder,defaultValue:I()},o),e.jsx("input",{disabled:l.extra.disabled?l.extra.disabled:!1,type:"text",className:`form-control ${r.css}`,id:`${a.id}_label`,readOnly:!0,placeholder:l.extra.labelPlaceholder,defaultValue:R()},`${o}_label`)]});case i.CURRENCY:case i.LENGTH:case i.WEIGHT:const ge=()=>s!==null&&l.type===i.CURRENCY&&typeof s=="object"&&s.currency?s.currency:s!==null&&l.type===i.LENGTH&&typeof s=="object"&&s.length?s.length:s!==null&&l.type===i.WEIGHT&&typeof s=="object"&&s.weight?s.weight:l.extra.defaultValue!==null&&l.type===i.CURRENCY&&typeof l.extra.defaultValue=="object"?l.extra.defaultValue.currency?l.extra.defaultValue.currency:null:l.extra.defaultValue!==null&&l.type===i.LENGTH&&typeof l.extra.defaultValue=="object"?l.extra.defaultValue.length?l.extra.defaultValue.length:null:l.extra.defaultValue!==null&&l.type===i.WEIGHT&&typeof l.extra.defaultValue=="object"?l.extra.defaultValue.weight?l.extra.defaultValue.weight:null:l.extra.uom?l.extra.uom:null,je=()=>s!==null&&l.type===i.CURRENCY&&typeof s=="object"&&s.currencyValue?s.currencyValue:s!==null&&l.type===i.LENGTH&&typeof s=="object"&&s.lengthValue?s.lengthValue:s!==null&&l.type===i.WEIGHT&&typeof s=="object"&&s.weightValue?s.weightValue:l.extra.defaultValue!==null&&l.type===i.CURRENCY&&typeof l.extra.defaultValue=="object"?l.extra.defaultValue.currencyValue?l.extra.defaultValue.currencyValue:null:l.extra.defaultValue!==null&&l.type===i.LENGTH&&typeof l.extra.defaultValue=="object"?l.extra.defaultValue.lengthValue?l.extra.defaultValue.lengthValue:null:l.extra.defaultValue!==null&&l.type===i.WEIGHT&&typeof l.extra.defaultValue=="object"?l.extra.defaultValue.weightValue?l.extra.defaultValue.weightValue:null:s;return e.jsxs("div",{className:"i-flex-center s-8 w-100",children:[e.jsx("input",{type:"text",className:`w-100 form-control ${r.css}`,id:a.id,readOnly:!0,defaultValue:je(),disabled:!0},o),e.jsx("span",{children:ge()})]});case i.PASSWORD:case i.WORDPRESS_USER_PASSWORD:return e.jsx("input",{type:"password",className:`form-control ${r.css}`,id:a.id,readOnly:!0,defaultValue:s,disabled:!0},o)}return e.jsx("input",{disabled:l.extra.disabled?l.extra.disabled:!1,type:"text",className:`form-control ${r.css}`,id:a.id,readOnly:!0,placeholder:l.extra.placeholder,defaultValue:typeof s=="string"?s:null},o)};return n?e.jsx("span",{style:m,children:l.name}):e.jsx("div",{className:`text-${r.alignment}`,style:m,children:e.jsxs("div",{className:r.layout==="inline"?"i-flex-center s-8 w-100":"",children:[l.label!==""&&l.label!==null&&e.jsxs("label",{htmlFor:a.id,className:"form-label",style:r.layout==="inline"?{margin:"0"}:null,children:[l.label,a.field.isRequired&&e.jsx("span",{className:"color-danger",children:"*"})]}),e.jsxs("div",{className:"w-100",children:[t(),l.description!==""&&l.description!==null&&e.jsx("div",{className:"form-description color-light-gray",children:l.description})]})]})})};A.propTypes={element:f.object.isRequired,isDragging:f.bool};const ie=({element:a})=>{const n=$(),{activeElement:l}=w(R=>R.formManager),r=a.settings,{setNodeRef:p,isDragging:s,transform:x,listeners:m,attributes:t}=ae({id:a.id,data:{fromCanvas:!0}}),h={transform:le.Translate.toString(x)},o=M({id:a.id+"-top",data:{element:a,isTopHalfElement:!0}}),v=M({id:a.id+"-bottom",data:{element:a,isBottomHalfElement:!0}}),b=M({id:a.id+"-left",data:{element:a,isLeftHalfElement:!0}}),g=M({id:a.id+"-right",data:{element:a,isRightHalfElement:!0}}),C=()=>l?l.id===a.id:!1,d=()=>{n(Ae({id:a.id}))},j=()=>{n(Y())},y=()=>{n(Pe({id:a.id}))},V=()=>{n(J({id:a.id}))},D=document.getElementById(a.id);return S.useEffect(()=>{if(D){const R=I=>{(I.code==="Delete"||I.keyCode===46)&&n(J({id:a.id}))};return D.addEventListener("keydown",R,!0),()=>{D.removeEventListener("keydown",R,!0)}}},[D]),s?e.jsx("div",{className:`canvas-element col-${r.cols}`,"data-cy":`canvas-element-${a.id}`,children:e.jsx("div",{className:"inside",children:e.jsx("div",{className:"element",children:e.jsx(A,{element:a})})})}):e.jsxs("div",{tabIndex:0,ref:p,id:a.id,style:h,"data-cy":`canvas-element-${a.id}`,className:`canvas-element col-${r.cols} ${C()?"active":""}`,children:[o.isOver&&e.jsx("div",{className:"top-half-hover-placeholder"}),v.isOver&&e.jsx("div",{className:"bottom-half-hover-placeholder"}),b.isOver&&e.jsx("div",{className:"left-half-hover-placeholder"}),g.isOver&&e.jsx("div",{className:"right-half-hover-placeholder"}),e.jsx("div",{ref:o.setNodeRef,className:"top-half"}),e.jsx("div",{ref:v.setNodeRef,className:"bottom-half"}),e.jsx("div",{ref:b.setNodeRef,className:"left-half"}),e.jsx("div",{ref:g.setNodeRef,className:"right-half"}),e.jsxs("div",{className:`inside ${C()?"active":""}`,children:[C()&&e.jsxs("div",{className:"actions flex s-8",children:[e.jsx("small",{children:a.field.name}),e.jsx("span",{className:"cursor-move handle",...t,...m,children:e.jsx(E,{icon:"bx:move",width:14})}),e.jsx("a",{href:"#",onClick:R=>{R.preventDefault(),R.stopPropagation(),j()},children:e.jsx(E,{icon:"bx:x",width:14})}),e.jsx("a",{href:"#",onClick:R=>{R.preventDefault(),R.stopPropagation(),y()},children:e.jsx(E,{icon:"bx:copy",width:14})}),e.jsx("a",{href:"#",onClick:R=>{R.preventDefault(),R.stopPropagation(),V()},children:e.jsx(E,{icon:"bx-trash",width:14,color:Me()})})]}),e.jsx("div",{onClick:R=>{R.preventDefault(),R.stopPropagation(),d()},className:"element",children:e.jsx(A,{element:a})})]})]})};ie.propTypes={element:f.shape({field:f.object.isRequired,overlayItem:f.element.isRequired,previewItem:f.element.isRequired}).isRequired};const da=()=>{const{elements:a}=w(t=>t.formManager),{listeners:n,setNodeRef:l,transform:r,transition:p,isOver:s}=M({id:"canvas-drop-area",data:{isCanvas:!0}}),x={transform:le.Translate.toString(r),transition:p},m=e.jsx("div",{className:"flex-absolute-center",children:e.jsx("h4",{children:c("Drop elements here")})});return e.jsxs("div",{"data-cy":"form-canvas",ref:l,className:`col-9 canvas with-shadow bg-white b-rounded p-24 ${s?"canvas-hover":""}`,style:x,...n,children:[!s&&a.length===0&&m,e.jsx("div",{className:"canvas-container","data-cy":"form-canvas-container",children:a.map((t,h)=>e.jsx(ie,{element:t},h))})]})},P=({field:a,hidden:n=!1,isDragging:l=!1,mode:r,isActive:p=!0})=>{const s=()=>a.group==="WordPress post fields"?T.INFO:a.group==="WordPress taxonomy fields"?T.WARNING:a.group==="WordPress user fields"?T.DANGER:a.group==="ACPT fields"?T.SECONDARY:T.DEFAULT,x=()=>{const{icon:m}=Ne(a.type);return m};return r==="overlay"||r==="dragging"?e.jsx("div",{className:`acpt-badge acpt-badge-${s()} m-0 cursor-move with-shadow`,style:{width:"150px"},children:e.jsxs("span",{className:"flex-between",children:[e.jsx("span",{className:"text-ellipsis",children:a.name}),e.jsx(E,{icon:x(),width:18})]})}):e.jsx("div",{className:`acpt-badge acpt-badge-${s()} m-0 ${n?"hidden":"block"} ${p?"cursor-move":"disabled"} ${l?"with-border":""}`,children:e.jsxs("div",{className:"flex-between",children:[e.jsx("span",{className:"text-ellipsis",children:a.name}),e.jsx(E,{icon:x(),width:18})]})})};P.propTypes={hidden:f.bool,isDragging:f.bool,mode:f.oneOf(["overlay","dragging"]),isActive:f.bool,field:f.shape({id:f.string.isRequired,name:f.string.isRequired,group:f.string.isRequired,type:f.string.isRequired}).isRequired};const de=({field:a,hidden:n})=>{const{elements:l}=w(h=>h.formManager),r={css:"",cols:"12",layout:"block",alignment:"left"},{attributes:p,listeners:s,setNodeRef:x,isDragging:m}=ae({id:a.id,data:{field:a,previewItem:e.jsx(A,{element:{field:a}}),settings:r,validationRules:[],fromSidebar:!0}});return(a.isReusable===!0?!0:l.findIndex(h=>h.field.name===a.name)===-1)?e.jsx("div",{"data-cy":`field-panel-element-${a.name}`,className:n?"hidden":"",ref:x,...s,...p,children:e.jsx(P,{field:a,hidden:n,isDragging:m,isActive:!0})}):e.jsx("div",{className:n?"hidden":"",children:e.jsx(P,{field:a,hidden:n,isDragging:m,isActive:!1})})};de.propTypes={hidden:f.bool,field:f.shape({id:f.string.isRequired,name:f.string.isRequired,group:f.string.isRequired,type:f.string.isRequired,extra:f.array.isRequired}).isRequired};const ne=({name:a,fields:n,search:l})=>(()=>{if(!l)return!1;let p=0;return n.map(s=>{l&&X(s.name,l)&&p++}),p===0})()?null:e.jsxs("div",{children:[e.jsx("h4",{className:"mb-12",children:c(a)}),e.jsx("div",{className:"grid grid-2 s-12","data-cy":`field-panel-group-${Ce(a)}`,children:n.map(p=>e.jsx(de,{field:p,hidden:l?!X(p.name,l):!1},p.id))})]});ne.propTypes={name:f.string.isRequired,fields:f.array.isRequired,search:f.string};const ce=({fields:a})=>{const[n,l]=S.useState(null),r=()=>{let s=[],x=[];return a.map(m=>{s[m.group]||(s[m.group]=[]),s[m.group].push(m)}),Object.keys(s).map(m=>{x.push({name:m,fields:s[m]})}),x},p=s=>{l(s)};return e.jsxs("div",{className:"flex-column s-24 p-24",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"mb-12",children:c("Form fields")}),e.jsx("input",{type:"text","data-cy":"form-fields-search",className:"form-control",placeholder:c("Search"),onChangeCapture:s=>p(s.target.value)})]}),r().map((s,x)=>e.jsx(ne,{name:s.name,fields:s.fields,search:n},x))]})};ce.propTypes={fields:f.array.isRequired};const oe=({elementId:a,isTextual:n,isMedia:l,index:r,rule:p})=>{const s=$(),[x,m]=S.useState(p.condition!=="blank"&&p.condition!=="not_blank"),t=j=>`rules-${a}-${r}-${j}`,h=[{value:"blank",label:"blank"},{value:"not_blank",label:"not blank"},{value:"=",label:"="},{value:"!=",label:"!="},{value:">",label:">"},{value:">=",label:">="},{value:"<",label:"<"},{value:"<=",label:"<="},{value:"max",label:"max"},{value:"min",label:"min"},{value:"regex",label:"regex"}],o=[{value:"max_size",label:"max size"},{value:"min_size",label:"min size"}],v=()=>l?o:h,b=j=>{let y;switch(j){case"blank":y="Value is not blank";break;case"not_blank":y="Value is blank";break;case"=":y="Value is not equal to {{v}}";break;case"!=":y="Value is equal to {{v}}";break;case">":y="Value is lower or equals than {{v}}";break;case">=":y="Value is lower than {{v}}";break;case"<":y="Value is greatest or equals than {{v}}";break;case"<=":y="Value is greatest than {{v}}";break;case"max":y="The maximum length is {{v}}";break;case"min":y="The minimum length is {{v}}";break;case"max_size":y="The maximum size is {{v}}";break;case"min_size":y="The minimum size is {{v}}";break;case"regex":y="Regex value is not matching {{v}}";break}return c(y)},g=j=>{const y={...p};y.condition=j,y.message=b(j),j==="blank"||j==="not_blank"?(y.value=null,m(!1)):m(!0),s(K({elementId:a,ruleIndex:r,rule:y}))},C=j=>{const y={...p};y.value=j,s(K({elementId:a,ruleIndex:r,rule:y}))},d=j=>{const y={...p};y.message=j,s(K({elementId:a,ruleIndex:r,rule:y}))};return!n&&!l?null:e.jsxs("fieldset",{className:"acpt-fieldset",children:[e.jsxs("legend",{children:["Rule #",r+1]}),e.jsx("div",{className:"flex s-8",children:e.jsxs("div",{className:"flex-column s-8",children:[e.jsxs("div",{className:"i-flex-center s-8",children:[e.jsx("div",{className:"w-60",children:e.jsx("select",{className:"form-control",id:t("condition"),defaultValue:p.condition,onChangeCapture:j=>g(j.target.value),children:v().map((j,y)=>e.jsx("option",{value:j.value,children:j.label},y))},t("condition"))}),e.jsx("div",{className:"w-40",children:x?e.jsx("input",{type:"text",id:t("value"),className:"form-control",defaultValue:p.value,onChangeCapture:j=>C(j.target.value)},t("value")):e.jsx("input",{type:"text",readOnly:!0,disabled:!0,placeholder:null,defaultValue:null,id:t("value"),className:"form-control",value:null},t("value"))})]}),e.jsx("input",{type:"text",id:t("message"),className:"form-control",value:p.message,onChangeCapture:j=>d(j.target.value)},t("message")),e.jsx("a",{className:`color-${T.DANGER}`,href:"#",onClick:j=>{j.preventDefault(),s(Fe({id:p.id,elementId:a}))},children:c("Delete")})]})})]})};oe.propTypes={elementId:f.string.isRequired,isTextual:f.bool.isRequired,isMedia:f.bool.isRequired,index:f.number.isRequired,rule:f.object.isRequired};const ue=({element:a})=>{const n=$(),[l]=re();return!a.field||!a.field.validation?null:e.jsxs("div",{className:"flex-column s-24",children:[e.jsxs("div",{className:"flex-between",children:[e.jsx("label",{className:"form-label",children:c("Field required")}),e.jsx("div",{className:"toggle-group",children:e.jsxs("label",{className:"toggle",children:[e.jsx("input",{id:`required-${a.id}`,name:`required-${a.id}`,type:"checkbox",defaultChecked:a.field.isRequired,onChangeCapture:r=>{n(Le({id:a.id,value:r.target.checked}))}},`required-${a.id}`),e.jsx("span",{className:"slider round"})]})})]}),(a.field.isTextual||a.field.isMedia)&&e.jsxs(O.Fragment,{children:[e.jsx("div",{className:"flex-column s-24",ref:l,children:a.validationRules.length>0?e.jsx(O.Fragment,{children:a.validationRules.map((r,p)=>e.jsx(oe,{elementId:a.id,isTextual:a.field.isTextual,isMedia:a.field.isMedia,rule:r,index:p},r.id))}):e.jsx(q,{style:T.WARNING,children:c('No rules already created. Create the first one now by clicking the button "Add rule"!')})}),e.jsx("a",{href:"#",onClick:r=>{r.preventDefault(),n(qe({id:a.id,isTextual:a.field.isTextual,isMedia:a.field.isMedia}))},children:c("Add rule")})]})]})};ue.propTypes={element:f.object.isRequired};const he=({element:a})=>{const n=$(),[l,r]=S.useState(a.field.name),{register:p,setValue:s}=ea({mode:"all"});S.useEffect(()=>{s(`name-${a.id}`,l)},[l]);const x=t=>{const h=Qe(Ze(t));r(h),n(U({id:a.id,key:"name",value:h}))},m=()=>a.field.type!==i.BUTTON&&a.field.type!==i.HIDDEN;return e.jsxs("div",{className:"flex-column s-24",children:[e.jsxs("div",{className:"flex-between",children:[e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:c("Layout")}),e.jsxs("div",{className:"flex s-4",children:[e.jsx("label",{htmlFor:`layout-${a.id}`,className:`acpt-btn-switch ${a.settings.layout==="block"?"active":""}`,onClickCapture:t=>{n(_({id:a.id,key:"layout",value:"block"}))},children:e.jsx(E,{icon:"akar-icons:two-line-vertical",width:18})}),e.jsx("label",{htmlFor:`layout-${a.id}`,className:`acpt-btn-switch ${a.settings.layout==="inline"?"active":""}`,onClickCapture:t=>{n(_({id:a.id,key:"layout",value:"inline"}))},children:e.jsx(E,{icon:"akar-icons:two-line-horizontal",width:18})})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("label",{className:"form-label",children:c("Alignment")}),e.jsxs("div",{className:"flex s-4",children:[e.jsx("label",{htmlFor:`layout-${a.id}`,className:`acpt-btn-switch ${a.settings.alignment==="left"?"active":""}`,onClickCapture:t=>{n(_({id:a.id,key:"alignment",value:"left"}))},children:e.jsx(E,{icon:"bx:align-left",width:18})}),e.jsx("label",{htmlFor:`layout-${a.id}`,className:`acpt-btn-switch ${a.settings.alignment==="center"?"active":""}`,onClickCapture:t=>{n(_({id:a.id,key:"alignment",value:"center"}))},children:e.jsx(E,{icon:"bx:align-middle",width:18})}),e.jsx("label",{htmlFor:`layout-${a.id}`,className:`acpt-btn-switch ${a.settings.alignment==="right"?"active":""}`,onClickCapture:t=>{n(_({id:a.id,key:"alignment",value:"right"}))},children:e.jsx(E,{icon:"bx:align-right",width:18})})]})]})]}),e.jsxs("div",{className:`name-${a.id}`,children:[e.jsx("label",{className:"form-label",htmlFor:`name-${a.id}`,children:c("Name")}),e.jsx("input",{className:"form-control",name:`name-${a.id}`,id:`name-${a.id}`,defaultValue:a.field.name,disabled:a.field.isReusable===!1||a.field.metaFieldId!==null,...p(`name-${a.id}`),onChangeCapture:t=>{x(t.target.value)}},`name-${a.id}`)]}),e.jsxs("div",{className:`cols-${a.id}`,children:[e.jsx("label",{className:"form-label",htmlFor:`cols-${a.id}`,children:c("Columns")}),e.jsx("div",{className:"acpt-select",children:e.jsxs("select",{name:`cols-${a.id}`,className:"form-control",id:`cols-${a.id}`,defaultValue:a.settings.cols,onChangeCapture:t=>{n(_({id:a.id,key:"cols",value:t.target.value}))},children:[e.jsx("option",{value:"3",children:"3"}),e.jsx("option",{value:"4",children:"4"}),e.jsx("option",{value:"6",children:"6"}),e.jsx("option",{value:"8",children:"8"}),e.jsx("option",{value:"9",children:"9"}),e.jsx("option",{value:"12",children:"12"})]},`cols-${a.id}`)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"ID"}),e.jsx(Je,{text:a.id})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",htmlFor:`css-${a.id}`,children:c("CSS classes")}),e.jsx("input",{className:"form-control",name:"css",id:`css-${a.id}`,defaultValue:a.settings.css,onChangeCapture:t=>{n(_({id:a.id,key:"css",value:t.target.value}))}},`css-${a.id}`)]}),m()&&e.jsxs(O.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"form-label",htmlFor:`label-${a.id}`,children:c("Label")}),e.jsx("input",{className:"form-control",name:"label",id:`label-${a.id}`,defaultValue:a.field.label,onChangeCapture:t=>{n(U({id:a.id,key:"label",value:t.target.value}))}},`label-${a.id}`)]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",htmlFor:`description-${a.id}`,children:c("Description")}),e.jsx("textarea",{className:"form-control",name:"description",id:`description-${a.id}`,cols:30,rows:6,defaultValue:a.field.description,onChangeCapture:t=>{n(U({id:a.id,key:"description",value:t.target.value}))}},`description-${a.id}`)]})]})]})};he.propTypes={element:f.object.isRequired};const pe=({elementId:a,option:n,optionIndex:l})=>{const r=$(),p=x=>{const m={...n};m.value=x,r(Q({elementId:a,optionIndex:l,option:m}))},s=x=>{const m={...n};m.label=x,r(Q({elementId:a,optionIndex:l,option:m}))};return e.jsxs("div",{className:"i-flex-center s-8",children:[e.jsx("div",{className:"w-100",children:e.jsx("input",{type:"text",className:"form-control",defaultValue:n.label,onChangeCapture:x=>s(x.target.value)})}),e.jsx("div",{className:"w-100",children:e.jsx("input",{type:"text",className:"form-control",defaultValue:n.value,onChangeCapture:x=>p(x.target.value)})}),e.jsx("a",{href:"#",onClick:x=>{x.preventDefault(),r(Ke({id:n.id,elementId:a}))},children:e.jsx(la,{icon:!1,tip:c("Delete"),label:e.jsx(E,{icon:"bx-trash",width:18,color:"#F94144"})})})]})};pe.propTypes={elementId:f.string.isRequired,optionIndex:f.number.isRequired,option:f.object.isRequired};const xe=({elementId:a})=>{const n=$(),[l,r]=S.useState(!1),[p,s]=S.useState(null),[x,m]=S.useState(null),[t,h]=S.useState(!1);S.useEffect(()=>{t&&(r(!0),se("fetchDatasetsAction",{}).then(b=>{let g=[{value:null,label:c("Select"),items:[]}];b.records&&b.records.map(C=>{g.push({value:C.id,label:C.label?C.label:C.name,items:C.items?C.items:[]})}),s(g),r(!1)}).catch(b=>{console.error(b.message),r(!1)}))},[t]);const o=()=>{const b=p.filter(C=>C.value===x);if(b.length!==1)return;const g=b[0].items;console.log(g),g.map(C=>{n(te({elementId:a,label:C.label,value:C.value}))}),B.success(c("Dataset loaded correctly")),h(!t)},v=[e.jsx(L,{style:T.PRIMARY,disabled:x===null,onClick:b=>{b.preventDefault(),o()},children:c("Load dataset")}),e.jsx(L,{style:T.DANGER,onClick:b=>{b.preventDefault(),h(!t)},children:c("Close")})];return e.jsxs(O.Fragment,{children:[e.jsx(sa,{title:c("Load dataset"),visible:t,padding:0,buttons:v,children:l?e.jsx("div",{className:"p-24",children:c("Loading...")}):e.jsx("div",{className:"p-24",children:e.jsx("select",{id:"dataset",className:"form-control default",onChangeCapture:b=>m(b.target.value),children:p&&p.map(b=>e.jsx("option",{value:b.value,children:b.label}))})})}),e.jsx("a",{href:"#",onClick:b=>{b.preventDefault(),h(!t)},children:c("Load dataset")})]})};xe.propTypes={elementId:f.string.isRequired};const me=({elementId:a,options:n})=>{const l=$(),[r]=re();return e.jsxs("div",{children:[e.jsx("label",{className:"form-label",htmlFor:`options-${a}`,children:c("Options")}),e.jsxs("div",{className:"flex-column s-8",ref:r,children:[n&&n.length>0?e.jsx(O.Fragment,{children:n.map((p,s)=>e.jsx(pe,{elementId:a,option:p,optionIndex:s},s))}):e.jsx(q,{style:T.WARNING,children:c('No options already created. Create the first one now by clicking the button "Add option"!')}),e.jsxs("div",{className:"mt-24 i-flex-center s-8",children:[e.jsx("a",{href:"#",onClick:p=>{p.preventDefault(),l(te({elementId:a}))},children:c("Add option")}),e.jsx(xe,{elementId:a})]})]})]})};me.propTypes={elementId:f.string.isRequired,options:f.array.isRequired};const fe=({element:a})=>{const l=document.globals.settings,r=$(),p=a.field.type,s=a.field.extra,x=()=>{let t=[];switch(p){case i.ADDRESS:t.push("isMulti"),t.push("defaultValue");break;case i.FILE:t.push("multiple"),t.push("accept");break;case i.NUMBER:t.push("disabled"),t.push("defaultValue"),t.push("placeholder"),t.push("min"),t.push("max"),t.push("step");break;case i.RANGE:t.push("disabled"),t.push("defaultValue"),t.push("min"),t.push("max"),t.push("step");break;case i.RADIO:case i.CHECKBOX:t.push("nullValue"),t.push("disabled"),t.push("defaultValue"),t.push("placeholder"),t.push("options");break;case i.SELECT:t.push("isMulti"),t.push("select2"),t.push("nullValue"),t.push("disabled"),t.push("defaultValue"),t.push("placeholder"),t.push("options");break;case i.WORDPRESS_USER_BIO:case i.WORDPRESS_TERM_DESCRIPTION:case i.WORDPRESS_POST_CONTENT:case i.WORDPRESS_POST_EXCERPT:case i.TEXTAREA:t.push("disabled"),t.push("defaultValue"),t.push("placeholder"),t.push("wysiwyg"),t.push("rows"),t.push("cols"),t.push("min"),t.push("max");break;case i.BUTTON:t.push("disabled"),t.push("type"),t.push("label");break;case i.DATE_RANGE:t.push("disabled"),t.push("defaultValue"),t.push("minDate"),t.push("maxDate");break;case i.ICON:case i.RATING:case i.HIDDEN:t.push("defaultValue");break;case i.WORDPRESS_POST_TAXONOMIES:t.push("isMulti"),t.push("select2"),t.push("nullValue"),t.push("disabled"),t.push("defaultValue"),t.push("placeholder");break;case i.WORDPRESS_POST_AUTHOR:t.push("select2"),t.push("nullValue"),t.push("disabled"),t.push("defaultValue"),t.push("placeholder");break;case i.TOGGLE:t.push("disabled"),t.push("checked");break;case i.CURRENCY:case i.LENGTH:case i.WEIGHT:t.push("uom"),t.push("disabled"),t.push("defaultValue"),t.push("placeholder"),t.push("min"),t.push("max");break;case i.CAPTCHA:t.push("googleSiteKey"),t.push("googleSecretKey");break;case i.TURNSTILE:t.push("turnstileSiteKey"),t.push("turnstileSecretKey");break;case i.URL:t.push("hideLabel"),t.push("disabled"),t.push("defaultValue"),t.push("placeholder"),t.push("labelDefaultValue"),t.push("labelPlaceholder"),t.push("min"),t.push("max");break;case i.LIST:t.push("placeholder");break;case i.REPEATER:t.push("layout");break;case i.POST:case i.POST_OBJECT:case i.POST_OBJECT_MULTI:case i.TERM_OBJECT:case i.TERM_OBJECT_MULTI:case i.USER_MULTI:case i.USER:t.push("isMulti"),t.push("select2"),t.push("nullValue"),t.push("disabled");break;default:t.push("disabled"),t.push("defaultValue"),t.push("placeholder"),t.push("min"),t.push("max");break}return t},m=t=>{switch(t){case"accept":return e.jsxs("div",{children:[e.jsx("label",{className:"form-label",htmlFor:`accept-${a.id}`,children:c("Accept")}),e.jsx("input",{className:"form-control",name:"accept",type:"text",id:`accept-${a.id}`,defaultValue:s.accept,onChangeCapture:d=>{r(k({id:a.id,key:"accept",value:d.target.value}))}},`accept-${a.id}`)]});case"checked":return e.jsxs("div",{className:"flex-between",children:[e.jsx("label",{className:"form-label",children:c("Default value")}),e.jsx("div",{className:"toggle-group",children:e.jsxs("label",{className:"toggle",children:[e.jsx("input",{id:`checked-${a.id}`,name:`checked-${a.id}`,type:"checkbox",defaultChecked:s.checked,onChangeCapture:d=>{r(k({id:a.id,key:"checked",value:d.target.checked}))}},`checked-${a.id}`),e.jsx("span",{className:"slider round"})]})})]});case"cols":return e.jsxs("div",{children:[e.jsx("label",{className:"form-label",htmlFor:`rows-${a.id}`,children:c("Cols value")}),e.jsx("input",{className:"form-control",name:"cols",type:"number",id:`cols-${a.id}`,defaultValue:s.cols,onChangeCapture:d=>{r(k({id:a.id,key:"cols",value:d.target.value}))}},`cols-${a.id}`)]});case"defaultValue":return e.jsxs("div",{children:[e.jsx("label",{className:"form-label",htmlFor:`defaultValue-${a.id}`,children:c("Default value")}),e.jsx("input",{className:"form-control",name:"defaultValue",id:`defaultValue-${a.id}`,defaultValue:s.defaultValue,onChangeCapture:d=>{r(k({id:a.id,key:"defaultValue",value:d.target.value}))}},`defaultValue-${a.id}`)]});case"disabled":return e.jsxs("div",{className:"flex-between",children:[e.jsx("label",{className:"form-label",children:c("Disabled")}),e.jsx("div",{className:"toggle-group",children:e.jsxs("label",{className:"toggle",children:[e.jsx("input",{id:`checked-${a.id}`,name:`checked-${a.id}`,type:"checkbox",defaultChecked:s.disabled?s.disabled:!1,onChangeCapture:d=>{r(k({id:a.id,key:"disabled",value:d.target.checked}))}},`checked-${a.id}`),e.jsx("span",{className:"slider round"})]})})]});case"googleSiteKey":const h=()=>{if(s.googleSiteKey&&s.googleSiteKey!=="")return s.googleSiteKey;const d=F(l,"key","google_recaptcha_site_key");return d?d.value:null};return e.jsxs("div",{children:[e.jsx("label",{className:"form-label",htmlFor:`googleSiteKey-${a.id}`,children:c("Your Google reCAPTCHA site key")}),e.jsx("input",{className:"form-control",name:"googleSiteKey",type:"text",id:`googleSiteKey-${a.id}`,defaultValue:h(),onChangeCapture:d=>{r(k({id:a.id,key:"googleSiteKey",value:d.target.value}))}},`googleSiteKey-${a.id}`)]});case"googleSecretKey":const o=()=>{if(s.googleSecretKey&&s.googleSecretKey!=="")return s.googleSecretKey;const d=F(l,"key","google_recaptcha_secret_key");return d?d.value:null};return e.jsxs("div",{children:[e.jsx("label",{className:"form-label",htmlFor:`googleSecretKey-${a.id}`,children:c("Your Google reCAPTCHA secret key")}),e.jsx("input",{className:"form-control",name:"googleSecretKey",type:"text",id:`googleSecretKey-${a.id}`,defaultValue:o(),onChangeCapture:d=>{r(k({id:a.id,key:"googleSecretKey",value:d.target.value}))}},`googleSecretKey-${a.id}`)]});case"hideLabel":return e.jsxs("div",{className:"flex-between",children:[e.jsx("label",{className:"form-label",children:c("Hide the label")}),e.jsx("div",{className:"toggle-group",children:e.jsxs("label",{className:"toggle",children:[e.jsx("input",{id:`hideLabel-${a.id}`,name:`hideLabel-${a.id}`,type:"checkbox",defaultChecked:s.hideLabel,onChangeCapture:d=>{r(k({id:a.id,key:"hideLabel",value:d.target.checked}))}},`hideLabel-${a.id}`),e.jsx("span",{className:"slider round"})]})})]});case"isMulti":return e.jsxs("div",{className:"flex-between",children:[e.jsx("label",{className:"form-label",children:c("Multiple field")}),e.jsx("div",{className:"toggle-group",children:e.jsxs("label",{className:"toggle",children:[e.jsx("input",{id:`isMulti-${a.id}`,name:`isMulti-${a.id}`,type:"checkbox",defaultChecked:s.isMulti,disabled:a.field.metaFieldId!==null,onChangeCapture:d=>{r(k({id:a.id,key:"isMulti",value:d.target.checked}))}},`isMulti-${a.id}`),e.jsx("span",{className:"slider round"})]})})]});case"labelDefaultValue":return e.jsxs("div",{children:[e.jsx("label",{className:"form-label",htmlFor:`labelDefaultValue-${a.id}`,children:c("Label default value")}),e.jsx("input",{className:"form-control",name:"labelDefaultValue",type:"text",id:`labelDefaultValue-${a.id}`,defaultValue:s.labelDefaultValue,onChangeCapture:d=>{r(k({id:a.id,key:"labelDefaultValue",value:d.target.value}))}},`labelDefaultValue-${a.id}`)]});case"labelPlaceholder":return e.jsxs("div",{children:[e.jsx("label",{className:"form-label",htmlFor:`labelPlaceholder-${a.id}`,children:c("Label placeholder")}),e.jsx("input",{className:"form-control",name:"labelPlaceholder",type:"text",id:`labelPlaceholder-${a.id}`,defaultValue:s.labelPlaceholder,onChangeCapture:d=>{r(k({id:a.id,key:"labelPlaceholder",value:d.target.value}))}},`labelPlaceholder-${a.id}`)]});case"turnstileSiteKey":const v=()=>{if(s.turnstileSiteKey&&s.turnstileSiteKey!=="")return s.turnstileSiteKey;const d=F(l,"key","cloudflare_turnstile_site_key");return d?d.value:null};return e.jsxs("div",{children:[e.jsx("label",{className:"form-label",htmlFor:`turnstileSiteKey-${a.id}`,children:c("Your Cloudflare Turnstile site key")}),e.jsx("input",{className:"form-control",name:"turnstileSiteKey",type:"text",id:`turnstileSiteKey-${a.id}`,defaultValue:v(),onChangeCapture:d=>{r(k({id:a.id,key:"turnstileSiteKey",value:d.target.value}))}},`turnstileSiteKey-${a.id}`)]});case"turnstileSecretKey":const b=()=>{if(s.turnstileSecretKey&&s.turnstileSecretKey!=="")return s.turnstileSecretKey;const d=F(l,"key","cloudflare_turnstile_secret_key");return d?d.value:null};return e.jsxs("div",{children:[e.jsx("label",{className:"form-label",htmlFor:`turnstileSecretKey-${a.id}`,children:c("Your Cloudflare Turnstile secret key")}),e.jsx("input",{className:"form-control",name:"turnstileSecretKey",type:"text",id:`turnstileSecretKey-${a.id}`,defaultValue:b(),onChangeCapture:d=>{r(k({id:a.id,key:"turnstileSecretKey",value:d.target.value}))}},`turnstileSecretKey-${a.id}`)]});case"label":return e.jsxs("div",{children:[e.jsx("label",{className:"form-label",htmlFor:`label-${a.id}`,children:c("Label")}),e.jsx("input",{className:"form-control",name:"label",type:"text",id:`label-${a.id}`,defaultValue:s.label,onChangeCapture:d=>{r(k({id:a.id,key:"label",value:d.target.value}))}},`label-${a.id}`)]});case"max":return e.jsxs("div",{children:[e.jsx("label",{className:"form-label",htmlFor:`min-${a.id}`,children:c("Maximum value")}),e.jsx("input",{className:"form-control",name:"max",type:"number",id:`max-${a.id}`,defaultValue:s.max,onChangeCapture:d=>{r(k({id:a.id,key:"max",value:d.target.value}))}},`max-${a.id}`)]});case"maxDate":return e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:c("Maximum date")}),e.jsx("input",{className:"form-control",name:"maxDate",type:"date",id:`maxDate-${a.id}`,defaultValue:s.maxDate,onChangeCapture:d=>{r(k({id:a.id,key:"maxDate",value:d.target.value}))}},`maxDate-${a.id}`)]});case"min":return e.jsxs("div",{children:[e.jsx("label",{className:"form-label",htmlFor:`min-${a.id}`,children:c("Minimum value")}),e.jsx("input",{className:"form-control",name:"min",type:"number",id:`min-${a.id}`,defaultValue:s.min,onChangeCapture:d=>{r(k({id:a.id,key:"min",value:d.target.value}))}},`min-${a.id}`)]});case"minDate":return e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:c("Minimum date")}),e.jsx("input",{className:"form-control",name:"minDate",type:"date",id:`minDate-${a.id}`,defaultValue:s.minDate,onChangeCapture:d=>{r(k({id:a.id,key:"minDate",value:d.target.value}))}},`minDate-${a.id}`)]});case"multiple":return e.jsxs("div",{className:"flex-between",children:[e.jsx("label",{className:"form-label",children:c("Multiple")}),e.jsx("div",{className:"toggle-group",children:e.jsxs("label",{className:"toggle",children:[e.jsx("input",{id:`multiple-${a.id}`,name:`multiple-${a.id}`,type:"checkbox",defaultChecked:s.multiple,onChangeCapture:d=>{r(k({id:a.id,key:"multiple",value:d.target.checked}))}},`multiple-${a.id}`),e.jsx("span",{className:"slider round"})]})})]});case"nullValue":return e.jsxs("div",{className:"flex-between",children:[e.jsx("label",{className:"form-label",children:c("Allow empty value")}),e.jsx("div",{className:"toggle-group",children:e.jsxs("label",{className:"toggle",children:[e.jsx("input",{id:`empty-${a.id}`,name:`empty-${a.id}`,type:"checkbox",defaultChecked:s.empty,onChangeCapture:d=>{r(k({id:a.id,key:"empty",value:d.target.checked}))}},`empty-${a.id}`),e.jsx("span",{className:"slider round"})]})})]});case"select2":return e.jsxs("div",{className:"flex-between",children:[e.jsx("label",{className:"form-label",children:c("Enable select2")}),e.jsx("div",{className:"toggle-group",children:e.jsxs("label",{className:"toggle",children:[e.jsx("input",{id:`select2-${a.id}`,name:`select2-${a.id}`,type:"checkbox",defaultChecked:s.select2,onChangeCapture:d=>{r(k({id:a.id,key:"select2",value:d.target.checked}))}},`select2-${a.id}`),e.jsx("span",{className:"slider round"})]})})]});case"options":return e.jsx(me,{elementId:a.id,options:s.options});case"placeholder":return e.jsxs("div",{children:[e.jsx("label",{className:"form-label",htmlFor:`placeholder-${a.id}`,children:c("Placeholder")}),e.jsx("input",{className:"form-control",name:"placeholder",id:`placeholder-${a.id}`,defaultValue:s.placeholder,onChangeCapture:d=>{r(k({id:a.id,key:"placeholder",value:d.target.value}))}},`placeholder-${a.id}`)]});case"rows":return e.jsxs("div",{children:[e.jsx("label",{className:"form-label",htmlFor:`rows-${a.id}`,children:c("Rows value")}),e.jsx("input",{className:"form-control",name:"rows",type:"number",id:`rows-${a.id}`,defaultValue:s.rows,onChangeCapture:d=>{r(k({id:a.id,key:"rows",value:d.target.value}))}},`rows-${a.id}`)]});case"step":return e.jsxs("div",{children:[e.jsx("label",{className:"form-label",htmlFor:`step-${a.id}`,children:c("Step value")}),e.jsx("input",{className:"form-control",name:"step",type:"number",id:`step-${a.id}`,defaultValue:s.step,onChangeCapture:d=>{r(k({id:a.id,key:"step",value:d.target.value}))}},`step-${a.id}`)]});case"type":return e.jsxs("div",{children:[e.jsx("label",{className:"form-label",htmlFor:`type-${a.id}`,children:c("Type value")}),e.jsxs("select",{className:"form-control",name:"type",defaultValue:s.type,onChangeCapture:d=>{r(k({id:a.id,key:"type",value:d.target.value}))},children:[e.jsx("option",{value:"submit",children:"submit"}),e.jsx("option",{value:"reset",children:"reset"}),e.jsx("option",{value:"button",children:"button"})]})]});case"uom":if(!a.field&&!a.field.type)return null;let g=[];switch(a.field.type){case i.CURRENCY:g=document.globals.globals.uom.currency;break;case i.LENGTH:g=document.globals.globals.uom.length;break;case i.WEIGHT:g=document.globals.globals.uom.weight;break}return g.length===0?null:e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:c("UOM default value")}),e.jsx("select",{className:"form-control",name:"uom",id:`uom-${a.id}`,defaultValue:s.uom,onChangeCapture:d=>{r(k({id:a.id,key:"uom",value:d.target.value}))},children:g&&g.map((d,j)=>e.jsx("option",{value:d.value,children:d.label},j))},`uom-${a.id}`)]});case"layout":const C=[{label:c("Row"),value:"row"},{label:c("Block"),value:"block"},{label:c("Table"),value:"table"}];return e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:c("UOM default value")}),e.jsx("select",{className:"form-control",name:"layout",id:`layout-${a.id}`,defaultValue:s.layout,onChangeCapture:d=>{r(k({id:a.id,key:"layout",value:d.target.value}))},children:C&&C.map((d,j)=>e.jsx("option",{value:d.value,children:d.label},j))},`layout-${a.id}`)]});case"wysiwyg":return e.jsxs("div",{className:"flex-between",children:[e.jsx("label",{className:"form-label",children:c("Enable editor")}),e.jsx("div",{className:"toggle-group",children:e.jsxs("label",{className:"toggle",children:[e.jsx("input",{id:`wysiwyg-${a.id}`,name:`wysiwyg-${a.id}`,type:"checkbox",defaultChecked:s.wysiwyg,disabled:a.field.metaFieldId!==null,onChangeCapture:d=>{r(k({id:a.id,key:"wysiwyg",value:d.target.checked}))}},`wysiwyg-${a.id}`),e.jsx("span",{className:"slider round"})]})})]})}return null};return x().length===0?e.jsx(q,{style:T.WARNING,children:"No extra settings avaliable"}):e.jsx("div",{className:"flex-column s-24",children:x().map(t=>m(t))})};fe.propTypes={element:f.object.isRequired};const na=()=>{const n=document.globals.settings,l=Ue("skin",n,"light"),r=$(),{activeElement:p,elements:s}=w(h=>h.formManager),x=p.id,m=()=>l==="dark"?"#999":"#1d2327",t=()=>{const h=s.filter(o=>o.id===x);return h.length===1?h[0]:null};return t()?e.jsxs(O.Fragment,{children:[e.jsxs("div",{className:"p-24 flex-between b-bottom-1",children:[e.jsxs("span",{className:"i-flex-center s-8",children:[e.jsx("span",{className:"color-black text-ellipsis",children:t().field.name}),e.jsx(aa,{fieldType:t().field.type})]}),e.jsx("a",{href:"#",onClick:h=>{h.preventDefault(),r(Y())},children:e.jsx(E,{icon:"bx:x",width:24,color:m()})})]}),e.jsx("div",{className:"p-24",children:e.jsxs(Xe,{children:[e.jsx(G,{title:c("Settings"),children:e.jsx(he,{element:t()})}),e.jsx(G,{title:c("Extra"),children:e.jsx(fe,{element:t()})}),t().field.validation&&e.jsx(G,{title:c("Validation"),children:e.jsx(ue,{element:t()})})]})})]}):null},ca=()=>{const a=$(),{form:n}=w(h=>h.formManager),l=h=>{if(!n||!n.meta)return null;const o=n.meta.filter(v=>v.key===h);return o.length===1&&o[0].value?o[0].value:null},r=document.globals.globals.find,p=l("fill_meta_location_belong"),s=l("fill_meta_location_find"),x=l("fill_meta_location_item"),m=()=>{let h=[];switch(p){case W.CUSTOM_POST_TYPE:const o=r.POST_ID.filter(b=>s===b.label);o.length===1&&o[0].options&&(h=o[0].options);break;case W.TAXONOMY:const v=r.TERM_ID.filter(b=>s===b.label);v.length===1&&v[0].options&&(h=v[0].options);break;case W.USER:h=r.USER_ID.filter(b=>b.value!==null);break}return h},t=h=>{a(Z({id:h,belong:p,find:s}))};return S.useEffect(()=>{n&&n.meta&&a(Z({id:x,belong:p,find:s}))},[n]),!n||m().length===0?null:e.jsx("div",{className:"mb-24",children:e.jsx("div",{className:"acpt-select",children:e.jsxs("select",{defaultValue:x,className:"form-control",onChange:h=>{h.preventDefault(),t(h.target.value)},children:[e.jsx("option",{value:null,children:c("Preview element")}),m()&&m().map((h,o)=>e.jsx("option",{value:h.value,children:h.label},o))]})})})},be=({fields:a})=>{const{activeElement:n}=w(l=>l.formManager);return e.jsxs("div",{className:"col-3",children:[e.jsx(ca,{}),e.jsx("div",{className:"with-shadow bg-white b-rounded",children:n?e.jsx(na,{}):e.jsx(ce,{fields:a})})]})};be.propTypes={fields:f.array.isRequired};const oa=()=>{const{elements:a}=w(x=>x.formManager),[n,l]=S.useState(null);if(Te({onDragStart:x=>{l(x.active)},onDragCancel:x=>{l(null)},onDragEnd:x=>{l(null)}}),!n)return null;let r=e.jsx("div",{children:"No drag overlay"});const p=n.data.current.fromSidebar,s=n.data.current.fromCanvas;if(p&&(r=e.jsx(P,{field:n.data.current.field,mode:"overlay"})),s){const x=a.filter(m=>m.id===n.id);x.length===1&&(r=e.jsx(P,{field:x[0].field,mode:"dragging"}))}return e.jsx($e,{children:r})},Ma=()=>{const{id:a}=ke(),n=$(),{elements:l}=w(o=>o.formManager),{data:r}=w(o=>o.fetchFormFields),p=S.useRef(null);Ee([p],()=>{var o;((o=document.getElementsByClassName("acpt-overlay"))===null||o===void 0?void 0:o.length)>0||n(Y())}),S.useEffect(()=>{Re(),He(c("Form manager")),n(Ge(a)).then(o=>{const v=o.payload.saved;let b=[];typeof v=="object"&&(v==null?void 0:v.length)>0&&v.map(g=>{const C={id:g.id,metaFieldId:g.metaFieldId,group:g.group,name:g.name,label:g.label,description:g.description,type:g.type,isRequired:g.isRequired,validation:g.validation,isTextual:g.isTextual,isMedia:g.isMedia,extra:g.extra},d={id:g.key,field:C,previewItem:e.jsx(A,{element:{field:C}}),settings:g.settings,validationRules:g.validationRules,fromSidebar:!0};b.push(d)}),n(H({elements:b})),n(We({form:o.payload.form}))})},[a]);const s=we(Ve(_e)),x=o=>{const{active:v,over:b}=o;if(!v||!b)return;const g=v.data.current.fromSidebar,C=v.data.current.fromCanvas;if(g){const d=b.id,j=ee(8);n(Ye({element:{id:j,...v.data.current},position:d}))}if(C){const d=b.id.split("-");let j=d[0];const y=l.findIndex(R=>R.id===v.id);let V=l.findIndex(R=>R.id===j);(d[1]==="bottom"||d[1]==="right")&&(V=V+1);const D=Ie(l,y,V);n(H({elements:D}))}},m=()=>{n(ze({id:a,data:l})).then(o=>{if(o.payload&&o.payload.success)B.success(c("Form successfully saved"));else{const v=o.error&&o.error.message?o.error.message:"Unknown error";B.error(v)}})};if(!r.fields)return e.jsx(Be,{});const t=[e.jsx(L,{testId:"save-form",style:T.PRIMARY,onClick:()=>{m()},children:c("Save")}),e.jsx(L,{style:T.DANGER,onClick:()=>{n(H({elements:[]}))},children:c("Reset fields")})],h=e.jsxs("div",{className:"i-flex-center s-8",children:[e.jsx("h1",{children:e.jsx("span",{children:r.form.label})}),e.jsx("span",{className:"font-regular text-normal",children:e.jsx("span",{className:"color-gray",children:r.form.name})}),e.jsx(ta,{mode:"edit",classButton:"acpt-btn acpt-btn-secondary acpt-btn-sm",record:r.form})]});return e.jsx(Se,{actions:t,title:h,crumbs:[{label:c("Forms list"),link:"/forms"},{label:c("Form manager")}],children:e.jsxs(De,{onDragEnd:x,collisionDetection:Oe,sensors:s,autoScroll:!0,children:[e.jsxs("div",{className:"container",ref:p,children:[e.jsx(be,{fields:r.fields}),e.jsx(da,{})]}),e.jsx(oa,{})]})})};export{Ma as default};
