import{j as e,f as r}from"./fields-Uuj9pZLj.js";import{R as u}from"./vendor-D21mNUGX.js";import{m as w}from"./metaTypes-Bb9tjSPe.js";const I=()=>{let l=!1;if(typeof _<"u"&&typeof _.forEach=="function"){const n=["get","set","at","cloneDeep"];l=!0,n.forEach(function(a){l=typeof _[a]!="function"?!1:l})}return!!l},L=({attributes:l,setAttributes:n})=>{const{__:a}=wp.i18n,{PanelRow:o,SelectControl:s}=wp.components;return e.jsx(o,{children:e.jsx(s,{label:a("Display as","acpt"),value:l.display,options:[{label:a("text","acpt"),value:a("text","acpt")},{label:a("link","acpt"),value:a("link","acpt")}],onChange:c=>{n({...l,display:c})}})})},F=[{name:"Black",slug:"black",color:"#111111"},{name:"White",slug:"white",color:"#ffffff"},{name:"Dark Blue",slug:"dark-blue",color:"#1D3567"},{name:"Cyan",slug:"cyan",color:"#55BABD"},{name:"Orange",slug:"orange",color:"#E36137"}],H=({attributes:l,setAttributes:n})=>{const{__:a}=wp.i18n,{PanelRow:o,BaseControl:s,ColorPicker:c,GradientPicker:p,SelectControl:i,__experimentalBorderControl:d,__experimentalBoxControl:m}=wp.components,y=[{label:a("--Select---","acpt"),value:""},{label:a("Opens in a new window or tab","acpt"),value:"_blank"},{label:a("Opens in the same frame as it was clicked","acpt"),value:"_self"},{label:a("Opens in the parent frame","acpt"),value:"_parent"},{label:a("Opens in the full body of the window","acpt"),value:"_top"}];return e.jsxs(u.Fragment,{children:[e.jsx(o,{children:e.jsx(i,{label:a("Select target","acpt"),value:l.target,options:y,onChange:v=>{n({...l,target:v})}})}),e.jsx(o,{children:e.jsx(m,{label:a("Padding"),onChange:v=>{n({...l,padding:v})},values:l.padding})}),e.jsx(o,{children:e.jsx(s,{label:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",width:"216px"},children:[e.jsx("span",{children:a("Text color")}),e.jsx("a",{href:"#",onClick:v=>{v.preventDefault(),n({...l,textColor:null})},children:a("Reset")})]}),children:e.jsx(c,{onChange:v=>{n({...l,textColor:v})},enableAlpha:!0,defaultValue:"#000",color:l.textColor})})}),e.jsx(o,{children:e.jsx(s,{label:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",width:"216px"},children:[e.jsx("span",{children:a("Background color")}),e.jsx("a",{href:"#",onClick:v=>{v.preventDefault(),n({...l,backgroundColor:null})},children:a("Reset")})]}),children:e.jsx(c,{onChange:v=>{n({...l,backgroundColor:v})},enableAlpha:!0,defaultValue:"#000",color:l.backgroundColor})})}),e.jsx(o,{children:e.jsx(s,{label:a("Gradient"),children:e.jsx(p,{onChange:v=>{n({...l,gradient:v})},value:l.gradient,gradients:[{name:"JShine",gradient:"linear-gradient(135deg,#12c2e9 0%,#c471ed 50%,#f64f59 100%)",slug:"jshine"},{name:"Moonlit Asteroid",gradient:"linear-gradient(135deg,#0F2027 0%, #203A43 0%, #2c5364 100%)",slug:"moonlit-asteroid"},{name:"Rastafarie",gradient:"linear-gradient(135deg,#1E9600 0%, #FFF200 0%, #FF0000 100%)",slug:"rastafari"}]})})}),e.jsx(o,{children:e.jsx(d,{colors:F,label:a("Border"),onChange:v=>{n({...l,border:v})},value:l.border})}),e.jsx(o,{children:e.jsx(m,{label:a("Border radius"),onChange:v=>{n({...l,borderRadius:v})},values:l.borderRadius})})]})},N=({attributes:l,setAttributes:n})=>{const{__:a}=wp.i18n,{PanelRow:o,TextControl:s,__experimentalBorderControl:c,__experimentalBoxControl:p}=wp.components;return e.jsxs(u.Fragment,{children:[e.jsx(o,{children:e.jsx(c,{colors:F,label:a("Border"),onChange:i=>{n({...l,border:i})},value:l.border})}),e.jsx(o,{children:e.jsx(p,{label:a("Border radius"),onChange:i=>{n({...l,borderRadius:i})},values:l.borderRadius})}),e.jsx(o,{children:e.jsx(s,{label:a("Width","acpt"),value:l.width,onChange:i=>{n({...l,width:i})}})}),e.jsx(o,{children:e.jsx(s,{label:a("Height","acpt"),value:l.height,onChange:i=>{n({...l,height:i})}})})]})},z=({attributes:l,setAttributes:n})=>{const{__:a}=wp.i18n,{PanelRow:o,TextControl:s,SelectControl:c}=wp.components,p=[{label:a("--Select---","acpt"),value:""},{value:"prepend",label:"Prepend"},{value:"append",label:"Append"},{value:"none",label:"None"}],i=[{label:a("--Select---","acpt"),value:""},{value:"full",label:"Full"},{value:"abbreviation",label:"Abbreviation"}];return e.jsxs(u.Fragment,{children:[e.jsx(o,{children:e.jsx(s,{label:a("Value format (Decimal points)","acpt"),value:l.uomFormatDecimalPoints,onChange:d=>{n({...l,uomFormatDecimalPoints:d})}})}),e.jsx(o,{children:e.jsx(s,{label:a("Value format (Decimal separator)","acpt"),value:l.uomFormatDecimalSeparator,onChange:d=>{n({...l,uomFormatDecimalSeparator:d})}})}),e.jsx(o,{children:e.jsx(s,{label:a("Value format (Thousands separator)","acpt"),value:l.uomFormatThousandsSeparator,onChange:d=>{n({...l,uomFormatThousandsSeparator:d})}})}),e.jsx(o,{children:e.jsx(c,{label:a("UOM format","acpt"),value:l.uomFormat,options:i,onChange:d=>{n({...l,uomFormat:d})}})}),e.jsx(o,{children:e.jsx(c,{label:a("UOM position","acpt"),value:l.uomPosition,options:p,onChange:d=>{n({...l,uomPosition:d})}})})]})},U=({attributes:l,setAttributes:n})=>{const{__:a}=wp.i18n,{PanelRow:o,SelectControl:s}=wp.components,c=[{label:a("--Select---","acpt"),value:""},{value:"d-M-y",label:"dd-mmm-yy (ex. 28-OCT-90)"},{value:"d-M-Y",label:"dd-mmm-yyyy (ex. 28-OCT-1990)"},{value:"d M y",label:"mmm yy (ex. 28 OCT 90)"},{value:"d M Y",label:"mmm yyyy (ex. 28 OCT 1990)"},{value:"d/m/Y",label:"dd/mm/yy (ex. 28/10/90)"},{value:"d/m/Y",label:"dd/mm/yyyy (ex. 28/10/1990)"},{value:"m/d/y",label:"mm/dd/yy (ex. 10/28/90)"},{value:"m/d/Y",label:"mm/dd/yyyy (ex. 10/28/1990)"},{value:"d.m.Y",label:"dd.mm.yy (ex. 28.10.90)"},{value:"d.m.Y",label:"dd.mm.yyyy (ex. 28.10.1990)"}];return e.jsx(o,{children:e.jsx(s,{label:a("Select date format","acpt"),value:l.dateFormat,options:c,onChange:p=>{n({...l,dateFormat:p})}})})},D=({attributes:l,setAttributes:n})=>{const{__:a}=wp.i18n,{PanelRow:o,SelectControl:s}=wp.components,c=[{label:a("--Select---","acpt"),value:""},{value:"H:i",label:"H:i (ex. 21:18)"},{value:"g:i a",label:"g:i a (ex. 9:18 pm)"},{value:"g:i A",label:"g:i A (ex. 9:18 PM)"}];return e.jsx(o,{children:e.jsx(s,{label:a("Select time format","acpt"),value:l.timeFormat,options:c,onChange:p=>{n({...l,timeFormat:p})}})})},J=({attributes:l,setAttributes:n})=>{const{__:a}=wp.i18n,{PanelRow:o,SelectControl:s}=wp.components,c=[{label:a("--Select---","acpt"),value:""},{value:"d-M-y",label:"dd-mmm-yy (ex. 28-OCT-90)"},{value:"d-M-Y",label:"dd-mmm-yyyy (ex. 28-OCT-1990)"},{value:"d M y",label:"mmm yy (ex. 28 OCT 90)"},{value:"d M Y",label:"mmm yyyy (ex. 28 OCT 1990)"},{value:"d/m/Y",label:"dd/mm/yy (ex. 28/10/90)"},{value:"d/m/Y",label:"dd/mm/yyyy (ex. 28/10/1990)"},{value:"m/d/y",label:"mm/dd/yy (ex. 10/28/90)"},{value:"m/d/Y",label:"mm/dd/yyyy (ex. 10/28/1990)"},{value:"d.m.Y",label:"dd.mm.yy (ex. 28.10.90)"},{value:"d.m.Y",label:"dd.mm.yyyy (ex. 28.10.1990)"}],p=[{label:a("--Select---","acpt"),value:""},{value:"H:i",label:"H:i (ex. 21:18)"},{value:"g:i a",label:"g:i a (ex. 9:18 pm)"},{value:"g:i A",label:"g:i A (ex. 9:18 PM)"}];return e.jsxs(u.Fragment,{children:[e.jsx(o,{children:e.jsx(s,{label:"Select date format",value:l.dateFormat,options:c,onChange:i=>{n({...l,dateFormat:i})}})}),e.jsx(o,{children:e.jsx(s,{label:"Select time format",value:l.timeFormat,options:p,onChange:i=>{n({...l,timeFormat:i})}})})]})},Y=({attributes:l,setAttributes:n})=>{const{__:a}=wp.i18n,{PanelRow:o,ColorPicker:s,SelectControl:c}=wp.components;return e.jsxs(u.Fragment,{children:[e.jsx(o,{children:e.jsx(c,{label:a("Display as","acpt"),value:l.display,options:[{label:a("Star icons","acpt"),value:a("star","acpt")},{label:a("Text","acpt"),value:a("text","acpt")}],onChange:p=>{n({...l,display:p})}})}),e.jsx(o,{children:e.jsx(s,{label:a("Color","acpt"),color:l.color,enableAlpha:!0,defaultValue:"#000",onChange:p=>{n({...l,color:p})}})})]})},A=({attributes:l,setAttributes:n})=>{const{__:a}=wp.i18n,{PanelRow:o,SelectControl:s}=wp.components;return e.jsx(o,{children:e.jsx(s,{label:a("Display as","acpt"),value:l.display,options:[{label:a("text","acpt"),value:a("text","acpt")},{label:a("list","acpt"),value:a("list","acpt")}],onChange:c=>{n({...l,display:c})}})})},V=({fields:l,attributes:n,setAttributes:a})=>{const{__:o}=wp.i18n,{PanelRow:s,SelectControl:c}=wp.components,p=n.field?JSON.parse(n.field):null;return p&&p.block_name?e.jsx(u.Fragment,{children:e.jsx(s,{children:e.jsxs("div",{className:"acpt-inline-block",children:[e.jsx("span",{className:"acpt-badge acpt-badge-primary",children:p.parent_field}),e.jsx("span",{className:"acpt-badge acpt-badge-success",children:p.block_name}),e.jsx("span",{className:"acpt-badge acpt-badge-success-outline",children:p.block_index}),e.jsx("span",{className:"acpt-badge acpt-badge-secondary-outline",children:p.field}),e.jsx("span",{className:"acpt-badge acpt-badge-secondary-outline",children:p.index})]})})}):p&&p.parent_field?e.jsx(u.Fragment,{children:e.jsx(s,{children:e.jsxs("div",{className:"acpt-inline-block",children:[e.jsx("span",{className:"acpt-badge acpt-badge-primary",children:p.parent_field}),e.jsx("span",{className:"acpt-badge acpt-badge-secondary-outline",children:p.field}),e.jsx("span",{className:"acpt-badge acpt-badge-secondary-outline",children:p.index})]})})}):p?e.jsx(u.Fragment,{children:e.jsx(s,{children:e.jsx("div",{className:"acpt-inline-block",children:e.jsx("span",{className:"acpt-badge acpt-badge-secondary-outline",children:p.label})})})}):e.jsx(u.Fragment,{children:e.jsx(s,{children:e.jsx(c,{label:o("Field","acpt"),value:n.field,options:l,onChange:i=>a({...n,field:i})})})})},G=({attributes:l,setAttributes:n})=>{const{__:a}=wp.i18n,{PanelRow:o,RangeControl:s,TextControl:c,SelectControl:p}=wp.components;return e.jsxs(u.Fragment,{children:[e.jsx(o,{children:e.jsx(p,{label:a("Display as","acpt"),value:l.display,options:[{label:a("text","acpt"),value:a("text","acpt")},{label:a("map","acpt"),value:a("map","acpt")}],onChange:i=>{n({...l,display:i})}})}),e.jsx(o,{children:e.jsx(s,{label:a("Map zoom","acpt"),value:Number(l.zoom),min:1,max:22,onChange:i=>{n({...l,zoom:i})}})}),e.jsx(o,{children:e.jsx(c,{label:a("Width","acpt"),value:l.width,onChange:i=>{n({...l,width:i})}})}),e.jsx(o,{children:e.jsx(c,{label:a("Height","acpt"),value:l.height,onChange:i=>{n({...l,height:i})}})})]})},Z=({attributes:l,setAttributes:n})=>{const{__:a}=wp.i18n,{PanelRow:o,RangeControl:s,SelectControl:c,__experimentalBorderControl:p,__experimentalBoxControl:i}=wp.components;return e.jsxs(u.Fragment,{children:[e.jsx(o,{children:e.jsx(c,{label:a("Display as","acpt"),value:l.display,options:[{label:a("Mosaic","acpt"),value:a("mosaic","acpt")},{label:a("Masonry","acpt"),value:a("masonry","acpt")},{label:a("Carousel","acpt"),value:a("carousel","acpt")}],onChange:d=>{n({...l,display:d})}})}),e.jsx(o,{children:e.jsx(c,{label:a("Sorting","acpt"),value:l.sort,options:[{label:a("Ascendant","acpt"),value:a("asc","acpt")},{label:a("Descendant","acpt"),value:a("desc","acpt")},{label:a("Random","acpt"),value:a("rand","acpt")}],onChange:d=>{n({...l,sort:d})}})}),e.jsx(o,{children:e.jsx(p,{colors:F,label:a("Border"),onChange:d=>{n({...l,border:d})},value:l.border})}),e.jsx(o,{children:e.jsx(i,{label:a("Border radius"),onChange:d=>{n({...l,borderRadius:d})},values:l.borderRadius})}),e.jsx(o,{children:e.jsx(s,{label:a("Gap","acpt"),value:Number(l.gap),min:0,max:60,onChange:d=>{n({...l,gap:d})}})}),e.jsx(o,{children:e.jsx(s,{label:a("Elements per row","acpt"),value:Number(l.elements),min:1,max:6,onChange:d=>{n({...l,elements:d})}})})]})},W=({attributes:l,setAttributes:n})=>{const{__:a}=wp.i18n,{PanelRow:o,SelectControl:s}=wp.components,c=[{label:a("--Select---","acpt"),value:""},{label:a("Unordered list","acpt"),value:"ul"},{label:a("Ordered list","acpt"),value:"ol"},{label:a("Single string","acpt"),value:"string"}];return e.jsx(o,{children:e.jsx(s,{label:a("Display as","acpt"),value:l.display,options:c,onChange:p=>{n({...l,display:p})}})})},X=({attributes:l,setAttributes:n})=>{const{__:a}=wp.i18n,{PanelRow:o,SelectControl:s}=wp.components;return e.jsx(o,{children:e.jsx(s,{label:a("Display as","acpt"),value:l.display,options:[{label:a("Plain text","acpt"),value:a("text","acpt")},{label:a("Flag","acpt"),value:a("flag","acpt")},{label:a("Flag and text","acpt"),value:a("full","acpt")}],onChange:c=>{n({...l,display:c})}})})},K=({attributes:l,setAttributes:n})=>{const{__:a}=wp.i18n,{PanelRow:o,SelectControl:s}=wp.components;return e.jsx(u.Fragment,{children:e.jsx(o,{children:e.jsx(s,{label:a("Style","acpt"),value:l.audioStyle,options:[{label:a("light","acpt"),value:a("light","acpt")},{label:a("dark","acpt"),value:a("dark","acpt")}],onChange:c=>{n({...l,audioStyle:c})}})})})},q=({attributes:l,setAttributes:n})=>{const{__:a}=wp.i18n,{PanelRow:o,SelectControl:s}=wp.components;return e.jsxs(u.Fragment,{children:[e.jsx(o,{children:e.jsx(s,{label:a("Display as","acpt"),value:l.display,options:[{label:a("text","acpt"),value:a("text","acpt")},{label:a("link","acpt"),value:a("link","acpt")}],onChange:c=>{n({...l,display:c})}})}),e.jsx(o,{children:e.jsx(s,{label:a("Format","acpt"),value:l.phoneFormat,options:[{label:a("e164","acpt"),value:a("e164","acpt")},{label:a("international","acpt"),value:a("international","acpt")},{label:a("national","acpt"),value:a("national","acpt")}],onChange:c=>{n({...l,phoneFormat:c})}})})]})},Q=({attributes:l,setAttributes:n,context:a})=>{const{__:o}=wp.i18n,{useBlockProps:s,InspectorControls:c,BlockControls:p,AlignmentControl:i}=wp.blockEditor,d=wp.serverSideRender,{Panel:m,PanelBody:y}=wp.components,v=s(),t=l.field?JSON.parse(l.field):null;return e.jsxs("div",{...v,children:[e.jsx(p,{children:e.jsx(i,{value:l.align,onChange:x=>n({...l,align:x})})}),e.jsx(c,{children:e.jsxs(m,{children:[e.jsx(y,{title:o("General settings","acpt"),initialOpen:!0,children:e.jsx(V,{fields:document.metaFields.filter(x=>x.group==="all"||x.group==="basic"||x.group==="media"),attributes:l,setAttributes:n})}),e.jsxs(y,{title:o("Advanced settings","acpt"),initialOpen:!0,children:[t&&t.type===r.LIST&&e.jsx(W,{attributes:l,setAttributes:n}),t&&t.type===r.EMAIL&&e.jsx(L,{attributes:l,setAttributes:n}),t&&t.type===r.PHONE&&e.jsx(q,{attributes:l,setAttributes:n}),t&&(t.type===r.ADDRESS||t.type===r.ADDRESS_MULTI)&&e.jsx(G,{attributes:l,setAttributes:n}),t&&(t.type===r.AUDIO||t.type===r.AUDIO_MULTI)&&e.jsx(K,{attributes:l,setAttributes:n}),t&&t.type===r.GALLERY&&e.jsx(Z,{attributes:l,setAttributes:n}),t&&t.type===r.URL&&e.jsx(H,{attributes:l,setAttributes:n}),t&&(t.type===r.VIDEO||t.type===r.IMAGE||t.type===r.EMBED)&&e.jsx(N,{attributes:l,setAttributes:n}),t&&(t.type===r.CURRENCY||t.type===r.WEIGHT||t.type===r.LENGTH)&&e.jsx(z,{attributes:l,setAttributes:n}),t&&(t.type===r.DATE||t.type===r.DATE_RANGE)&&e.jsx(U,{attributes:l,setAttributes:n}),t&&t.type===r.DATE_TIME&&e.jsx(J,{attributes:l,setAttributes:n}),t&&t.type===r.TIME&&e.jsx(D,{attributes:l,setAttributes:n}),t&&t.type===r.RATING&&e.jsx(Y,{attributes:l,setAttributes:n}),t&&(t.type===r.SELECT_MULTI||t.type===r.CHECKBOX)&&e.jsx(A,{attributes:l,setAttributes:n}),t&&t.type===r.COUNTRY&&e.jsx(X,{attributes:l,setAttributes:n})]})]})}),e.jsx(d,{block:"advanced-custom-post-type/basic-block",attributes:{...l,...a}})]})},$=["advanced-custom-post-type/basic-block","core/gallery","core/shortcode","core/image","core/list"],k=async(l,n)=>{let a;return a=n instanceof FormData?n:new FormData,a.append("action",l),a.append("data",JSON.stringify(n)),await(await fetch(typeof ajaxurl=="string"?ajaxurl:"/wp-admin/admin-ajax.php",{method:"POST",body:a})).json()},S=l=>{try{JSON.parse(l)}catch{return!1}return!0},ee=l=>le(l)===0,le=l=>Object.keys(l).length,ae=l=>{if(!document.globals)return[];if(!document.globals.globals)return[];const n=document.globals.globals,{__:a}=wp.i18n;if(l.belongsTo==="customPostType"){if(!n.POST_ID)return[];let o=[{value:null,label:a("--Select---","acpt")}];return n.POST_ID.map(s=>{s.label===l.find&&(o=[...o,...s.options])}),o}else if(l.belongsTo==="taxonomy"){if(!n.TERM_ID)return[];let o=[{value:null,label:a("--Select---","acpt")}];return n.TERM_ID.map(s=>{s.label===l.find&&(o=[...o,...s.options])}),o}return[]},ne=({attributes:l,setAttributes:n,context:a})=>{const{__:o}=wp.i18n,{useBlockProps:s,InspectorControls:c,InnerBlocks:p}=wp.blockEditor,{Panel:i,PanelBody:d,PanelRow:m,SelectControl:y}=wp.components,v=s(),t=l.field?JSON.parse(l.field):null,x=l.block?JSON.parse(l.block):null,b=l.template?l.template:null,T=new URLSearchParams(window.location.search),M=()=>t?t.type==="Repeater"?e.jsx(p,{allowedBlocks:["advanced-custom-post-type/repeater-loop-item"],template:b,multiple:!1}):t.type==="FlexibleContent"?x?e.jsx(p,{allowedBlocks:["advanced-custom-post-type/repeater-loop-item"],template:b,multiple:!1}):e.jsx("div",{children:o("Select a block","acpt")}):e.jsx("div",{children:o("Invalid field","acpt")}):e.jsx("div",{children:o("Select a field","acpt")}),B=()=>{if(!t||t.type!=="FlexibleContent")return null;let h=[];return h.push({label:"--Select--",value:null}),document.metaFields.map(g=>{const f=JSON.parse(g.value);f==null||f.blocks.map(C=>{h.push({label:C.name,value:JSON.stringify(C)})})}),e.jsx(m,{children:e.jsx(y,{label:o("Block","acpt"),value:l.block,options:h,onChange:async g=>{const f=S(g)?JSON.parse(g):g;if(S(g)){const C=a?a.postId:T.get("post");let R=await k("generateGutenbergTemplateAction",{field:t,block:f,contextId:C,attributes:l});n({...l,block:g,template:R})}}})})};return e.jsxs("div",{...v,children:[e.jsx(c,{children:e.jsx(i,{children:e.jsx(d,{title:o("General settings","acpt"),initialOpen:!0,children:t?e.jsxs(u.Fragment,{children:[e.jsx(m,{children:e.jsx("div",{className:"acpt-inline-block",children:e.jsx("span",{className:"acpt-badge acpt-badge-secondary-outline",children:t.label})})}),B()]}):e.jsx(u.Fragment,{children:e.jsx(m,{children:e.jsx(y,{label:o("Field","acpt"),value:l.field,options:document.metaFields.filter(h=>h.group==="all"||h.group==="repeatable"),onChange:async h=>{const g=S(h)?JSON.parse(h):h;if(S(h)){const f=a?a.postId:T.get("post");let C=await k("generateGutenbergTemplateAction",{field:g,contextId:f,attributes:l});n({...l,field:h,template:C})}}})})})})})}),M()]})},oe=({attributes:l,setAttributes:n,context:a})=>{const{__:o}=wp.i18n,{useBlockProps:s,InspectorControls:c,InnerBlocks:p}=wp.blockEditor,{Panel:i,PanelBody:d,PanelRow:m,SelectControl:y}=wp.components,v=s(),t=l.field?JSON.parse(l.field):null,x=l.template?l.template:null,b=l.templateType?l.templateType:null,T=new URLSearchParams(window.location.search),M=[{categories:[w.CUSTOM_POST_TYPE,r.POST_OBJECT,r.POST_OBJECT_MULTI],label:o("Title and excerpt"),svg:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48" width="24" height="24" aria-hidden="true" focusable="false"><path d="M41 9H7v3h34V9zm-22 5H7v1h12v-1zM7 26h12v1H7v-1zm34-5H7v3h34v-3zM7 38h12v1H7v-1zm34-5H7v3h34v-3z"></path></svg>',value:"title-excerpt"},{categories:[w.CUSTOM_POST_TYPE,r.POST_OBJECT,r.POST_OBJECT_MULTI],label:o("Title and image"),svg:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48" width="24" height="24" aria-hidden="true" focusable="false"><path d="M41 9H7v3h34V9zm-22 5H7v1h12v-1zM7 26h12v1H7v-1zm34-5H7v3h34v-3zM7 38h12v1H7v-1zm34-5H7v3h34v-3z"></path></svg>',value:"title-image"},{categories:[w.CUSTOM_POST_TYPE,r.POST_OBJECT,r.POST_OBJECT_MULTI],label:o("Title, image, and excerpt"),svg:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48" width="24" height="24" aria-hidden="true" focusable="false"><path d="M7 9h34v6H7V9zm12 8H7v1h12v-1zm18 3H7v1h30v-1zm0 18H7v1h30v-1zM7 35h12v1H7v-1zm34-8H7v6h34v-6z"></path></svg>',value:"title-image-excerpt"},{categories:[w.CUSTOM_POST_TYPE,w.TAXONOMY,r.POST_OBJECT,r.POST_OBJECT_MULTI,r.TERM_OBJECT,r.TERM_OBJECT_MULTI],label:o("Only title"),svg:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 16 16"><path fill="currentColor" fill-rule="evenodd" d="M.75 2a.75.75 0 0 0-.75.75v1.5a.75.75 0 0 0 1.5 0V3.5h2.75v9h-.5a.75.75 0 0 0 0 1.5h2.5a.75.75 0 0 0 0-1.5h-.5v-9H8.5v.75a.75.75 0 0 0 1.5 0v-1.5A.75.75 0 0 0 9.25 2zM8 7.75A.75.75 0 0 1 8.75 7h6.5a.75.75 0 0 1 0 1.5h-6.5A.75.75 0 0 1 8 7.75m0 3.5a.75.75 0 0 1 .75-.75h6.5a.75.75 0 0 1 0 1.5h-6.5a.75.75 0 0 1-.75-.75" clip-rule="evenodd"/></svg>',value:"title"},{categories:[w.CUSTOM_POST_TYPE,w.TAXONOMY,r.POST_OBJECT,r.POST_OBJECT_MULTI,r.TERM_OBJECT,r.TERM_OBJECT_MULTI],label:o("Only link"),svg:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="currentColor" d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1M8 13h8v-2H8zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5"/></svg>',value:"link"},{categories:[w.USER,r.USER,r.USER_MULTI],label:o("Avatar"),svg:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 15 15"><path fill="currentColor" fill-rule="evenodd" d="M.877 7.5a6.623 6.623 0 1 1 13.246 0a6.623 6.623 0 0 1-13.246 0M7.5 1.827a5.673 5.673 0 0 0-4.193 9.494A4.971 4.971 0 0 1 7.5 9.025a4.97 4.97 0 0 1 4.193 2.296A5.673 5.673 0 0 0 7.5 1.827m3.482 10.152A4.023 4.023 0 0 0 7.5 9.975a4.023 4.023 0 0 0-3.482 2.004A5.648 5.648 0 0 0 7.5 13.173c1.312 0 2.52-.446 3.482-1.194M5.15 6.505a2.35 2.35 0 1 1 4.7 0a2.35 2.35 0 0 1-4.7 0m2.35-1.4a1.4 1.4 0 1 0 0 2.8a1.4 1.4 0 0 0 0-2.8" clip-rule="evenodd"/></svg>',value:"avatar"},{categories:[r.USER,r.USER_MULTI],label:o("Avatar and name"),svg:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48" width="24" height="24" aria-hidden="true" focusable="false"><path d="M41 9H7v3h34V9zm-22 5H7v1h12v-1zM7 26h12v1H7v-1zm34-5H7v3h34v-3zM7 38h12v1H7v-1zm34-5H7v3h34v-3z"></path></svg>',value:"avatar-name"},{categories:[r.USER,r.USER_MULTI],label:o("Avatar, name and bio"),svg:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48" width="24" height="24" aria-hidden="true" focusable="false"><path d="M7 9h34v6H7V9zm12 8H7v1h12v-1zm18 3H7v1h30v-1zm0 18H7v1h30v-1zM7 35h12v1H7v-1zm34-8H7v6h34v-6z"></path></svg>',value:"avatar-name-bio"},{categories:[r.USER,r.USER_MULTI],label:o("Name and bio"),svg:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48" width="24" height="24" aria-hidden="true" focusable="false"><path d="M41 9H7v3h34V9zm-22 5H7v1h12v-1zM7 26h12v1H7v-1zm34-5H7v3h34v-3zM7 38h12v1H7v-1zm34-5H7v3h34v-3z"></path></svg>',value:"name-bio"},{categories:[r.USER,r.USER_MULTI],label:o("Only name"),svg:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 16 16"><path fill="currentColor" fill-rule="evenodd" d="M.75 2a.75.75 0 0 0-.75.75v1.5a.75.75 0 0 0 1.5 0V3.5h2.75v9h-.5a.75.75 0 0 0 0 1.5h2.5a.75.75 0 0 0 0-1.5h-.5v-9H8.5v.75a.75.75 0 0 0 1.5 0v-1.5A.75.75 0 0 0 9.25 2zM8 7.75A.75.75 0 0 1 8.75 7h6.5a.75.75 0 0 1 0 1.5h-6.5A.75.75 0 0 1 8 7.75m0 3.5a.75.75 0 0 1 .75-.75h6.5a.75.75 0 0 1 0 1.5h-6.5a.75.75 0 0 1-.75-.75" clip-rule="evenodd"/></svg>',value:"name"}],B=async(h,g=null)=>{const f=a?a.postId:T.get("post"),C=S(t)?JSON.parse(t):t;let R=await k("generateGutenbergTemplateAction",{field:C,contextId:f||g,attributes:{...l,templateType:h}});n({...l,templateType:h,template:R})};return e.jsxs("div",{...v,children:[e.jsx(c,{children:e.jsx(i,{children:e.jsxs(d,{title:o("General settings","acpt"),initialOpen:!0,children:[t?e.jsx(u.Fragment,{children:e.jsx(m,{children:e.jsx("div",{className:"acpt-inline-block",children:e.jsx("span",{className:"acpt-badge acpt-badge-secondary-outline",children:t.label})})})}):e.jsx(m,{children:e.jsx(y,{label:o("Field","acpt"),value:l.field,options:document.metaFields.filter(h=>h.group==="all"||h.group==="relational"),onChange:h=>{n({...l,field:h})}})}),pagenow==="site-editor"&&t&&ee(a)&&t.belongsTo==="customPostType"&&e.jsx(m,{children:e.jsx(y,{label:o("Preview element","acpt"),value:l.previewPostId,options:ae(t),onChange:async h=>{const g=JSON.parse(l.field);let f=await k("generateGutenbergTemplateAction",{field:g,contextId:h,attributes:l});n({...l,previewPostId:parseInt(h),template:f})}})})]})})}),t?e.jsx(u.Fragment,{children:b?e.jsx(p,{allowedBlocks:$,template:x}):e.jsx("div",{className:"components-placeholder block-editor-block-variation-picker is-large",children:e.jsx("div",{className:"components-placeholder__fieldset",children:e.jsx("ul",{className:"block-editor-block-variation-picker__variations",role:"list",children:M.filter(h=>{const g=S(t)?JSON.parse(t):t;return g.type===r.POST?g.relations?h.categories.includes(g.relations.to.type):!1:h.categories.includes(g.type)}).map(h=>e.jsxs("li",{children:[e.jsx("button",{type:"button",className:"components-button block-editor-block-variation-picker__variation is-secondary has-icon","aria-label":h.label,onClick:async g=>{g.preventDefault(),await B(h.value,l.previewPostId)},children:e.jsx("unwanteddiv",{dangerouslySetInnerHTML:{__html:h.svg}})}),e.jsx("span",{className:"block-editor-block-variation-picker__variation-label",children:h.label})]}))})})})}):e.jsx("div",{children:o("Select a relational field","acpt")})]})};wp.i18n;const te=async()=>{let l=[],n=await k("fetchAllMetaAction",{gutenberg:!0});for(const[a,o]of Object.entries(n))for(const[s,c]of Object.entries(o))c.length>0&&l.push({belongsTo:a,find:s,records:c});return l},se=async()=>{let l=await k("fetchAllFindBelongsAction",{});document.globals.globals=l},ce=e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 634 572",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M465.039 115.5L339.505 42.9755C333.314 39.3991 325.686 39.3991 319.495 42.9755L193.961 115.5L319.495 188.024C325.686 191.601 333.314 191.601 339.505 188.024L465.039 115.5ZM359.515 8.34015C340.943 -2.3891 318.057 -2.3891 299.485 8.34015L114 115.5L299.485 222.66C318.057 233.389 340.943 233.389 359.515 222.66L545 115.5L359.515 8.34015Z",fill:"#000"}),e.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M520.34 209.498L394.765 281.952C388.572 285.524 384.758 292.131 384.76 299.28L384.801 444.258L510.376 371.805C516.568 368.232 520.383 361.625 520.381 354.476L520.34 209.498ZM374.775 247.305C356.197 258.024 344.754 277.844 344.76 299.292L344.82 513.507L530.366 406.452C548.944 395.733 560.387 375.913 560.381 354.465L560.32 140.25L374.775 247.305Z",fill:"#000"}),e.jsx("path",{opacity:"0.5",fillRule:"evenodd",clipRule:"evenodd",d:"M275.34 444.259L275.381 299.281C275.383 292.131 271.568 285.525 265.376 281.952L139.801 209.498L139.76 354.476C139.758 361.625 143.572 368.232 149.765 371.805L275.34 444.259ZM315.381 299.292C315.387 277.844 303.944 258.024 285.366 247.305L99.8202 140.25L99.7599 354.465C99.7538 375.913 111.197 395.733 129.775 406.452L315.32 513.507L315.381 299.292Z",fill:"#000"})]}),{__:j}=wp.i18n,{registerBlockType:P}=wp.blocks,{useBlockProps:O,useInnerBlocksProps:re,InnerBlocks:E}=wp.blockEditor;wp.serverSideRender;I()&&_.noConflict();se();const pe=async()=>{let l=[{value:null,label:j("--Select---","acpt"),group:"all"}];return te().then(n=>{n.map(a=>{const o=a.records,s=a.belongsTo,c=a.find?a.find:null,p=(i,d,m,y=null)=>{let v=[],t=[];return m.blocks&&m.blocks.map(x=>{let b={name:x.name,fields:[]};x.fields&&x.fields.map(T=>{b.fields.push(p(i,d,T,m))}),v.push(b)}),m.children&&m.children.map(x=>{t.push(p(i,d,x,m))}),{group:i,value:c+"_"+m.db_name,label:"["+c+"] - "+m.ui_name,box:d.name,field:m.name,type:m.type,belongsTo:s,find:c,advanced_options:m.advancedOptions,relations:m.relations.length>0?{relationship:m.relations[0].relationship,from:m.relations[0].from,to:m.relations[0].to}:null,parent_field:y?y.name:null,blocks:v,children:t}};o.length>0&&o.map(i=>{i.boxes.length>0&&i.boxes.map(d=>{d.fields&&d.fields.map(m=>{l.push({label:"["+c+"] - "+m.ui_name,group:m.group,value:JSON.stringify(p(i.name,d,m))})})})})})}),l},ie=l=>{document.metaFields=l,wp.blocks.updateCategory("advanced-custom-post-type-blocks",{icon:ce}),P("advanced-custom-post-type/relational-block",{apiVersion:3,title:j("ACPT Relational fields","acpt"),description:j("Include an ACPT relational field.","acpt"),keywords:["acpt","meta field","relational"],icon:"randomize",category:"advanced-custom-post-type-blocks",textdomain:"advanced-custom-post-type",usesContext:["postId"],attributes:{postId:{type:"integer",default:1e17},previewPostId:{type:"integer",default:1e17},field:{type:"string",default:null},templateType:{type:"string",default:null},template:{type:"object",default:null}},edit:oe,save:()=>{const n=O.save();return e.jsx("div",{...n,children:e.jsx(E.Content,{})})}}),P("advanced-custom-post-type/repeater-block",{apiVersion:3,title:j("ACPT Loop fields","acpt"),description:j("Include an ACPT repeater (or flexible) field.","acpt"),keywords:["acpt","meta field","repeater"],icon:"image-rotate",category:"advanced-custom-post-type-blocks",textdomain:"advanced-custom-post-type",usesContext:["postId"],attributes:{postId:{type:"integer",default:1e17},field:{type:"string",default:null},block:{type:"string",default:null}},edit:ne,save:()=>{const n=O.save();return e.jsx("div",{...n,children:e.jsx(E.Content,{})})}}),P("advanced-custom-post-type/repeater-loop-item",{apiVersion:3,parent:["advanced-custom-post-type/repeater"],title:j("ACPT loop item","acpt"),description:j("Include an ACPT repeater (or flexible) field.","acpt"),keywords:["acpt","meta field","repeater"],icon:"image-rotate",category:"advanced-custom-post-type-blocks",textdomain:"advanced-custom-post-type",usesContext:["postId"],edit:()=>{const n=O(),a=re(n,{template:[["core/paragraph"]]});return e.jsx("div",{...a})},save:n=>{const a=O.save();return e.jsx("div",{...a,children:e.jsx(E.Content,{})})}}),P("advanced-custom-post-type/basic-block",{apiVersion:3,title:j("ACPT Basic fields","acpt"),description:j("Include an ACPT basic field.","acpt"),keywords:["acpt","meta field"],icon:"block-default",category:"advanced-custom-post-type-blocks",textdomain:"advanced-custom-post-type",usesContext:["postId"],supports:{color:{gradients:!0},typography:{fontSize:!0},spacing:{padding:!0,margin:!0}},attributes:{postId:{type:"integer",default:1e17},field:{type:"string",default:null},gradient:{type:"string",default:null},backgroundColor:{type:"string",default:null},textColor:{type:"string",default:null},style:{type:"object",default:{}},audioStyle:{type:"string",default:null},display:{type:"string",default:null},color:{type:"string",default:null},fontSize:{type:"string",default:null},target:{type:"string",default:null},width:{type:"string",default:null},height:{type:"string",default:null},uomFormatDecimalPoints:{type:"string",default:null},uomFormatDecimalSeparator:{type:"string",default:null},uomFormatThousandsSeparator:{type:"string",default:null},uomFormat:{type:"string",default:null},uomPosition:{type:"string",default:null},phoneFormat:{type:"string",default:null},dateFormat:{type:"string",default:null},timeFormat:{type:"string",default:null},sort:{type:"string",default:null},align:{type:"string",default:"left"},zoom:{type:"integer",default:14},gap:{type:"integer",default:20},elements:{type:"integer",default:3},border:{type:"object",default:{}},borderRadius:{type:"object",default:{}},padding:{type:"object",default:{}}},edit:Q,save:n=>{const a=O.save();return e.jsx("div",{...a,children:n.attributes.content})}})};pe().then(l=>{l.length>0&&ie(l)});
