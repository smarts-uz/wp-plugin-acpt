import{j as e,u as a}from"./fields-Uuj9pZLj.js";import{a as p,R as S}from"./vendor-D21mNUGX.js";import{u as $,B as f,s as j,w as R,cH as T,P as c,i as h,A as q,a as E,m as _,c as k,L as W,I as w}from"./index-DW87FRXD.js";import{_ as F,n as A,L as V}from"./Layout-CbPpDR-w.js";import{T as I,a as D}from"./index-CTmKXGMM.js";import{C as O}from"./index-DbbBejw-.js";import{C as Y}from"./index-Dp7DyYVn.js";import{M as B}from"./index-mrXLwnSf.js";import{u as G,a as H,F as U}from"./index.esm-DCQn2FO4.js";import{S as x}from"./Select-Cp1uHe-V.js";import{I as y}from"./InputHidden-Sd_YdD40.js";import{M as z}from"./index-Bskps18W.js";const J=()=>{const t=$(),[s,l]=p.useState(!1),i=()=>{R("deleteWPMLConfigAction",{}).then(n=>{n.success===!0&&t(T()).then(d=>{F.success(a("File was successfully deleted."))})}).catch(n=>{console.error(n.message),F.error(a("An unexpected error has occurred"))})},r=[e.jsx(f,{style:j.SUCCESS,onClick:n=>{n.preventDefault(),i(),l(!s)},children:a("Yes")}),e.jsx(f,{style:j.DANGER,onClick:n=>{n.preventDefault(),l(!s)},children:a("No")})];return e.jsxs(S.Fragment,{children:[e.jsx(B,{title:a("Confirm deleting xpml-config.xml file"),visible:s,buttons:r,children:a("Are you sure?")}),e.jsx("a",{href:"#",className:"acpt-btn acpt-btn-danger",onClick:n=>{n.preventDefault(),l(!s)},children:a("Delete file")})]})},L=({fileExists:t,xml:s,helpLink:l,setDefaultTab:i})=>(p.useEffect(()=>{i(0)},[]),e.jsx("div",{className:"responsive",children:e.jsxs("div",{className:"flex-column s-24",children:[!t&&e.jsx("div",{className:"p-24 bg-white with-shadow",children:e.jsxs("div",{className:"b-maxi b-rounded p-24 flex-column s-12 text-center",children:[e.jsxs("span",{children:[a("No wpml-config.xml found.")," ",e.jsx("a",{href:l,target:"_blank",children:"What is wpml-config.xml file?"})]}),e.jsx("div",{children:e.jsx(f,{style:j.SECONDARY,onClick:r=>{r.preventDefault(),i(1)},children:a("Create wpml-config.xml file")})})]})}),s&&e.jsx(Y,{children:e.jsxs("div",{className:"p-24 flex-column s-12",children:[e.jsxs("div",{className:"flex-between s-8 for-xs",children:[e.jsx("span",{children:a("This is the generated wpml-config.xml file:")}),e.jsx("a",{href:l,target:"_blank",children:"What is wpml-config.xml file?"})]}),e.jsx(O,{language:"xml",code:s,height:400,editable:!1}),e.jsx("div",{children:e.jsx(J,{})})]})})]})}));L.propTypes={fileExists:c.bool.isRequired,xml:c.string.isRequired,helpLink:c.string.isRequired,setDefaultTab:c.func.isRequired};const N=({name:t,field:s})=>{const{register:l,errors:i}=G(),r=[{label:"Copy",value:"copy"},{label:"Copy once",value:"copy-once"},{label:"Translate",value:"translate"},{label:"Ignore",value:"ignore"}],n=[{label:"Textarea",value:"textarea"},{label:"Line",value:"line"},{label:"Visual",value:"visual"}],d=[{label:"True",value:"1"},{label:"False",value:"0"}];return t==="custom-types"?e.jsxs("tr",{children:[e.jsx(y,{register:l,id:`${t}.${s.name}.id`,value:s.id}),e.jsx("td",{children:s.name}),e.jsx("td",{children:e.jsx(x,{register:l,id:`${t}.${s.name}.translate`,errors:i,values:d,defaultValue:s.translate})}),e.jsx("td",{children:e.jsx(x,{register:l,id:`${t}.${s.name}.display_as_translated`,errors:i,values:d,defaultValue:s.display_as_translated})}),e.jsx("td",{children:e.jsx(x,{register:l,id:`${t}.${s.name}.automatic`,errors:i,values:d,defaultValue:s.automatic})})]}):t==="taxonomies"?e.jsxs("tr",{children:[e.jsx(y,{register:l,id:`${t}.${s.slug}.id`,value:s.id}),e.jsx("td",{children:s.slug}),e.jsx("td",{children:e.jsx(x,{register:l,id:`${t}.${s.slug}.translate`,errors:i,values:d,defaultValue:s.translate})}),e.jsx("td",{children:e.jsx(x,{register:l,id:`${t}.${s.slug}.display_as_translated`,errors:i,values:d,defaultValue:s.display_as_translated})})]}):e.jsxs("tr",{children:[e.jsx(y,{register:l,id:`${t}.${s.slug}.id`,value:s.id}),e.jsx(y,{register:l,id:`${t}.${s.slug}.label`,value:s.label}),e.jsx("td",{children:s.slug}),e.jsx("td",{children:s.label}),e.jsx("td",{children:e.jsx(z,{fieldType:s.type,css:"with-border b-rounded p-8"})}),e.jsx("td",{children:e.jsx(x,{register:l,id:`${t}.${s.slug}.action`,errors:i,values:r,defaultValue:s.action})}),e.jsx("td",{children:e.jsx(x,{register:l,id:`${t}.${s.slug}.style`,errors:i,values:n,defaultValue:s.style})})]})};N.propTypes={name:c.string.isRequired,field:c.array.isRequired};const m=({name:t,title:s,fields:l})=>{if(h(l))return null;let i=[];for(const[r,n]of Object.entries(l))i.push(n);return t==="custom-types"?e.jsxs("div",{children:[e.jsx("h3",{className:"mb-12",children:a(s)}),e.jsx("div",{className:"responsive with-shadow b-rounded",children:e.jsxs("table",{className:"acpt-table",children:[e.jsxs("thead",{children:[e.jsx("th",{children:a("Post type")}),e.jsx("th",{children:a("Translate")}),e.jsx("th",{children:a("Display as translated")}),e.jsx("th",{children:a("Automatic")})]}),i&&i.map((r,n)=>e.jsx(N,{name:t,field:r}))]})})]}):t==="taxonomies"?e.jsxs("div",{children:[e.jsx("h3",{className:"mb-12",children:a(s)}),e.jsx("div",{className:"responsive with-shadow b-rounded",children:e.jsxs("table",{className:"acpt-table",children:[e.jsxs("thead",{children:[e.jsx("th",{children:a("Taxonomy")}),e.jsx("th",{children:a("Translate")}),e.jsx("th",{children:a("Display as translated")})]}),i&&i.map((r,n)=>e.jsx(N,{name:t,field:r}))]})})]}):e.jsxs("div",{children:[e.jsx("h3",{className:"mb-12",children:a(s)}),e.jsx("div",{className:"responsive with-shadow b-rounded",children:e.jsxs("table",{className:"acpt-table",children:[e.jsxs("thead",{children:[e.jsx("th",{children:a("Field slug")}),e.jsx("th",{children:a("Field name")}),e.jsx("th",{children:a("Type")}),e.jsx("th",{children:a("Action")}),e.jsx("th",{children:a("Style")})]}),e.jsx("tbody",{children:i&&i.map((r,n)=>e.jsx(N,{name:t,field:r}))})]})})]})};m.propTypes={name:c.string.isRequired,title:c.string.isRequired,fields:c.array.isRequired};const M=({fields:t})=>{if(h(t))return e.jsx("div",{className:"p-24",children:a("Loading...")});const s=$(),l=t["custom-types"],i=t.taxonomies,r=t["admin-texts"],n=t["custom-fields"],d=t["custom-term-fields"],[g,o]=p.useState(!1),v=H({mode:"onChange"}),C=()=>{o(!0),R("saveWPMLConfigAction",{resetDefault:!0}).then(u=>{u.success===!0&&s(T()).then(b=>{A.success(a("Settings successfully saved"))}),o(!1)}).catch(u=>{console.error(u.message),o(!1)})},P=u=>{o(!0),R("saveWPMLConfigAction",u).then(b=>{b.success===!0&&s(T()).then(Q=>{A.success(a("Settings successfully saved"))}),o(!1)}).catch(b=>{console.error(b.message),o(!1)})};return h(l)&&h(i)&&h(r)&&h(n)&&h(d)?e.jsx(q,{style:j.WARNING,children:a("No fields found")}):e.jsx(U,{...v,children:e.jsx("form",{onSubmit:v.handleSubmit(P),children:e.jsxs("div",{className:"flex-column s-24",children:[e.jsx("div",{children:a("Override here the default settings:")}),e.jsx(m,{name:"custom-types",title:"Post types",fields:l}),e.jsx(m,{name:"taxonomies",title:"Taxonomies",fields:i}),e.jsx(m,{name:"custom-fields",title:"Post type fields",fields:n}),e.jsx(m,{name:"custom-term-fields",title:"Taxonomy fields",fields:d}),e.jsx(m,{name:"admin-texts",title:"Option page fields",fields:r}),e.jsxs("div",{className:"i-flex-center s-8",children:[e.jsx(f,{disabled:g,type:"submit",style:j.PRIMARY,children:a("Save")}),e.jsx(f,{disabled:g,type:"button",style:j.SECONDARY,onClick:u=>{u.preventDefault(),C()},children:a("Reset to the default values")})]})]})})})};M.propTypes={fields:c.array.isRequired};const K=({title:t,url:s,helpLink:l})=>{const i=$(),{fileExists:r,xml:n,fields:d,loading:g}=E(C=>C.fetchWPMLSettings);p.useEffect(()=>{_(t),k(s),i(T())},[]);const[o,v]=p.useState(0);return g?e.jsx(W,{}):e.jsx(V,{title:t,crumbs:[{label:t}],children:e.jsx("div",{className:"acpt-main",children:e.jsxs(I,{defaultActiveTab:o,children:[e.jsx(D,{title:e.jsxs(S.Fragment,{children:[e.jsx("span",{className:"visible-xs",children:e.jsx(w,{icon:"bx:cog",width:24})}),e.jsx("span",{className:"hidden-xs",children:a("Actual settings")})]}),children:e.jsx(L,{setDefaultTab:v,helpLink:l,fileExists:r,xml:n})}),e.jsx(D,{title:e.jsxs(S.Fragment,{children:[e.jsx("span",{className:"visible-xs",children:e.jsx(w,{icon:"bx:cog",width:24})}),e.jsx("span",{className:"hidden-xs",children:a("Custom settings")})]}),children:e.jsx(M,{fields:d})})]})})})};K.propTypes={title:c.string.isRequired,link:c.string.isRequired,helpLink:c.string.isRequired};export{K as W};
